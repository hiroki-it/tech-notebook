
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kubernetesãƒªã‚½ãƒ¼ã‚¹ï¼ Kubernetesã®çŸ¥è¦‹ã‚’è¨˜éŒ²ã—ã¦ã„ã¾ã™ã€‚">
      
      
        <meta name="author" content="Hiroki Hasegawa">
      
      
        <link rel="canonical" href="https://hiroki-it.github.io/tech-notebook/infrastructure_as_code/infrastructure_as_code_kubernetes_resource.html">
      
      
        <link rel="prev" href="infrastructure_as_code_kubernetes_architecture_characteristics.html">
      
      
        <link rel="next" href="infrastructure_as_code_kubernetes_resource_definition.html">
      
      
      <link rel="icon" href="../assets/images/logo_v2.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.3.1">
    
    
      
        <title>ã€ITæŠ€è¡“ã®çŸ¥è¦‹ã€‘Kubernetesãƒªã‚½ãƒ¼ã‚¹ï¼ Kubernetes - ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Japanese:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans Japanese";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-HPJGWKTH9W"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-HPJGWKTH9W",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-HPJGWKTH9W",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dark" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kuberneteskubernetes" class="md-skip">
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚¹ã‚­ãƒƒãƒ—
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ãƒ˜ãƒƒãƒ€ãƒ¼">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ" class="md-header__button md-logo" aria-label="ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ã€ITæŠ€è¡“ã®çŸ¥è¦‹ã€‘Kubernetesãƒªã‚½ãƒ¼ã‚¹ï¼ Kubernetes
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æ¤œç´¢" placeholder="æ¤œç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æ¤œç´¢">
        
        <button type="reset" class="md-search__icon md-icon" title="ã‚¯ãƒªã‚¢" aria-label="ã‚¯ãƒªã‚¢" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ¤œç´¢ã‚’åˆæœŸåŒ–
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hiroki-it/" title="ãƒªãƒã‚¸ãƒˆãƒªã¸" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã“ã¡ã‚‰
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="ã‚¿ãƒ–" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
    
  
  å½“ã‚µã‚¤ãƒˆã«ã¤ã„ã¦

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../about.html" class="md-tabs__link">
        
  
    
  
  ã€ä¿ºã€

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../system/index.html" class="md-tabs__link">
          
  
    
  
  ğŸŒ³ ã‚·ã‚¹ãƒ†ãƒ 

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ§¬ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/application/index.html" class="md-tabs__link">
          
  
    
  
  ğŸš€ ã‚¢ãƒ—ãƒª

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/middleware/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ¤ğŸ» ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/basic/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ§ OS

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../language/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ”  è¨€èª

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../testing/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ§ª ãƒ†ã‚¹ãƒˆ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../hardware/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ’» ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../network/index.html" class="md-tabs__link">
          
  
    
  
  ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cloud_computing/index.html" class="md-tabs__link">
          
  
    
  
  â›…ï¸ 3å¤§ã‚¯ãƒ©ã‚¦ãƒ‰

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../virtualization/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ“¦ ä»®æƒ³åŒ–

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="index.html" class="md-tabs__link">
          
  
    
  
  âš™ï¸ IaC

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="kubernetes/index.html" class="md-tabs__link">
          
  
    
  
  â˜¸ï¸ K8s

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="kubernetes_addon/index.html" class="md-tabs__link">
          
  
    
  
  â¬ K8sã‚¢ãƒ‰ã‚ªãƒ³

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="cncf_projects/index.html" class="md-tabs__link">
          
  
    
  
  ğŸŒŠ CNCF

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/index.html" class="md-tabs__link">
          
  
    
  
  â™¾ï¸ DevOps

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/cicd/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ”„ CI/CD

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../observability/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ” å¯è¦³æ¸¬æ€§

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software_development_methodology/index.html" class="md-tabs__link">
          
  
    
  
  ğŸ‘¥ é–‹ç™ºæ‰‹æ³•

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ" class="md-nav__button md-logo" aria-label="ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    ä¿ºã®æŠ€è¡“ãƒãƒ¼ãƒˆ
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hiroki-it/" title="ãƒªãƒã‚¸ãƒˆãƒªã¸" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã“ã¡ã‚‰
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    å½“ã‚µã‚¤ãƒˆã«ã¤ã„ã¦
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../about.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ã€ä¿ºã€
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../system/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸŒ³ ã‚·ã‚¹ãƒ†ãƒ 
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ§¬ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/application/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸš€ ã‚¢ãƒ—ãƒª
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/middleware/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ¤ğŸ» ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/basic/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ§ OS
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../language/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ”  è¨€èª
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../testing/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ§ª ãƒ†ã‚¹ãƒˆ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../hardware/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ’» ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../network/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../security/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../cloud_computing/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â›…ï¸ 3å¤§ã‚¯ãƒ©ã‚¦ãƒ‰
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../virtualization/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ“¦ ä»®æƒ³åŒ–
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    âš™ï¸ IaC
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="kubernetes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    â˜¸ï¸ K8s
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_16">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            â˜¸ï¸ K8s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  Kubernetes
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16_3" checked>
        
          <label class="md-nav__link" for="__nav_16_3" id="__nav_16_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    â–  Kubernetesãƒªã‚½ãƒ¼ã‚¹
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_16_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_16_3">
            <span class="md-nav__icon md-icon"></span>
            â–  Kubernetesãƒªã‚½ãƒ¼ã‚¹
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Kubernetesãƒªã‚½ãƒ¼ã‚¹
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="infrastructure_as_code_kubernetes_resource.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Kubernetesãƒªã‚½ãƒ¼ã‚¹
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="ã“ã®ãƒšãƒ¼ã‚¸ã®å†…å®¹">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ã“ã®ãƒšãƒ¼ã‚¸ã®å†…å®¹
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ã¯ã˜ã‚ã«
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-kubernetes" class="md-nav__link">
    01. Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  </a>
  
    <nav class="md-nav" aria-label="01. Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    Kubernetesãƒªã‚½ãƒ¼ã‚¹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes_1" class="md-nav__link">
    Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ã‚¹ã‚³ãƒ¼ãƒ—
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-workload" class="md-nav__link">
    02. Workloadç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="02. Workloadç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workload" class="md-nav__link">
    Workloadç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset" class="md-nav__link">
    DaemonSet
  </a>
  
    <nav class="md-nav" aria-label="DaemonSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daemonset_1" class="md-nav__link">
    â–¼ DaemonSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod" class="md-nav__link">
    â–¼ Podæ•°ã®å›ºå®š
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    Deployment
  </a>
  
    <nav class="md-nav" aria-label="Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment_1" class="md-nav__link">
    â–¼ Deploymentã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset" class="md-nav__link">
    â–¼ ReplicaSetã®ç½®ãæ›ãˆãŒèµ·ã“ã‚‹æ¡ä»¶
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_1" class="md-nav__link">
    â–¼ Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã®ç¶­æŒ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume" class="md-nav__link">
    â–¼ PersistentVolumeã¨ã®é–¢ä¿‚æ€§
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    Job
  </a>
  
    <nav class="md-nav" aria-label="Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_1" class="md-nav__link">
    â–¼ Jobã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cronjob" class="md-nav__link">
    â–¼ CronJobã®å‹•ä½œç¢ºèª
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    Node
  </a>
  
    <nav class="md-nav" aria-label="Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node_1" class="md-nav__link">
    â–¼ Nodeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_2" class="md-nav__link">
    Pod
  </a>
  
    <nav class="md-nav" aria-label="Pod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod_3" class="md-nav__link">
    â–¼ Podã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodepod" class="md-nav__link">
    â–¼ ä¾‹å¤–çš„ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeä¸Šã®Pod
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_4" class="md-nav__link">
    â–¼ Podã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_5" class="md-nav__link">
    â–¼ Podã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_6" class="md-nav__link">
    â–¼ Podã®æœ€å¾Œã®ãƒ•ã‚§ãƒ¼ã‚ºã®ç†ç”±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crashloopbackoff" class="md-nav__link">
    â–¼ CrashLoopBackOffã®ãƒ‡ãƒãƒƒã‚°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_7" class="md-nav__link">
    â–¼ Podã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹æ–¹æ³•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    â–¼ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã®å‰²ã‚Šå½“ã¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_8" class="md-nav__link">
    â–¼ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒPodå†…ã®ãƒ­ã‚°ã‚’å‚ç…§ã§ãã‚‹ä»•çµ„ã¿
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    â–¼ å¾…ã¡å—ã‘ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã®ç¢ºèª
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset_1" class="md-nav__link">
    ReplicaSet
  </a>
  
    <nav class="md-nav" aria-label="ReplicaSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicaset_2" class="md-nav__link">
    â–¼ ReplicaSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#podtemplate" class="md-nav__link">
    â–¼ PodTemplate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statefulset_1" class="md-nav__link">
    â–¼ StatefulSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="03. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endpointslice" class="md-nav__link">
    EndpointSlice
  </a>
  
    <nav class="md-nav" aria-label="EndpointSlice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#endpointslice_1" class="md-nav__link">
    â–¼ EndpointSliceã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway" class="md-nav__link">
    Gateway
  </a>
  
    <nav class="md-nav" aria-label="Gateway">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gateway_1" class="md-nav__link">
    â–¼ Gatewayã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    â–¼ Ingressã¨ã®é•ã„
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatewayclass" class="md-nav__link">
    GatewayClass
  </a>
  
    <nav class="md-nav" aria-label="GatewayClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gatewayclass_1" class="md-nav__link">
    â–¼ GatewayClassã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_1" class="md-nav__link">
    Ingress
  </a>
  
    <nav class="md-nav" aria-label="Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress_2" class="md-nav__link">
    â–¼ Ingressã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway_2" class="md-nav__link">
    â–¼ Gatewayã¨ã®é•ã„
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    â–¼ ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    â–¼ ãƒ›ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingressclass" class="md-nav__link">
    IngressClass
  </a>
  
    <nav class="md-nav" aria-label="IngressClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingressclass_1" class="md-nav__link">
    â–¼ IngressClassã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_3" class="md-nav__link">
    Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
  </a>
  
    <nav class="md-nav" aria-label="Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress_4" class="md-nav__link">
    â–¼ Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
    <nav class="md-nav" aria-label="Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service_1" class="md-nav__link">
    â–¼ Serviceã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterip-service" class="md-nav__link">
    â–¼ ClusterIP Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport-service" class="md-nav__link">
    â–¼ NodePort Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer-service" class="md-nav__link">
    â–¼ LoadBalancer Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalname-service" class="md-nav__link">
    â–¼ ExternalName Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headless-service" class="md-nav__link">
    â–¼ Headless Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-cluster" class="md-nav__link">
    04. Clusterãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="04. Clusterãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Clusterãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    Namespace
  </a>
  
    <nav class="md-nav" aria-label="Namespace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespace_1" class="md-nav__link">
    â–¼ Namespaceã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace_2" class="md-nav__link">
    â–¼ åˆæœŸNamespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaceterminating" class="md-nav__link">
    â–¼ NamespaceãŒTerminatingã®ã¾ã¾ã«ãªã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05. è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="05. è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    ConfigMap
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    â–¼ ConfigMapã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    Secret
  </a>
  
    <nav class="md-nav" aria-label="Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret_1" class="md-nav__link">
    â–¼ Secretã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    â–¼ ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ—ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    â–¼ ã‚³ãƒ³ãƒ†ãƒŠã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="06. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume_1" class="md-nav__link">
    PersistentVolume
  </a>
  
    <nav class="md-nav" aria-label="PersistentVolume">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolume_2" class="md-nav__link">
    â–¼ PersistentVolumeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume-crashloopbackoff" class="md-nav__link">
    â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã§ãªã„å ´åˆ)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume-crashloopbackoff_1" class="md-nav__link">
    â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã®å ´åˆ)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath" class="md-nav__link">
    â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local" class="md-nav__link">
    â–¼ Local (æœ¬ç•ªç’°å¢ƒã§æ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume_1" class="md-nav__link">
    Volume
  </a>
  
    <nav class="md-nav" aria-label="Volume">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume_2" class="md-nav__link">
    â–¼ Volumeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath_1" class="md-nav__link">
    â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emptydir" class="md-nav__link">
    â–¼ EmptyDir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume_3" class="md-nav__link">
    â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumepersistentvolume" class="md-nav__link">
    â–¼ Volumeã®ä»£ã‚ã‚Šã«PersistentVolumeã‚’ä½¿ç”¨ã™ã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-02" class="md-nav__link">
    06-02. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¦æ±‚ç³»
  </a>
  
    <nav class="md-nav" aria-label="06-02. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¦æ±‚ç³»">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolumeclaim" class="md-nav__link">
    PersistentVolumeClaim
  </a>
  
    <nav class="md-nav" aria-label="PersistentVolumeClaim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolumeclaim_1" class="md-nav__link">
    â–¼ PersistentVolumeClaimã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    â–¼ å‰Šé™¤ã§ããªã„
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-affinity-conflict" class="md-nav__link">
    â–¼ node affinity conflict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    â–¼ ã‚µã‚¤ã‚ºã‚’æ‹¡å¼µã™ã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageclass" class="md-nav__link">
    StorageClass
  </a>
  
    <nav class="md-nav" aria-label="StorageClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storageclass_1" class="md-nav__link">
    â–¼ StorageClassã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-ebs" class="md-nav__link">
    â–¼ AWS EBSã‚’è¦æ±‚ã™ã‚‹å ´åˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07. èªè¨¼ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="07. èªè¨¼ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificatesigningrequest" class="md-nav__link">
    CertificateSigningRequest
  </a>
  
    <nav class="md-nav" aria-label="CertificateSigningRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificatesigningrequest_1" class="md-nav__link">
    â–¼ CertificateSigningRequestã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount" class="md-nav__link">
    ServiceAccount
  </a>
  
    <nav class="md-nav" aria-label="ServiceAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serviceaccount_1" class="md-nav__link">
    â–¼ ServiceAccountã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount_2" class="md-nav__link">
    â–¼ ServiceAccountã®ä»•çµ„ã¿
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount_3" class="md-nav__link">
    â–¼ ServiceAccountã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useraccount" class="md-nav__link">
    UserAccount
  </a>
  
    <nav class="md-nav" aria-label="UserAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useraccount_1" class="md-nav__link">
    â–¼ UserAccountã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08" class="md-nav__link">
    08. èªå¯ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="08. èªå¯ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#roleclusterrole" class="md-nav__link">
    Roleã€ClusterRole
  </a>
  
    <nav class="md-nav" aria-label="Roleã€ClusterRole">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    â–¼ Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterrole" class="md-nav__link">
    â–¼ ClusterRoleã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbacrole-based-access-control" class="md-nav__link">
    â–¼ RBACï¼šRole-based access control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolebinding" class="md-nav__link">
    RoleBinding
  </a>
  
    <nav class="md-nav" aria-label="RoleBinding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterrolebinding" class="md-nav__link">
    â–¼ ClusterRoleBinding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolebinding_1" class="md-nav__link">
    â–¼ RoleBinding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09" class="md-nav__link">
    09. ãƒãƒªã‚·ãƒ¼ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="09. ãƒãƒªã‚·ãƒ¼ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
    NetworkPolicy
  </a>
  
    <nav class="md-nav" aria-label="NetworkPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkpolicy_1" class="md-nav__link">
    â–¼ NetworkPolicyã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_5" class="md-nav__link">
    â–¼ Ingressã®å ´åˆ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#egress" class="md-nav__link">
    â–¼ Egressã®å ´åˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_resource_definition.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  ãƒªã‚½ãƒ¼ã‚¹å®šç¾©
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_custom_resource.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_hardware_resource_management_addon_resizer.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_development_client_package.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  é–‹ç™º
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_kubernetes_manifests_management_helm.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â–  ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆç®¡ç†
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="kubernetes_addon/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â¬ K8sã‚¢ãƒ‰ã‚ªãƒ³
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="cncf_projects/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸŒŠ CNCF
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    â™¾ï¸ DevOps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/cicd/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ”„ CI/CD
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../observability/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ” å¯è¦³æ¸¬æ€§
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software_development_methodology/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ğŸ‘¥ é–‹ç™ºæ‰‹æ³•
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="ã“ã®ãƒšãƒ¼ã‚¸ã®å†…å®¹">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ã“ã®ãƒšãƒ¼ã‚¸ã®å†…å®¹
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ã¯ã˜ã‚ã«
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-kubernetes" class="md-nav__link">
    01. Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  </a>
  
    <nav class="md-nav" aria-label="01. Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    Kubernetesãƒªã‚½ãƒ¼ã‚¹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes_1" class="md-nav__link">
    Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ã‚¹ã‚³ãƒ¼ãƒ—
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-workload" class="md-nav__link">
    02. Workloadç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="02. Workloadç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workload" class="md-nav__link">
    Workloadç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset" class="md-nav__link">
    DaemonSet
  </a>
  
    <nav class="md-nav" aria-label="DaemonSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daemonset_1" class="md-nav__link">
    â–¼ DaemonSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod" class="md-nav__link">
    â–¼ Podæ•°ã®å›ºå®š
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    Deployment
  </a>
  
    <nav class="md-nav" aria-label="Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment_1" class="md-nav__link">
    â–¼ Deploymentã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset" class="md-nav__link">
    â–¼ ReplicaSetã®ç½®ãæ›ãˆãŒèµ·ã“ã‚‹æ¡ä»¶
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_1" class="md-nav__link">
    â–¼ Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã®ç¶­æŒ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume" class="md-nav__link">
    â–¼ PersistentVolumeã¨ã®é–¢ä¿‚æ€§
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    Job
  </a>
  
    <nav class="md-nav" aria-label="Job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_1" class="md-nav__link">
    â–¼ Jobã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cronjob" class="md-nav__link">
    â–¼ CronJobã®å‹•ä½œç¢ºèª
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    Node
  </a>
  
    <nav class="md-nav" aria-label="Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node_1" class="md-nav__link">
    â–¼ Nodeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_2" class="md-nav__link">
    Pod
  </a>
  
    <nav class="md-nav" aria-label="Pod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod_3" class="md-nav__link">
    â–¼ Podã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodepod" class="md-nav__link">
    â–¼ ä¾‹å¤–çš„ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeä¸Šã®Pod
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_4" class="md-nav__link">
    â–¼ Podã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_5" class="md-nav__link">
    â–¼ Podã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_6" class="md-nav__link">
    â–¼ Podã®æœ€å¾Œã®ãƒ•ã‚§ãƒ¼ã‚ºã®ç†ç”±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crashloopbackoff" class="md-nav__link">
    â–¼ CrashLoopBackOffã®ãƒ‡ãƒãƒƒã‚°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_7" class="md-nav__link">
    â–¼ Podã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹æ–¹æ³•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    â–¼ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã®å‰²ã‚Šå½“ã¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod_8" class="md-nav__link">
    â–¼ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒPodå†…ã®ãƒ­ã‚°ã‚’å‚ç…§ã§ãã‚‹ä»•çµ„ã¿
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    â–¼ å¾…ã¡å—ã‘ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã®ç¢ºèª
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset_1" class="md-nav__link">
    ReplicaSet
  </a>
  
    <nav class="md-nav" aria-label="ReplicaSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicaset_2" class="md-nav__link">
    â–¼ ReplicaSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#podtemplate" class="md-nav__link">
    â–¼ PodTemplate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statefulset_1" class="md-nav__link">
    â–¼ StatefulSetã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="03. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endpointslice" class="md-nav__link">
    EndpointSlice
  </a>
  
    <nav class="md-nav" aria-label="EndpointSlice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#endpointslice_1" class="md-nav__link">
    â–¼ EndpointSliceã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway" class="md-nav__link">
    Gateway
  </a>
  
    <nav class="md-nav" aria-label="Gateway">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gateway_1" class="md-nav__link">
    â–¼ Gatewayã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    â–¼ Ingressã¨ã®é•ã„
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatewayclass" class="md-nav__link">
    GatewayClass
  </a>
  
    <nav class="md-nav" aria-label="GatewayClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gatewayclass_1" class="md-nav__link">
    â–¼ GatewayClassã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_1" class="md-nav__link">
    Ingress
  </a>
  
    <nav class="md-nav" aria-label="Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress_2" class="md-nav__link">
    â–¼ Ingressã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway_2" class="md-nav__link">
    â–¼ Gatewayã¨ã®é•ã„
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    â–¼ ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    â–¼ ãƒ›ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingressclass" class="md-nav__link">
    IngressClass
  </a>
  
    <nav class="md-nav" aria-label="IngressClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingressclass_1" class="md-nav__link">
    â–¼ IngressClassã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_3" class="md-nav__link">
    Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
  </a>
  
    <nav class="md-nav" aria-label="Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress_4" class="md-nav__link">
    â–¼ Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
    <nav class="md-nav" aria-label="Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service_1" class="md-nav__link">
    â–¼ Serviceã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterip-service" class="md-nav__link">
    â–¼ ClusterIP Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport-service" class="md-nav__link">
    â–¼ NodePort Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer-service" class="md-nav__link">
    â–¼ LoadBalancer Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalname-service" class="md-nav__link">
    â–¼ ExternalName Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headless-service" class="md-nav__link">
    â–¼ Headless Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-cluster" class="md-nav__link">
    04. Clusterãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="04. Clusterãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster" class="md-nav__link">
    Clusterãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    Namespace
  </a>
  
    <nav class="md-nav" aria-label="Namespace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespace_1" class="md-nav__link">
    â–¼ Namespaceã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace_2" class="md-nav__link">
    â–¼ åˆæœŸNamespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaceterminating" class="md-nav__link">
    â–¼ NamespaceãŒTerminatingã®ã¾ã¾ã«ãªã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05. è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="05. è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    ConfigMap
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    â–¼ ConfigMapã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    Secret
  </a>
  
    <nav class="md-nav" aria-label="Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret_1" class="md-nav__link">
    â–¼ Secretã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    â–¼ ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ—ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    â–¼ ã‚³ãƒ³ãƒ†ãƒŠã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="06. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume_1" class="md-nav__link">
    PersistentVolume
  </a>
  
    <nav class="md-nav" aria-label="PersistentVolume">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolume_2" class="md-nav__link">
    â–¼ PersistentVolumeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume-crashloopbackoff" class="md-nav__link">
    â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã§ãªã„å ´åˆ)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistentvolume-crashloopbackoff_1" class="md-nav__link">
    â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã®å ´åˆ)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath" class="md-nav__link">
    â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local" class="md-nav__link">
    â–¼ Local (æœ¬ç•ªç’°å¢ƒã§æ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume_1" class="md-nav__link">
    Volume
  </a>
  
    <nav class="md-nav" aria-label="Volume">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volume_2" class="md-nav__link">
    â–¼ Volumeã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath_1" class="md-nav__link">
    â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emptydir" class="md-nav__link">
    â–¼ EmptyDir
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume_3" class="md-nav__link">
    â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumepersistentvolume" class="md-nav__link">
    â–¼ Volumeã®ä»£ã‚ã‚Šã«PersistentVolumeã‚’ä½¿ç”¨ã™ã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-02" class="md-nav__link">
    06-02. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¦æ±‚ç³»
  </a>
  
    <nav class="md-nav" aria-label="06-02. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¦æ±‚ç³»">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolumeclaim" class="md-nav__link">
    PersistentVolumeClaim
  </a>
  
    <nav class="md-nav" aria-label="PersistentVolumeClaim">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistentvolumeclaim_1" class="md-nav__link">
    â–¼ PersistentVolumeClaimã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    â–¼ å‰Šé™¤ã§ããªã„
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-affinity-conflict" class="md-nav__link">
    â–¼ node affinity conflict
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    â–¼ ã‚µã‚¤ã‚ºã‚’æ‹¡å¼µã™ã‚‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storageclass" class="md-nav__link">
    StorageClass
  </a>
  
    <nav class="md-nav" aria-label="StorageClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#storageclass_1" class="md-nav__link">
    â–¼ StorageClassã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-ebs" class="md-nav__link">
    â–¼ AWS EBSã‚’è¦æ±‚ã™ã‚‹å ´åˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07. èªè¨¼ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="07. èªè¨¼ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificatesigningrequest" class="md-nav__link">
    CertificateSigningRequest
  </a>
  
    <nav class="md-nav" aria-label="CertificateSigningRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificatesigningrequest_1" class="md-nav__link">
    â–¼ CertificateSigningRequestã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount" class="md-nav__link">
    ServiceAccount
  </a>
  
    <nav class="md-nav" aria-label="ServiceAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serviceaccount_1" class="md-nav__link">
    â–¼ ServiceAccountã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount_2" class="md-nav__link">
    â–¼ ServiceAccountã®ä»•çµ„ã¿
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serviceaccount_3" class="md-nav__link">
    â–¼ ServiceAccountã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useraccount" class="md-nav__link">
    UserAccount
  </a>
  
    <nav class="md-nav" aria-label="UserAccount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useraccount_1" class="md-nav__link">
    â–¼ UserAccountã¨ã¯
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08" class="md-nav__link">
    08. èªå¯ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="08. èªå¯ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#roleclusterrole" class="md-nav__link">
    Roleã€ClusterRole
  </a>
  
    <nav class="md-nav" aria-label="Roleã€ClusterRole">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    â–¼ Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterrole" class="md-nav__link">
    â–¼ ClusterRoleã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbacrole-based-access-control" class="md-nav__link">
    â–¼ RBACï¼šRole-based access control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolebinding" class="md-nav__link">
    RoleBinding
  </a>
  
    <nav class="md-nav" aria-label="RoleBinding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterrolebinding" class="md-nav__link">
    â–¼ ClusterRoleBinding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolebinding_1" class="md-nav__link">
    â–¼ RoleBinding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09" class="md-nav__link">
    09. ãƒãƒªã‚·ãƒ¼ç³»ãƒªã‚½ãƒ¼ã‚¹
  </a>
  
    <nav class="md-nav" aria-label="09. ãƒãƒªã‚·ãƒ¼ç³»ãƒªã‚½ãƒ¼ã‚¹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
    NetworkPolicy
  </a>
  
    <nav class="md-nav" aria-label="NetworkPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkpolicy_1" class="md-nav__link">
    â–¼ NetworkPolicyã¨ã¯
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_5" class="md-nav__link">
    â–¼ Ingressã®å ´åˆ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#egress" class="md-nav__link">
    â–¼ Egressã®å ´åˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="kuberneteskubernetes">Kubernetesãƒªã‚½ãƒ¼ã‚¹ï¼ Kubernetes<a class="headerlink" href="#kuberneteskubernetes" title="Permanent link">&para;</a></h1>
<h2 id="_1">ã¯ã˜ã‚ã«<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>æœ¬ã‚µã‚¤ãƒˆã«ã¤ãã¾ã—ã¦ã€ä»¥ä¸‹ã‚’ã”èªè­˜ã®ã»ã©å®œã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/">https://hiroki-it.github.io/tech-notebook/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="01-kubernetes">01. Kubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<a class="headerlink" href="#01-kubernetes" title="Permanent link">&para;</a></h2>
<h3 id="kubernetes">Kubernetesãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#kubernetes" title="Permanent link">&para;</a></h3>
<p>Kubernetesä¸Šã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¨¼åƒã•ã›ã‚‹æ¦‚å¿µã®ã“ã¨ã€‚</p>
<p><br></p>
<h3 id="kubernetes_1">Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<a class="headerlink" href="#kubernetes_1" title="Permanent link">&para;</a></h3>
<p>ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«ã‚ˆã£ã¦é‡ç”£ã•ã‚ŒãŸKubernetesãƒªã‚½ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã“ã¨ã€‚</p>
<blockquote>
<ul>
<li><a href="https://qiita.com/cvusk/items/773e222e0971a5391a51">https://qiita.com/cvusk/items/773e222e0971a5391a51</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="_2">ã‚¹ã‚³ãƒ¼ãƒ—<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>æ‰€å±ã™ã‚‹Namespaceå†…ã®ã¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã¨ã€Clusterå…¨ä½“ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‚‹ã€‚</p>
<p><img alt="namespaced-scope_vs_cluster-scoped.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/namespaced-scope_vs_cluster-scoped.png" /></p>
<blockquote>
<ul>
<li><a href="https://wangwei1237.github.io/Kubernetes-in-Action-Second-Edition/docs/Organizing_objects_into_Namespaces.html">https://wangwei1237.github.io/Kubernetes-in-Action-Second-Edition/docs/Organizing_objects_into_Namespaces.html</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="02-workload">02. Workloadç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#02-workload" title="Permanent link">&para;</a></h2>
<h3 id="workload">Workloadç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯<a class="headerlink" href="#workload" title="Permanent link">&para;</a></h3>
<p>ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œã«é–¢ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13542">https://thinkit.co.jp/article/13542</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="daemonset">DaemonSet<a class="headerlink" href="#daemonset" title="Permanent link">&para;</a></h3>
<h4 id="daemonset_1">â–¼ DaemonSetã¨ã¯<a class="headerlink" href="#daemonset_1" title="Permanent link">&para;</a></h4>
<p>Nodeä¸Šã®Podã®å€‹æ•°ã‚’ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>Podã®è² è·ã«åˆã‚ã›ã¦Podã®è‡ªå‹•æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ãªã„ (HorizontalPodAutoscalerãŒå¿…è¦ã§ã‚ã‚‹) ã€‚</p>
<p>ãŸã ã—ReplicaSetã¨ã¯ç•°ãªã‚Šã€Nodeå†…ã§Podã‚’1ã¤ã ã‘ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>Nodeã§1ã¤ã ã‘ç¨¼åƒã•ã›ã‚‹å¿…è¦ã®ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ (ä¾‹ï¼škube-proxyã€CNIã€FluentBitã€datadogã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€cAdvisorã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€Prometheusã®ä¸€éƒ¨ã®Exporterã€ãªã©) ã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚</p>
<p>ã“ã†ã„ã£ãŸãƒ—ãƒ­ã‚»ã‚¹ãŒç¨¼åƒã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¯ã€Nodeå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã€å¯è¦³æ¸¬æ€§ã®ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ•´å‚™ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13611">https://thinkit.co.jp/article/13611</a></li>
<li><a href="https://github.com/kubernetes/kops/issues/6527#issue-413870064">https://github.com/kubernetes/kops/issues/6527#issue-413870064</a></li>
</ul>
</blockquote>
<h4 id="pod">â–¼ Podæ•°ã®å›ºå®š<a class="headerlink" href="#pod" title="Permanent link">&para;</a></h4>
<p>DaemonSetã¯ã€Nodeå†…ã§Podã‚’1ã¤ã ã‘ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€ä¾‹ãˆã°Clusterãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã«è¤‡æ•°ã®NodeãŒå­˜åœ¨ã—ã¦ã„ã¦ã€ã„ãšã‚Œã‹ã®NodeãŒåœæ­¢ã—ãŸã¨ã—ã¦ã‚‚ã€ç¨¼åƒä¸­ã®Nodeå†…ã®Podã‚’å¢—ã‚„ã™ã“ã¨ã¯ãªã„ã€‚</p>
<p><br></p>
<h3 id="deployment">Deployment<a class="headerlink" href="#deployment" title="Permanent link">&para;</a></h3>
<h4 id="deployment_1">â–¼ Deploymentã¨ã¯<a class="headerlink" href="#deployment_1" title="Permanent link">&para;</a></h4>
<p>ReplicaSetã‚’æ“ä½œã—ã€Clusterãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>Podã®è² è·ã«åˆã‚ã›ã¦Podã®è‡ªå‹•æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ãªã„ (HorizontalPodAutoscalerãŒå¿…è¦ã§ã‚ã‚‹) ã€‚</p>
<p>ãŸã ã—StatefulSetã¨ã¯ç•°ãªã‚Šã€ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ¬ã‚¹ (ä¾‹ï¼šã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠ) ãªã‚³ãƒ³ãƒ†ãƒŠã‚’å«ã‚€Podã‚’å†—é•·åŒ–ã™ã‚‹ã“ã¨ã«é©ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">https://kubernetes.io/docs/concepts/workloads/controllers/deployment/</a></li>
<li><a href="https://sorarinu.dev/2021/08/kubernetes_01/">https://sorarinu.dev/2021/08/kubernetes_01/</a></li>
</ul>
</blockquote>
<h4 id="replicaset">â–¼ ReplicaSetã®ç½®ãæ›ãˆãŒèµ·ã“ã‚‹æ¡ä»¶<a class="headerlink" href="#replicaset" title="Permanent link">&para;</a></h4>
<p>Deploymentã§ã¯ã€ä»¥ä¸‹ã®è¨­å®šå€¤ã®å¤‰æ›´ã§ã€ReplicaSetã®ç½®ãæ›ãˆãŒèµ·ã“ã‚‹ã€‚</p>
<table>
<thead>
<tr>
<th>æ¡ä»¶</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.spec.replicas</code>ã‚­ãƒ¼ã®å¤‰æ›´</td>
<td>ãƒ¬ãƒ—ãƒªã‚«æ•° (<code>.spec.replicas</code>ã‚­ãƒ¼) ã®å¤‰æ›´ã®å ´åˆã¯ã€Deploymentã¯æ—¢å­˜ã®ReplicaSetã‚’ãã®ã¾ã¾ã«ã—ã€Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã®ã¿ã‚’å¤‰æ›´ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td><code>.spec.template</code>ã‚­ãƒ¼é…ä¸‹ã®ä»»æ„ã®å¤‰æ›´</td>
<td>PodTemplate (<code>.spec.template</code>ã‚­ãƒ¼) ã‚’å¤‰æ›´ã—ãŸå ´åˆã€Deploymentã¯æ–°ã—ã„ReplicaSetã‚’ä½œæˆã—ã€ã“ã‚Œã‚’å¤ã„ReplicaSetã¨ç½®ãæ›ãˆã‚‹ã€‚</td>
</tr>
</tbody>
</table>
<p><img alt="kubernetes_deployment_replace_replicaset" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_deployment_replace_replicaset.png" /></p>
<blockquote>
<ul>
<li><a href="https://qiita.com/tkusumi/items/01cd18c59b742eebdc6a">https://qiita.com/tkusumi/items/01cd18c59b742eebdc6a</a></li>
</ul>
</blockquote>
<h4 id="pod_1">â–¼ Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã®ç¶­æŒ<a class="headerlink" href="#pod_1" title="Permanent link">&para;</a></h4>
<p>Deploymentã¯ã€Clusterå†…ã®Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’æŒ‡å®šã•ã‚ŒãŸæ•°ã ã‘ç¶­æŒã™ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€ä¾‹ãˆã°Clusterå†…ã«è¤‡æ•°ã®NodeãŒå­˜åœ¨ã—ã¦ã„ã¦ã€ã„ãšã‚Œã‹ã®NodeãŒåœæ­¢ã—ãŸå ´åˆã€ç¨¼åƒä¸­ã®Nodeå†…ã§ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’ç¶­æŒã™ã‚‹ã‚ˆã†ã«Podæ•°ã‚’å¢—ã‚„ã™ã€‚</p>
<blockquote>
<ul>
<li><a href="https://dr-asa.hatenablog.com/entry/2018/04/02/174006">https://dr-asa.hatenablog.com/entry/2018/04/02/174006</a></li>
</ul>
</blockquote>
<h4 id="persistentvolume">â–¼ PersistentVolumeã¨ã®é–¢ä¿‚æ€§<a class="headerlink" href="#persistentvolume" title="Permanent link">&para;</a></h4>
<p>Deploymentã®ãƒ¬ãƒ—ãƒªã‚«ã®Podã¯ã€å…¨ã¦ãŒåŒã˜PersistentVolumeã‚’å…±æœ‰ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://www.amazon.com/dp/1617297615">https://www.amazon.com/dp/1617297615</a></li>
</ul>
</blockquote>
<p><img alt="kubernetes_deployment_persistent-volume" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_deployment_persistent-volume.png" /></p>
<p><br></p>
<h3 id="job">Job<a class="headerlink" href="#job" title="Permanent link">&para;</a></h3>
<h4 id="job_1">â–¼ Jobã¨ã¯<a class="headerlink" href="#job_1" title="Permanent link">&para;</a></h4>
<p>è¤‡æ•°ã®Podã‚’ä½œæˆ (SuccessfulCreate) ã—ã€æŒ‡å®šã•ã‚ŒãŸæ•°ã®Podã‚’æ­£å¸¸ã«å‰Šé™¤ (SuccessfulDelete) ã•ã›ã‚‹ã€‚</p>
<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ­ã‚°ã®ç¢ºèªã®ãŸã‚ã«Podã¯å‰Šé™¤ã•ã‚Œãšã€JobãŒå‰Šé™¤ã•ã‚Œã¦åˆã‚ã¦Podã‚‚å‰Šé™¤ã•ã‚Œã‚‹ã€‚</p>
<p><code>.spec.ttlSecondsAfterFinished</code>ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Podã®ã¿ã‚’è‡ªå‹•å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p>
<p>å®šæœŸçš„ã«å®Ÿè¡Œã™ã‚‹å ´åˆã€CronJobã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦å®šç¾©ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/">https://kubernetes.io/docs/concepts/workloads/controllers/job/</a></li>
<li><a href="https://qiita.com/MahoTakara/items/82853097a1911671a704">https://qiita.com/MahoTakara/items/82853097a1911671a704</a></li>
<li><a href="https://dev.appswingby.com/kubernetes/kubernetes-%E3%81%A7-job%E3%82%92%E8%87%AA%E5%8B%95%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8Bttlsecondsafterfinished%E3%81%8Cv1-21%E3%81%A7beta%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%84%E3%81%9F%E4%BB%B6/">https://dev.appswingby.com/kubernetes/kubernetes-%E3%81%A7-job%E3%82%92%E8%87%AA%E5%8B%95%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8Bttlsecondsafterfinished%E3%81%8Cv1-21%E3%81%A7beta%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%84%E3%81%9F%E4%BB%B6/</a></li>
</ul>
</blockquote>
<h4 id="cronjob">â–¼ CronJobã®å‹•ä½œç¢ºèª<a class="headerlink" href="#cronjob" title="Permanent link">&para;</a></h4>
<p>CronJobé…ä¸‹ã®Jobã¯ã€æ±ºã¾ã£ãŸæ™‚é–“ã«ãªã‚‰ãªã„ã¨å®Ÿè¡Œã•ã‚Œãªã„ã€‚</p>
<p>ä»»æ„ã®æ™‚é–“ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã¯ã€CronJobã‚’æŒ‡å®šã—ã€ã“ã‚Œã®é…ä¸‹ã§ä¸€æ™‚çš„ã«Jobã‚’ä½œæˆã™ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>job<span class="w"> </span>test-job<span class="w"> </span>--from<span class="o">=</span>cronjob/foo-cron-job<span class="w"> </span>-n<span class="w"> </span>foo
</code></pre></div>
<p>ãŸã ã—ã€å‹•ä½œç¢ºèªå¾Œã¯CronJobã«Jobã‚’ä½œã‚‰ã›ãŸã„ã®ã§ã€ãã®Jobã¯å‰Šé™¤ã™ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>delete<span class="w"> </span>job<span class="w"> </span>test-job<span class="w"> </span>-n<span class="w"> </span>foo
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/kennygt51/articles/2497931b8264de">https://zenn.dev/kennygt51/articles/2497931b8264de</a></li>
<li><a href="https://qiita.com/koudaiii/items/586a8a0e0f763ddf9a05">https://qiita.com/koudaiii/items/586a8a0e0f763ddf9a05</a></li>
<li><a href="https://serverfault.com/questions/809632/is-it-possible-to-rerun-kubernetes-job">https://serverfault.com/questions/809632/is-it-possible-to-rerun-kubernetes-job</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="node">Node<a class="headerlink" href="#node" title="Permanent link">&para;</a></h3>
<h4 id="node_1">â–¼ Nodeã¨ã¯<a class="headerlink" href="#node_1" title="Permanent link">&para;</a></h4>
<p>Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’é…ç½®ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ã“ã¨ã€‚</p>
<h4 id="_3">â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>ãƒ•ã‚§ãƒ¼ã‚ºå</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ready</td>
<td>NodeãŒPodã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°å¯èƒ½ãªçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ã€‚</td>
</tr>
<tr>
<td>NotReady</td>
<td>NodeãŒPodã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ä¸å¯èƒ½ãªçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™ã€‚</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="pod_2">Pod<a class="headerlink" href="#pod_2" title="Permanent link">&para;</a></h3>
<h4 id="pod_3">â–¼ Podã¨ã¯<a class="headerlink" href="#pod_3" title="Permanent link">&para;</a></h4>
<p>ã‚³ãƒ³ãƒ†ãƒŠã®æœ€å°ã‚°ãƒ«ãƒ¼ãƒ—å˜ä½ã®ã“ã¨ã€‚</p>
<p>Podã‚’å˜ä½ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•/åœæ­¢ã‚„æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ/ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/pods/">https://kubernetes.io/docs/concepts/workloads/pods/</a></li>
</ul>
</blockquote>
<p><strong>ï¼Šä¾‹ï¼Š</strong></p>
<p>PHP-FPMã‚³ãƒ³ãƒ†ãƒŠã¨Nginxã‚³ãƒ³ãƒ†ãƒŠã‚’ç¨¼åƒã•ã›ã‚‹å ´åˆã€ã“ã‚Œã‚‰åŒã˜Podå†…ã«é…ç½®ã™ã‚‹ã€‚</p>
<p><img alt="kubernetes_pod_php-fpm_nginx" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_pod_php-fpm_nginx.png" /></p>
<h4 id="nodepod">â–¼ ä¾‹å¤–çš„ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeä¸Šã®Pod<a class="headerlink" href="#nodepod" title="Permanent link">&para;</a></h4>
<p>è„†å¼±æ€§ã®è¦³ç‚¹ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã«Podã¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œãªã„ã€‚</p>
<p>ã“ã‚Œã¯ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã«ã¯Taint (<code>node-role.kubernetes.io/master:NoSchedule</code>) ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚</p>
<p>ä¸€æ–¹ã§ã€Nodeã«ã¯ã“ã‚ŒãŒãªã„ãŸã‚ã€Podã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã§ãã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã®å ´åˆ</span>
$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>node<span class="w"> </span>&lt;ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeå&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>taint

Taints:<span class="w"> </span>node-role.kubernetes.io/master:NoSchedule<span class="w"> </span><span class="c1"># ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã›ãªã„Taint</span>

<span class="c1"># ãƒ¯ãƒ¼ã‚«ãƒ¼Nodeã®å ´åˆ</span>
$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>node<span class="w"> </span>&lt;ãƒ¯ãƒ¼ã‚«ãƒ¼Nodeå&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>taint

Taints:<span class="w"> </span>&lt;none&gt;
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/43147941/allow-scheduling-of-pods-on-kubernetes-master">https://stackoverflow.com/questions/43147941/allow-scheduling-of-pods-on-kubernetes-master</a></li>
</ul>
</blockquote>
<p>ãŸã ã—ã€ã‚»ãƒ«ãƒ•ãƒãƒãƒ¼ã‚¸ãƒ‰ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã‚’æ¡ç”¨ã—ã¦ã„ã‚‹å ´åˆã«ã€å…¨ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã§Taintã‚’è§£é™¤ã™ã‚Œã°ã€Podã‚’èµ·å‹•ã•ã›ã‚‰ã‚Œã‚‹ã€‚</p>
<p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³NodeãŒãƒãƒãƒ¼ã‚¸ãƒ‰ã§ã¯ãªã„ç’°å¢ƒ (ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ç’°å¢ƒã€ãƒ™ã‚¢ãƒ¡ã‚¿ãƒ«ç’°å¢ƒã€ãªã©) ã§ã¯ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ¼ãƒ³Nodeã«DaemonSetã«ã‚ˆã‚‹Podã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>taint<span class="w"> </span>node<span class="w"> </span>--all<span class="w"> </span>node-role.kubernetes.io/master:NoSchedule-
</code></pre></div>
<h4 id="pod_4">â–¼ Podã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º<a class="headerlink" href="#pod_4" title="Permanent link">&para;</a></h4>
<p>Podã¯ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®<code>.status.phase</code>ã‚­ãƒ¼ã«ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’æŒã¤ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="nt">status</span><span class="p">:</span>
<span class="w">  </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Running</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>ãƒ•ã‚§ãƒ¼ã‚ºå</th>
<th>èª¬æ˜</th>
<th>è£œè¶³</th>
</tr>
</thead>
<tbody>
<tr>
<td>Completed</td>
<td>Podå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠãŒæ­£å¸¸ã«çµ‚äº†ã—ãŸã€‚</td>
<td>Jobé…ä¸‹ã®Podã§ã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ãƒ•ã‚§ãƒ¼ã‚ºã§ã‚ã‚‹ã€‚</td>
</tr>
<tr>
<td>ContainerCreating</td>
<td>Podå†…ã«InitContainerãŒãªã„å ´åˆã®ç†ç”±ã§ã‚ã‚‹ã€‚ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚</td>
<td></td>
</tr>
<tr>
<td>CrashLoopBackOff</td>
<td>PodãŒã€ä¸€é€£ã®ãƒ•ã‚§ãƒ¼ã‚º (<code>Running</code>ãƒ•ã‚§ãƒ¼ã‚ºã€<code>Waiting</code>ãƒ•ã‚§ãƒ¼ã‚ºã€<code>Failed</code>ãƒ•ã‚§ãƒ¼ã‚º) ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã€‚</td>
<td></td>
</tr>
<tr>
<td>CreateContainerError</td>
<td>Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã®ä½œæˆã«å¤±æ•—ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>ErrImagePull</td>
<td>Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ—ãƒ«ã«å¤±æ•—ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>Error</td>
<td>Podå†…ã®ã„ãšã‚Œã‹ã®ã‚³ãƒ³ãƒ†ãƒŠãŒç•°å¸¸ã«çµ‚äº†ã—ãŸã€‚</td>
<td>Jobé…ä¸‹ã®Podã®å ´åˆã¯Errorã«ãªã£ã¦ã‚‚ã€æ¬¡ã®PodãŒä½œæˆã•ã‚Œã‚‹ã€‚Jobã®<code>.spec.ttlSecondsAfterFinished</code>ã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ã„ãªã‘ã‚Œã°ã€Errorã®PodãŒã—ã°ã‚‰ãæ®‹ã‚Šç¶šã‘ã‚‹ãŒã€ã‚‚ã—æ–°ã—ã„PodãŒCompletedã«ãªã‚Œã°å•é¡Œãªã„ã€‚</td>
</tr>
<tr>
<td>Failed</td>
<td>Podå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã—ã€ãã®å¾Œã«ç•°å¸¸ã«åœæ­¢ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>ImagePullBackOff</td>
<td>Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ—ãƒ«ã«å¤±æ•—ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>OOMKilled</td>
<td>Podã®ãƒ¡ãƒ¢ãƒªã®ç©ºãã‚µã‚¤ã‚ºãŒè¶³ã‚‰ãšã€ã‚³ãƒ³ãƒ†ãƒŠãŒå¼·åˆ¶çš„ã«çµ‚äº†ã•ã‚ŒãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>Pending</td>
<td>PodãŒNodeã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã‚ŒãŸãŒã€Podå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒã¾ã å®Œäº†ã—ã¦ã„ãªã„ã€‚</td>
<td></td>
</tr>
<tr>
<td>PodInitializing</td>
<td>Podå†…ã«InitContainerãŒã‚ã‚‹å ´åˆã®ç†ç”±ã§ã‚ã‚‹ã€‚ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚</td>
<td></td>
</tr>
<tr>
<td>PostStartHookError</td>
<td>Podã®PostStartãƒ•ãƒƒã‚¯ã«å¤±æ•—ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>Running</td>
<td>Podå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã—ã€å®Ÿè¡Œä¸­ã§ã‚ã‚‹ã€‚</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã™ã‚Œã°<code>Running</code>ãƒ•ã‚§ãƒ¼ã‚ºã«ãªã‚‹ãŒã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (ä¾‹ï¼šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼æ©Ÿèƒ½) ã®å ´åˆã¯ã€<code>Running</code>ãƒ•ã‚§ãƒ¼ã‚ºã§ã‚ã£ã¦ã‚‚<code>Ready</code>ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ã¯ãªã„ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>Succeed</td>
<td>Podå†…ã®å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã—ã€ãã®å¾Œã«æ­£å¸¸ã«åœæ­¢ã—ãŸã€‚</td>
<td></td>
</tr>
<tr>
<td>Unknown</td>
<td>Nodeã¨Podã®é–“ã®é€šä¿¡ã«ç•°å¸¸ãŒã‚ã‚Šã€NodeãŒPodã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã§ããªã‹ã£ãŸã€‚</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase">https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-phase</a></li>
<li><a href="https://qiita.com/tkusumi/items/825ccde31fdc3d0b8425#%E4%BB%A3%E8%A1%A8%E7%9A%84%E3%81%AA-pod-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E8%A1%A8%E8%A8%98">https://qiita.com/tkusumi/items/825ccde31fdc3d0b8425#%E4%BB%A3%E8%A1%A8%E7%9A%84%E3%81%AA-pod-%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E8%A1%A8%E8%A8%98</a></li>
</ul>
</blockquote>
<h4 id="pod_5">â–¼ Podã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³<a class="headerlink" href="#pod_5" title="Permanent link">&para;</a></h4>
<p>Podã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ•ã‚§ãƒ¼ã‚ºã¯ã€<code>.status.conditions</code>ã‚­ãƒ¼ã«ãƒ•ã‚§ãƒ¼ã‚ºã®è©³ç´°ã‚’æŒã¤ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="nt">status</span><span class="p">:</span>
<span class="w">  </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Running</span>
<span class="w">  </span><span class="nt">conditions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lastProbeTime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-12-01T18:00:06Z&quot;</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Initialized</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lastProbeTime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-12-01T18:00:49Z&quot;</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ready</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lastProbeTime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-12-01T18:00:49Z&quot;</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ContainersReady</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">lastProbeTime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">      </span><span class="nt">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2022-12-01T18:00:02Z&quot;</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PodScheduled</span>
</code></pre></div>
<p>ä¾‹ãˆã°<code>Running</code>ãƒ•ã‚§ãƒ¼ã‚ºã§ã‚ã£ã¦ã‚‚ã€<code>Ready</code>ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã«ãªã£ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€PodãŒæ­£å¸¸ã§ã‚ã‚‹ã¨è¦‹ãªã™ãŸã‚ã«ã¯ã€ã€<code>Running</code>ãƒ•ã‚§ãƒ¼ã‚ºã€ã‹ã¤ã€<code>Ready</code>ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã€ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<table>
<thead>
<tr>
<th>å„ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>PodScheduled</td>
<td>Nodeã¸ã®Podã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãŒå®Œäº†ã—ãŸã€‚</td>
</tr>
<tr>
<td>ContainersReady</td>
<td>å…¨ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã—ã€åŠ ãˆã¦ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®æº–å‚™ãŒå®Œäº†ã—ã¦ã„ã‚‹ã€‚</td>
</tr>
<tr>
<td>Initialized</td>
<td>å…¨ã¦ã®<code>init</code>ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãŒå®Œäº†ã—ãŸã€‚</td>
</tr>
<tr>
<td>Ready</td>
<td>Podå…¨ä½“ã®æº–å‚™ãŒå®Œäº†ã—ãŸã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/a/59354112">https://stackoverflow.com/a/59354112</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-conditions">https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-conditions</a></li>
</ul>
</blockquote>
<h4 id="pod_6">â–¼ Podã®æœ€å¾Œã®ãƒ•ã‚§ãƒ¼ã‚ºã®ç†ç”±<a class="headerlink" href="#pod_6" title="Permanent link">&para;</a></h4>
<p>Podã¯ã€<code>.status.reason</code>ã‚­ãƒ¼ã«ã€æœ€å¾Œã®ãƒ•ã‚§ãƒ¼ã‚ºã®ç†ç”±ã‚’å€¤ã¨ã—ã¦æŒã¤ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="nt">status</span><span class="p">:</span>
<span class="w">  </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Failed</span>
<span class="w">  </span><span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Evicted</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>ç†ç”±</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Completed</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒæ­£å¸¸ã«çµ‚äº†ã—ãŸã€‚InitContainerã®å®Ÿè¡Œå¾Œã«è¦‹ã‚‰ã‚Œã‚‹ã€‚</td>
</tr>
<tr>
<td>Evicted</td>
<td>Nodeã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³ã®ãŸã‚ã€PodãŒé€€é¿å¯¾è±¡ã¨ãªã£ãŸã€‚<code>Evicted</code>ãŒç†ç”±ã®å ´åˆã€<code>Failed</code>ãƒ•ã‚§ãƒ¼ã‚ºãŒæœ€å¾Œã¨ãªã‚‹ã€‚</td>
</tr>
<tr>
<td>Unknown</td>
<td>åŸå› ãŒä¸æ˜ã§ã‚ã‚‹ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://access.redhat.com/documentation/ja-jp/openshift_container_platform/3.11/html/developer_guide/diagnosing-evicted-pod">https://access.redhat.com/documentation/ja-jp/openshift_container_platform/3.11/html/developer_guide/diagnosing-evicted-pod</a></li>
</ul>
</blockquote>
<h4 id="crashloopbackoff">â–¼ CrashLoopBackOffã®ãƒ‡ãƒãƒƒã‚°<a class="headerlink" href="#crashloopbackoff" title="Permanent link">&para;</a></h4>
<p>PodãŒCrashLoopBackOffã«ãªã£ã¦ã„ã‚‹å ´åˆã€ä»¥ä¸‹ã‚’ç¢ºèªã™ã‚‹ã¨è‰¯ã„ã€‚</p>
<ul>
<li><code>kubectl logs</code>ã‚³ãƒãƒ³ãƒ‰ã§ã€è©²å½“ã®ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹ã€‚</li>
<li><code>kubectl describe nodes</code>ã‚³ãƒãƒ³ãƒ‰ã§ã€PodãŒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹Nodeã‚’æŒ‡å®šã—ã€è©²å½“ã®PodãŒCPUã¨ãƒ¡ãƒ¢ãƒªã®è¦æ±‚é‡ã«ç•°å¸¸ãŒãªã„ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚</li>
<li><code>kubectl describe pods</code>ã‚³ãƒãƒ³ãƒ‰ã§ã€è©²å½“ã®PodãŒCrashLoopBackOffã«ãªã‚‹åŸå› ã‚’ç¢ºèªã™ã‚‹ã€‚Containersã®LastStateã®é …ç›®ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã§ãã‚‹ã€‚ã“ã‚Œã¯ã€<code>kubectl logs</code>ã‚³ãƒãƒ³ãƒ‰ã¨åŒã˜å†…å®¹ã§ã‚ã‚‹ã€‚</li>
</ul>
<blockquote>
<ul>
<li><a href="https://sysdig.jp/blog/debug-kubernetes-crashloopbackoff/">https://sysdig.jp/blog/debug-kubernetes-crashloopbackoff/</a></li>
<li><a href="https://newrelic.com/jp/blog/how-to-relic/monitoring-kubernetes-part-three">https://newrelic.com/jp/blog/how-to-relic/monitoring-kubernetes-part-three</a></li>
</ul>
</blockquote>
<h4 id="pod_7">â–¼ Podã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹æ–¹æ³•<a class="headerlink" href="#pod_7" title="Permanent link">&para;</a></h4>
<p>Podã®å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹ãŒå§‹ã¾ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚‚é–‹å§‹ã™ã‚‹ã€‚</p>
<ul>
<li>DeploymentãŒPodã‚’åˆ‡ã‚Šé›¢ã™ã€‚</li>
<li>Serviceã¨kube-proxyãŒPodã®å®›å…ˆæƒ…å ±ã‚’å‰Šé™¤ã™ã‚‹ã€‚</li>
<li>ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ã™ã‚‹ã€‚</li>
</ul>
<p>ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ã¦å®Ÿæ–½ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯åˆ¶å¾¡ã§ããªã„ã€‚</p>
<p>ã“ã®æ™‚ã€ã‚³ãƒ³ãƒ†ãƒŠãŒæ­£å¸¸ã«çµ‚äº†ã™ã‚‹å‰ã«Podã‚’å‰Šé™¤ã—ã¦ã—ã¾ã†ã¨ã€ã‚³ãƒ³ãƒ†ãƒŠã§ã¯å¼·åˆ¶çš„ã«çµ‚äº†ã¨ã—ã¦æ‰±ã‚ã‚Œã¦ã—ã¾ã„ã€ãƒ­ã‚°ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚Œã¦ã—ã¾ã†ã€‚</p>
<p>ã¾ãŸã€Serviceã¨kube-proxyãŒPodã®å®›å…ˆæƒ…å ±ã‚’å‰Šé™¤ã™ã‚‹å‰ã«ã€PodãŒå‰Šé™¤ã•ã‚Œã¦ã—ã¾ã†ã¨ã€Serviceã‹ã‚‰Podã¸ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’é€”ä¸­ã§åˆ‡æ–­ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã—ã¾ã†ã€‚</p>
<p>ãã®ãŸã‚ã€ã‚³ãƒ³ãƒ†ãƒŠã®æ­£å¸¸ãªçµ‚äº†å¾Œã«Podã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã€<code>.spec.terminationGracePeriodSeconds</code>ã‚­ãƒ¼ã«ä»»æ„ã®ç§’æ•°ã‚’è¨­å®šã—ã€Podã®å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹ã®å®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>ã¾ãŸã€Serviceã¨kube-proxyã®å‡¦ç†å¾Œã«Podã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒPodã®<code>.spec.containers[].lifecycle.preStop</code>ã‚­ãƒ¼ã«ä»»æ„ã®ç§’æ•°ã‚’è¨­å®šã—ã€ã‚³ãƒ³ãƒ†ãƒŠã«å¾…æ©Ÿå‡¦ç† (ä¾‹ï¼š<code>sleep</code>ã‚³ãƒãƒ³ãƒ‰) ã‚’å®Ÿè¡Œã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>ã“ã‚Œã‚‰ã®é©åˆ‡ãªç§’æ•°ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã®ã‚·ã‚¹ãƒ†ãƒ ã«å¿œã˜ã¦èª¿ç¯€ã™ã‚‹ã—ã‹ãªã„ã€‚</p>
<p><code>.spec.terminationGracePeriodSeconds</code>ã‚­ãƒ¼ã‚’é•·ã‚ã«è¨­å®šã—ã€<code>.spec.containers[].lifecycle.preStop</code>ã‚­ãƒ¼ã®ç§’æ•°ã‚‚å«ã‚ã¦ã€å…¨ã¦ãŒå®Œäº†ã—ãŸä¸Šã§Podã‚’å‰Šé™¤å¯èƒ½ã«ã™ã‚‹ã€‚</p>
<p>è£œè¶³ã¨ã—ã¦ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ãƒ„ãƒ¼ãƒ« (ä¾‹ï¼šIstioã€Linkerd) ã®ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚’æŒã¤Podã‚’å®‰å…¨ã«å‰Šé™¤ã™ã‚‹å ´åˆã‚‚ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚³ãƒ³ãƒ†ãƒŠãŒåœæ­¢ã—ãŸä¸Šã§Podã‚’å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã€Podã®å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹ã®å®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://christina04.hatenablog.com/entry/k8s-graceful-stop-with-istio-proxy">https://christina04.hatenablog.com/entry/k8s-graceful-stop-with-istio-proxy</a></li>
</ul>
</blockquote>
<p><img alt="pod_terminating_process" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/pod_terminating_process.png" /></p>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã€<code>kubectl</code>ã‚³ãƒãƒ³ãƒ‰ãŒã‚’ä½¿ç”¨ã—ã¦ã€Podã‚’å‰Šé™¤ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’kube-apiserverã«é€ä¿¡ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(2)</code></dt>
<dd>
<p>Podã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«<code>deletionTimestamp</code>ã‚­ãƒ¼ãŒè¿½åŠ ã•ã‚Œã€PodãŒ<code>Terminating</code>ãƒ•ã‚§ãƒ¼ã‚ºã¨ãªã‚Šã€å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(3)</code></dt>
<dd>
<p>Podã®<code>.spec.terminationGracePeriodSeconds</code>ã‚­ãƒ¼ã«å¿œã˜ã¦ã€Podã®å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹å®Œäº†ã®å¾…æ©Ÿæ™‚é–“ã‚’é–‹å§‹ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(4)</code></dt>
<dd>
<p>æœ€åˆã«preStopãƒ•ãƒƒã‚¯ãŒèµ·å‹•ã—ã€<code>.spec.containers[].lifecycle.preStop</code>ã‚­ãƒ¼ã§è¨­å®šã—ãŸå¾…æ©Ÿå‡¦ç†ã‚’ã‚³ãƒ³ãƒ†ãƒŠãŒå®Ÿè¡Œã™ã‚‹ã€‚</p>
</dd>
<dt><code>(5)</code></dt>
<dd>
<p>DeploymentãŒPodã‚’åˆ‡ã‚Šé›¢ã™ã€‚ã¾ãŸã€Serviceã¨kube-proxyãŒPodã®å®›å…ˆæƒ…å ±ã‚’å‰Šé™¤ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(6)</code></dt>
<dd>
<p><code>.spec.containers[].lifecycle.preStop</code>ã‚­ãƒ¼ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠã®å¾…æ©Ÿå‡¦ç†ãŒçµ‚äº†ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(7)</code></dt>
<dd>
<p>å¾…æ©Ÿå‡¦ç†ãŒçµ‚äº†ã—ãŸãŸã‚ã€kubeletã¯ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä»‹ã—ã¦ã€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã«<code>SIGTERM</code>ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã™ã‚‹ã€‚</p>
<p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢å‡¦ç†ãŒé–‹å§‹ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(8)</code></dt>
<dd>
<p><code>.spec.terminationGracePeriodSeconds</code>ã‚­ãƒ¼ã«ã‚ˆã‚‹Podã®å‰Šé™¤ãƒ—ãƒ­ã‚»ã‚¹å®Œäº†ã®å¾…æ©Ÿæ™‚é–“ãŒçµ‚äº†ã™ã‚‹ã€‚</p>
<p>ã“ã®æ®µéšã§ã‚‚ã‚³ãƒ³ãƒ†ãƒŠãŒåœæ­¢ã—ã¦ã„ãªã„å ´åˆã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã«<code>SIGKILL</code>ã‚·ã‚°ãƒŠãƒ«ãŒé€ä¿¡ã•ã‚Œã€ã‚³ãƒ³ãƒ†ãƒŠã‚’å¼·åˆ¶çš„ã«çµ‚äº†ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚</p>
</dd>
<dt><code>(9)</code></dt>
<dd>
<p>PodãŒå‰Šé™¤ã•ã‚Œã‚‹ã€‚ã“ã®æ®µéšã§Deploymentã‚„ã€Serviceã¨kube-proxyã®å‡¦ç†ãŒå®Œäº†ã—ã¦ã„ãªã„å ´åˆã¯ã€ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’é€”ä¸­ã§å¼·åˆ¶çš„ã«åˆ‡æ–­ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚</p>
</dd>
</dl>
<blockquote>
<ul>
<li><a href="https://christina04.hatenablog.com/entry/kubernetes-pod-graceful-shutdown">https://christina04.hatenablog.com/entry/kubernetes-pod-graceful-shutdown</a></li>
<li><a href="https://qiita.com/superbrothers/items/3ac78daba3560ea406b2">https://qiita.com/superbrothers/items/3ac78daba3560ea406b2</a></li>
<li><a href="https://zenn.dev/hhiroshell/articles/kubernetes-graceful-shutdown-experiment">https://zenn.dev/hhiroshell/articles/kubernetes-graceful-shutdown-experiment</a></li>
<li><a href="https://44smkn.hatenadiary.com/entry/2018/08/01/022312">https://44smkn.hatenadiary.com/entry/2018/08/01/022312</a></li>
</ul>
</blockquote>
<h4 id="_4">â–¼ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ã®å‰²ã‚Šå½“ã¦<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>ãã®Podã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒªã‚½ãƒ¼ã‚¹ (CPUã€ãƒ¡ãƒ¢ãƒª) ã‚’ã€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠãŒåˆ†ã‘åˆã£ã¦ä½¿ç”¨ã™ã‚‹ã€‚</p>
<table>
<thead>
<tr>
<th>å˜ä½</th>
<th>ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>m</code>ï¼šmillicores</td>
<td><code>1</code>ã‚³ã‚¢ = <code>1000</code>ãƒ¦ãƒ‹ãƒƒãƒˆ = <code>1000</code>m</td>
</tr>
<tr>
<td><code>Mi</code>ï¼šmebibyte</td>
<td><code>1</code>Mi = <code>1.04858</code>MB</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://qiita.com/jackchuka/items/b82c545a674975e62c04#cpu">https://qiita.com/jackchuka/items/b82c545a674975e62c04#cpu</a></li>
</ul>
</blockquote>
<h4 id="pod_8">â–¼ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒPodå†…ã®ãƒ­ã‚°ã‚’å‚ç…§ã§ãã‚‹ä»•çµ„ã¿<a class="headerlink" href="#pod_8" title="Permanent link">&para;</a></h4>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (ç‰¹ã«<code>kubectl</code>ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œè€…) ãŒ<code>kubectl logs</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</p>
</dd>
<dt><code>(2)</code></dt>
<dd>
<p>kube-apiserverãŒã€<code>/logs/pods/&lt;ãƒ­ã‚°ã¸ã®ãƒ‘ã‚¹&gt;</code>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã€‚</p>
</dd>
<dt><code>(3)</code></dt>
<dd>
<p>kubeletã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡ã—ã€Nodeã®<code>/var/log</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’èª­ã¿è¾¼ã‚€ã€‚Nodeã®<code>/var/log/pods/&lt;Namespaceå&gt;_&lt;Podå&gt;_&lt;UID&gt;/container/&lt;æ•°å­—&gt;.log</code>ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã®<code>/var/lib/docker/container/&lt;ID&gt;/&lt;ID&gt;-json.log</code>ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€kubeletã‚’ä»‹ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’ç¢ºèªã§ãã‚‹ã€‚è£œè¶³ã¨ã—ã¦ã€å‰Šé™¤ã•ã‚ŒãŸPodã®ãƒ­ã‚°ã¯ã€å¼•ãç¶šã<code>/var/log/pods</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ä¿ç®¡ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
</dd>
</dl>
<p><img alt="kubernetes_pod_logging" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_pod_logging.png" /></p>
<blockquote>
<ul>
<li><a href="https://www.creationline.com/lab/29281">https://www.creationline.com/lab/29281</a></li>
</ul>
</blockquote>
<p>è£œè¶³ã¨ã—ã¦ã€DaemonSetã¨ã—ã¦ç¨¼åƒã™ã‚‹Fluentdã¯ã€Nodeã®<code>/var/log</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã«ã‚ˆã‚Šã€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’åé›†ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://note.com/shift_tech/n/n503b32e5cd35">https://note.com/shift_tech/n/n503b32e5cd35</a></li>
</ul>
</blockquote>
<h4 id="_5">â–¼ å¾…ã¡å—ã‘ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã®ç¢ºèª<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã§<code>netstat</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠãŒå¾…ã¡å—ã‘ã¦ã„ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã‚’ç¢ºèªã§ãã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>foo-istiod<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>--<span class="w"> </span>netstat<span class="w"> </span>-tulpn

Active<span class="w"> </span>Internet<span class="w"> </span>connections<span class="w"> </span><span class="o">(</span>only<span class="w"> </span>servers<span class="o">)</span>

Proto<span class="w"> </span>Recv-Q<span class="w"> </span>Send-Q<span class="w"> </span>Local<span class="w"> </span>Address<span class="w">           </span>Foreign<span class="w"> </span>Address<span class="w">         </span>State<span class="w">       </span>PID/Program<span class="w"> </span>name
tcp<span class="w">        </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">127</span>.0.0.1:9876<span class="w">          </span><span class="m">0</span>.0.0.0:*<span class="w">               </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
tcp6<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>:::15017<span class="w">                </span>:::*<span class="w">                    </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
tcp6<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>:::8080<span class="w">                 </span>:::*<span class="w">                    </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
tcp6<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>:::15010<span class="w">                </span>:::*<span class="w">                    </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
tcp6<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>:::15012<span class="w">                </span>:::*<span class="w">                    </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
tcp6<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>:::15014<span class="w">                </span>:::*<span class="w">                    </span>LISTEN<span class="w">      </span><span class="m">1</span>/pilot-discovery
</code></pre></div>
<p><br></p>
<h3 id="replicaset_1">ReplicaSet<a class="headerlink" href="#replicaset_1" title="Permanent link">&para;</a></h3>
<h4 id="replicaset_2">â–¼ ReplicaSetã¨ã¯<a class="headerlink" href="#replicaset_2" title="Permanent link">&para;</a></h4>
<p>Nodeä¸Šã®Podæ•°ã‚’ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>Podã®è² è·ã«åˆã‚ã›ã¦Podã®è‡ªå‹•æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ãªã„ (HorizontalPodAutoscalerãŒå¿…è¦ã§ã‚ã‚‹) ã€‚</p>
<p>DaemonSetã¨ã¯ç•°ãªã‚Šã€Podã‚’æŒ‡å®šã—ãŸå€‹æ•°ã«ç¶­æŒç®¡ç†ã§ãã‚‹ã€‚</p>
<p>ReplicaSetã‚’ç›´æ¥çš„ã«æ“ä½œã™ã‚‹ã®ã§ã¯ãªãã€Deploymentä½¿ç”¨ã—ã¦ã“ã‚Œã‚’è¡Œã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/#replicaset%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E3%81%8D">https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/#replicaset%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E3%81%8D</a></li>
<li><a href="https://thinkit.co.jp/article/13611">https://thinkit.co.jp/article/13611</a></li>
</ul>
</blockquote>
<h4 id="podtemplate">â–¼ PodTemplate<a class="headerlink" href="#podtemplate" title="Permanent link">&para;</a></h4>
<p>Podã®é‹³å‹ã¨ã—ã¦å‹•ä½œã™ã‚‹ã€‚</p>
<p>ReplicaSetã¯ã€PodTemplateã‚’ç”¨ã„ã¦Podã®ãƒ¬ãƒ—ãƒªã‚«ã‚’ä½œæˆã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="statefulset">StatefulSet<a class="headerlink" href="#statefulset" title="Permanent link">&para;</a></h3>
<h4 id="statefulset_1">â–¼ StatefulSetã¨ã¯<a class="headerlink" href="#statefulset_1" title="Permanent link">&para;</a></h4>
<p>ReplicaSetã‚’æ“ä½œã—ã€Podã®å€‹æ•°ã‚’ç¶­æŒç®¡ç†ã™ã‚‹ã€‚</p>
<p>Podã®è² è·ã«åˆã‚ã›ã¦Podã‚’è‡ªå‹•æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ãªã„ (HorizontalPodAutoscalerãŒå¿…è¦ã§ã‚ã‚‹) ã€‚</p>
<p>Deploymentã¨ã¯ç•°ãªã‚Šã€ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ•ãƒ«ãªã‚³ãƒ³ãƒ†ãƒŠ (ä¾‹ï¼šdbã‚³ãƒ³ãƒ†ãƒŠ) ã‚’å«ã‚€Podã‚’æ‰±ãˆã‚‹ã€‚</p>
<p>PodãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚PersistentVolumeClaimsã¯å‰Šé™¤ã•ã‚Œãªã„ãŸã‚ã€æ–°ã—ã„Podã«ã‚‚åŒã˜PersistentVolumeã‚’ç¶™ç¶šçš„ã«ãƒã‚¦ãƒ³ãƒˆã§ãã‚‹ã€‚</p>
<p>ãã®ä»£ã‚ã‚Šã€StatefulSetã®ä½œæˆå¾Œã«ä¸€éƒ¨ã®è¨­å®šå¤‰æ›´ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>The<span class="w"> </span>StatefulSet<span class="w"> </span><span class="s2">&quot;foo-pod&quot;</span><span class="w"> </span>is<span class="w"> </span>invalid:<span class="w"> </span>spec:<span class="w"> </span>Forbidden:<span class="w"> </span>updates<span class="w"> </span>to<span class="w"> </span>statefulset<span class="w"> </span>spec<span class="w"> </span><span class="k">for</span><span class="w"> </span>fields<span class="w"> </span>other<span class="w"> </span>than<span class="w"> </span><span class="s1">&#39;replicas&#39;</span>,<span class="w"> </span><span class="s1">&#39;template&#39;</span>,<span class="w"> </span><span class="s1">&#39;updateStrategy&#39;</span><span class="w"> </span>and<span class="w"> </span><span class="s1">&#39;minReadySeconds&#39;</span><span class="w"> </span>are<span class="w"> </span>forbidden
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#%E5%AE%89%E5%AE%9A%E3%81%97%E3%81%9F%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8">https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#%E5%AE%89%E5%AE%9A%E3%81%97%E3%81%9F%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8</a></li>
<li><a href="https://sorarinu.dev/2021/08/kubernetes_01/">https://sorarinu.dev/2021/08/kubernetes_01/</a></li>
</ul>
</blockquote>
<h4 id="_6">â–¼ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>StatefulSetã¯ã€Deploymentã‚„ReplicaSetã¨ã¯ç•°ãªã‚Šã€åŒæ™‚ã«Podã‚’ä½œæˆã—ãªã„ã€‚</p>
<p>ä½œæˆä¸­ã®PodãŒReadyçŠ¶æ…‹ã«ãªã£ã¦ã‹ã‚‰ã€æ¬¡ã®Podã‚’ä½œæˆã—å§‹ã‚ã‚‹ã€‚</p>
<p>ãã®ãŸã‚Deploymentã‚„ReplicaSetã¨æ¯”ã¹ã¦ã€å…¨ã¦ã®PodãŒæƒã†ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13611">https://thinkit.co.jp/article/13611</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="03">03. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#03" title="Permanent link">&para;</a></h2>
<h3 id="_7">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>Clusterå†…ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="endpointslice">EndpointSlice<a class="headerlink" href="#endpointslice" title="Permanent link">&para;</a></h3>
<h4 id="endpointslice_1">â–¼ EndpointSliceã¨ã¯<a class="headerlink" href="#endpointslice_1" title="Permanent link">&para;</a></h4>
<p>å„Serviceé…ä¸‹ã«å­˜åœ¨ã™ã‚‹ã€‚Serviceã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…ˆã®Podã®å®›å…ˆæƒ…å ±ã‚’åˆ†å‰²ã—ã¦ç®¡ç†ã—ã€Podã®å¢—æ¸›ã«åˆã‚ã›ã¦ã€Podã®å®›å…ˆæƒ…å ±ã‚’è¿½åŠ /å‰Šé™¤ã™ã‚‹ã€‚</p>
<p>kube-proxyã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ã®ãŸã‚ã«ã€Podã®å®›å…ˆæƒ…å ±ã‚’æä¾›ã™ã‚‹ã€‚</p>
<p>Kubernetesã®v1.6ã‚ˆã‚Šå‰ã¯EndpointsãŒä½¿ç”¨ã•ã‚Œã¦ã„ãŸã€‚</p>
<p>ã—ã‹ã—ã€Endpointsã§ã¯Podã®å®›å…ˆæƒ…å ±ã‚’ä¸€æ‹¬ç®¡ç†ã—ãªã‘ã‚Œã°ãªã‚‰ãšã€ã“ã‚Œã‚’åˆ†å‰²ã—ã¦ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã€Endpointsã®ä»£ã‚ã‚Šã¨ã—ã¦EndpointSliceãŒå°å…¥ã•ã‚ŒãŸã€‚</p>
<p><img alt="kubernetes_endpoint-slices" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_endpoint-slices.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/blog/2020/09/02/scaling-kubernetes-networking-with-endpointslices/#splitting-endpoints-up-with-the-endpointslice-api">https://kubernetes.io/blog/2020/09/02/scaling-kubernetes-networking-with-endpointslices/#splitting-endpoints-up-with-the-endpointslice-api</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="gateway">Gateway<a class="headerlink" href="#gateway" title="Permanent link">&para;</a></h3>
<h4 id="gateway_1">â–¼ Gatewayã¨ã¯<a class="headerlink" href="#gateway_1" title="Permanent link">&para;</a></h4>
<p>Gatewayã¯ã€<code>L4</code>/<code>L7</code>ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®å—ä¿¡ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã€ã¾ãŸ<code>L4</code>/<code>L7</code>ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã¨ã—ã¦ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://developer.mamezou-tech.com/blogs/2022/07/24/k8s-gateway-api-intro/">https://developer.mamezou-tech.com/blogs/2022/07/24/k8s-gateway-api-intro/</a></li>
</ul>
</blockquote>
<h4 id="ingress">â–¼ Ingressã¨ã®é•ã„<a class="headerlink" href="#ingress" title="Permanent link">&para;</a></h4>
<p><code>L7</code>ã ã‘ã§ãªã<code>L4</code>ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’å‡¦ç†ã§ãã‚‹ã€‚</p>
<p>ã¾ãŸã€Gatewayè‡ªä½“ãŒãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="gatewayclass">GatewayClass<a class="headerlink" href="#gatewayclass" title="Permanent link">&para;</a></h3>
<h4 id="gatewayclass_1">â–¼ GatewayClassã¨ã¯<a class="headerlink" href="#gatewayclass_1" title="Permanent link">&para;</a></h4>
<p>Gatewayã®å®Ÿä½“ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="ingress_1">Ingress<a class="headerlink" href="#ingress_1" title="Permanent link">&para;</a></h3>
<h4 id="ingress_2">â–¼ Ingressã¨ã¯<a class="headerlink" href="#ingress_2" title="Permanent link">&para;</a></h4>
<p>Ingressã¯ã€<code>L7</code>ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®å—ä¿¡ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹ã€‚</p>
<p>Ingressã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€å®›å…ˆã®Serviceã¯ã€Cluster IP Serviceã¨ã™ã‚‹ã€‚</p>
<p>NodePort Serviceã‚„LoadBalancer Serviceã¨åŒæ§˜ã«ã€å¤–éƒ¨ã‹ã‚‰ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’å—ä¿¡ã™ã‚‹æ–¹æ³•ã®1ã¤ã§ã‚ã‚‹ã€‚</p>
<p><img alt="kubernetes_ingress" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_ingress.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#what-is-ingress">https://kubernetes.io/docs/concepts/services-networking/ingress/#what-is-ingress</a></li>
<li><a href="https://thinkit.co.jp/article/18263">https://thinkit.co.jp/article/18263</a></li>
<li><a href="https://chidakiyo.hatenablog.com/entry/2018/09/10/Kubernetes_NodePort_vs_LoadBalancer_vs_Ingress%3F_When_should_I_use_what%3F_%28Kubernetes_NodePort_%E3%81%A8_LoadBalancer_%E3%81%A8_Ingress_%E3%81%AE%E3%81%A9%E3%82%8C%E3%82%92%E4%BD%BF%E3%81%86">https://chidakiyo.hatenablog.com/entry/2018/09/10/Kubernetes_NodePort_vs_LoadBalancer_vs_Ingress%3F_When_should_I_use_what%3F_%28Kubernetes_NodePort_%E3%81%A8_LoadBalancer_%E3%81%A8_Ingress_%E3%81%AE%E3%81%A9%E3%82%8C%E3%82%92%E4%BD%BF%E3%81%86</a></li>
<li><a href="https://www.netone.co.jp/knowledge-center/netone-blog/20210715-01/">https://www.netone.co.jp/knowledge-center/netone-blog/20210715-01/</a></li>
</ul>
</blockquote>
<h4 id="gateway_2">â–¼ Gatewayã¨ã®é•ã„<a class="headerlink" href="#gateway_2" title="Permanent link">&para;</a></h4>
<p><code>L7</code>ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®ã¿ã‚’å‡¦ç†ã§ãã‚‹ã€‚</p>
<p>ã¾ãŸã€Ingressãã‚Œè‡ªä½“ã¯ãƒ«ãƒ¼ãƒ«ã®ã¿ã‚’æŒã¡ã€Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€‚</p>
<h4 id="_8">â–¼ ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>ãƒ‘ã‚¹ã®å€¤ã«åŸºã¥ã„ã¦ã€Serviceã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p><img alt="kubernetes_ingress_path" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_ingress_path.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#simple-fanout">https://kubernetes.io/docs/concepts/services-networking/ingress/#simple-fanout</a></li>
</ul>
</blockquote>
<h4 id="_9">â–¼ ãƒ›ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p><code>Host</code>ãƒ˜ãƒƒãƒ€ãƒ¼ã®å€¤ã«åŸºã¥ã„ã¦ã€Serviceã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>æœ¬ç•ªç’°å¢ƒã§ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æŒ‡å®šã—ãŸå„ç¨®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p><img alt="kubernetes_ingress_host" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_ingress_host.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#name-based-virtual-hosting">https://kubernetes.io/docs/concepts/services-networking/ingress/#name-based-virtual-hosting</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="ingressclass">IngressClass<a class="headerlink" href="#ingressclass" title="Permanent link">&para;</a></h3>
<h4 id="ingressclass_1">â–¼ IngressClassã¨ã¯<a class="headerlink" href="#ingressclass_1" title="Permanent link">&para;</a></h4>
<p>Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®å®Ÿä½“ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="ingress_3">Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼<a class="headerlink" href="#ingress_3" title="Permanent link">&para;</a></h3>
<h4 id="ingress_4">â–¼ Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼<a class="headerlink" href="#ingress_4" title="Permanent link">&para;</a></h4>
<p>Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯Nodeå¤–ã‹ã‚‰ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’å—ä¿¡ã—ã€Ingressã«å®šç¾©ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã«å¿œã˜ã¦ã€å˜ä¸€/è¤‡æ•°ã®Serviceã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="service">Service<a class="headerlink" href="#service" title="Permanent link">&para;</a></h3>
<h4 id="service_1">â–¼ Serviceã¨ã¯<a class="headerlink" href="#service_1" title="Permanent link">&para;</a></h4>
<p>Serviceã¯ã€<code>L4</code>ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’å—ä¿¡ã™ã‚‹ã€‚</p>
<p>kube-proxyãŒæ›´æ–°ã—ãŸNodeä¸Šã§ç¨¼åƒã™ã‚‹iptablesã‚’ä½¿ç”¨ã—ã€ã¾ãŸãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…ˆPodã®æ±ºå®šã«åŸºã¥ã„ã¦ã€Podã«ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹ã€Serviceã€ã¨ã¯åŒºåˆ¥ã™ã‚‹ã€‚</p>
<p><img alt="kubernetes_kube-proxy_service" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_kube-proxy_service.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/service/">https://kubernetes.io/docs/concepts/services-networking/service/</a></li>
<li><a href="https://www.mtioutput.com/entry/kube-proxy-iptable">https://www.mtioutput.com/entry/kube-proxy-iptable</a></li>
<li><a href="https://www.amazon.co.jp/dp/B079TG2M5N/">https://www.amazon.co.jp/dp/B079TG2M5N/</a> (ãƒãƒ£ãƒ—ã‚¿ãƒ¼5)</li>
</ul>
</blockquote>
<h4 id="clusterip-service">â–¼ ClusterIP Service<a class="headerlink" href="#clusterip-service" title="Permanent link">&para;</a></h4>
<p><img alt="kubernetes_clusterip-service" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_clusterip-service.png" /></p>
<p>Serviceã«å¯¾ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ã€Cluster-IPã‚’ä»‹ã—ã¦Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>Cluster-IPã¯Serviceã®<code>.spec.clusterIP</code>ã‚­ãƒ¼ã§æŒ‡å®šã—ãªã„é™ã‚Šãƒ©ãƒ³ãƒ€ãƒ ã§æ±ºã¾ã‚Šã€Podã®<code>/etc/resolv.conf</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<p>Podå†…ã«è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠãŒã‚ã‚‹å ´åˆã€å„ã‚³ãƒ³ãƒ†ãƒŠã«åŒã˜å†…å®¹ã®<code>/etc/resolv.conf</code>ãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®ã•ã‚Œã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;Podå&gt;<span class="w"> </span>-c<span class="w"> </span>&lt;ã‚³ãƒ³ãƒ†ãƒŠå&gt;<span class="w"> </span>--<span class="w"> </span>bash

<span class="o">[</span>root@&lt;Podå&gt;<span class="o">]</span><span class="w"> </span>$<span class="w"> </span>cat<span class="w"> </span>/etc/resolv.conf

nameserver<span class="w"> </span>*.*.*.*<span class="w"> </span><span class="c1"># Clusterãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹</span>
search<span class="w"> </span>default.svc.cluster.local<span class="w"> </span>svc.cluster.local<span class="w"> </span>cluster.local
options<span class="w"> </span>ndots:5<span class="w"> </span><span class="c1"># åå‰è§£æ±ºæ™‚ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å„ªå…ˆåº¦</span>
</code></pre></div>
<p>Cluster-IPã¯Nodeå¤–ã‹ã‚‰å®›å…ˆã¨ã—ã¦æŒ‡å®šã§ããªã„ãŸã‚ã€ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã«Ingressã‚’å¿…è¦ã¨ã™ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â¬‡ï¸
Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ â‡„ Ingress
â¬‡ï¸
ClusterIP Service
â¬‡ï¸
Pod
</code></pre></div>
<p>IngressãŒç„¡ã„ã¨Clusterãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã‹ã‚‰ã®ã¿ã—ã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ããšã€å®‰å…¨ã§ã‚ã‚‹ã€‚</p>
<p>ä¸€æ–¹ã§ã‚‚ã—Ingressã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€LoadBalancer Serviceã¨åŒæ§˜ã«ã—ã¦ (ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ç•°ãªã‚‹ãŒ) ã€Podã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å®›å…ˆã¨ã™ã‚‹<code>L7</code>ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ (ä¾‹ï¼šAWS ALBã¨AWSã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—) ã‚’è‡ªå‹•çš„ã«ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã¨Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®è²¬å‹™ã®å¢ƒç•ŒãŒæ›–æ˜§ã«ãªã£ã¦ã—ã¾ã†ã€‚</p>
<blockquote>
<ul>
<li><a href="https://www.imagazine.co.jp/%e5%ae%9f%e8%b7%b5-kubernetes%e3%80%80%e3%80%80%ef%bd%9e%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e7%ae%a1%e7%90%86%e3%81%ae%e3%82%b9%e3%82%bf%e3%83%b3%e3%83%80%e3%83%bc%e3%83%89%e3%83%84%e3%83%bc%e3%83%ab/">https://www.imagazine.co.jp/%e5%ae%9f%e8%b7%b5-kubernetes%e3%80%80%e3%80%80%ef%bd%9e%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e7%ae%a1%e7%90%86%e3%81%ae%e3%82%b9%e3%82%bf%e3%83%b3%e3%83%80%e3%83%bc%e3%83%89%e3%83%84%e3%83%bc%e3%83%ab/</a></li>
<li><a href="https://thinkit.co.jp/article/18263">https://thinkit.co.jp/article/18263</a></li>
<li><a href="https://qiita.com/tkusumi/items/da474798c5c9be88d9c5#%E8%83%8C%E6%99%AF">https://qiita.com/tkusumi/items/da474798c5c9be88d9c5#%E8%83%8C%E6%99%AF</a></li>
</ul>
</blockquote>
<p>ãŸã ã—ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚ˆã£ã¦ã¯<code>L7</code>ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã¨ClusterIP Serviceã‚’ä»²ä»‹ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’æä¾›ã—ã¦ã„ã‚‹å ´åˆãŒã‚ã‚‹ (AWSã®TargetGroupBindings) ã€‚</p>
<p>ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚Œã°ã€ClusterIP Serviceã§ã‚‚ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã¨Kubernetesã®å¢ƒç•Œã‚’æ˜ç¢ºåŒ–ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://qiita.com/k-sasaki-hisys-biz/items/895cd2e3dd9baff45bd8">https://qiita.com/k-sasaki-hisys-biz/items/895cd2e3dd9baff45bd8</a></li>
</ul>
</blockquote>
<h4 id="nodeport-service">â–¼ NodePort Service<a class="headerlink" href="#nodeport-service" title="Permanent link">&para;</a></h4>
<p><img alt="kubernetes_nodeport-service" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_nodeport-service.png" /></p>
<p>Serviceã«å¯¾ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ã€Nodeã®NICã®å®›å…ˆæƒ…å ± (IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒãƒ¼ãƒˆç•ªå·) ã€Cluster-IPã€ã‚’ä»‹ã—ã¦Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>Nodeã®NICã®å®›å…ˆæƒ…å ±ã¯ã€Nodeå¤–ã‹ã‚‰å®›å…ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã—ã¦æŒ‡å®šã§ãã‚‹ãŸã‚ã€ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã«Ingressã‚’å¿…è¦ã¨ã—ãªã„ã€‚</p>
<div class="highlight"><pre><span></span><code>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â¬‡ï¸
NodePort Service
â¬‡ï¸
Pod
</code></pre></div>
<p>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®LB (ä¾‹ï¼šAWS ALB) ã‚’åˆ¥ã«ç½®ã„ã¦ã‚‚è‰¯ã„ (ã“ã®LBã¯ã€Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”±æ¥ã§ã¯ãªã„) ã€‚</p>
<div class="highlight"><pre><span></span><code>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â¬‡ï¸
AWS Route53
â¬‡ï¸
AWS ALB
â¬‡ï¸
NodePort Service
â¬‡ï¸
Pod
</code></pre></div>
<p>ãŸã ã—ã€NodePort Serviceã¯å†…éƒ¨çš„ã«Cluster-IPã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€Ingressã‚’ä½œæˆã™ã‚‹ã¨NodePort Serviceã®Cluster-IPã‚’ä»‹ã—ã¦Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>ã“ã®å ´åˆã€Nodeã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨Ingressã®ä¸¡æ–¹ãŒNodeã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®å…¥ã‚Šå£ã¨ãªã‚Šã€å…¥å£ãŒç„¡é—‡ã«å¢—ãˆã‚‹ãŸã‚ã€ã‚„ã‚ãŸæ–¹ãŒè‰¯ã„ã€‚</p>
<div class="highlight"><pre><span></span><code>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â¬‡ï¸
Ingressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ â‡„ Ingress
â¬‡ï¸
ClusterIP Service (å®Ÿä½“ã¯NodePort Service)
â¬‡ï¸
Pod
</code></pre></div>
<p>Nodeã®NICã®å®›å…ˆæƒ…å ±ã¯ã€Nodeã®ä½œæˆæ–¹æ³• (AWS EC2ã€GCP GCEã€VMWare) ã«å¿œã˜ã¦ã€ç¢ºèªæ–¹æ³•ãŒç•°ãªã‚‹ã€‚</p>
<p>Serviceã®ãƒãƒ¼ãƒˆç•ªå·ã¨ç´ã¥ãNodeã®NICã®ãƒãƒ¼ãƒˆç•ªå·ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ©ãƒ³ãƒ€ãƒ ã§ã‚ã‚‹ãŸã‚ã€Nodeã®NICã®ãƒãƒ¼ãƒˆç•ªå·ã‚’å›ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>ã“ã®æ™‚ã€<code>1</code>å€‹ã®Nodeã®ãƒãƒ¼ãƒˆç•ªå·ã«ã¤ãã€<code>1</code>å€‹ã®Serviceã¨ã—ã‹ç´ä»˜ã‘ã‚‰ã‚Œãšã€ServiceãŒå¢—ãˆã¦ã„ã£ã¦ã—ã¾ã†ãŸã‚ã€å®Ÿéš›ã®é‹ç”¨ã«ã‚„ã‚„ä¸å‘ãã§ã‚ã‚‹ã€‚</p>
<p>ä¸€æ–¹ã§ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã¨Kubernetesã®å¢ƒç•Œã‚’æ˜ç¢ºåŒ–ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/a/64605782">https://stackoverflow.com/a/64605782</a></li>
</ul>
</blockquote>
<h4 id="loadbalancer-service">â–¼ LoadBalancer Service<a class="headerlink" href="#loadbalancer-service" title="Permanent link">&para;</a></h4>
<p><img alt="kubernetes_loadbalancer-service" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_loadbalancer-service.png" /></p>
<p>Serviceã«å¯¾ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ã€External-IPã€Nodeã®NICã®å®›å…ˆæƒ…å ±ã€Cluster-IPã€ã‚’ä»‹ã—ã¦Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>External-IPã¯Nodeå¤–ã‹ã‚‰å®›å…ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã—ã¦æŒ‡å®šã§ãã‚‹ãŸã‚ã€ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã«Ingressã‚’å¿…è¦ã¨ã—ãªã„ãŒã€å¤–éƒ¨ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã®ã¿ãŒå®›å…ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã§ãã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â¬‡ï¸
AWS Route53
â¬‡ï¸
AWS ALB
â¬‡ï¸
LoadBalancer Service
â¬‡ï¸
Pod
</code></pre></div>
<p>ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç’°å¢ƒ (ä¾‹ï¼šAWS) ã§ã¯ã€LoadBalancer Serviceã‚’ä½œæˆã™ã‚‹ã¨ã€External-IPã‚’å®›å…ˆã¨ã™ã‚‹<code>L4</code>ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ (ä¾‹ï¼šAWS NLBã¨AWSã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—) ã‚’è‡ªå‹•çš„ã«ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã™ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã¨Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®è²¬å‹™ã®å¢ƒç•ŒãŒæ›–æ˜§ã«ãªã£ã¦ã—ã¾ã†ã€‚</p>
<blockquote>
<ul>
<li><a href="https://www.imagazine.co.jp/%e5%ae%9f%e8%b7%b5-kubernetes%e3%80%80%e3%80%80%ef%bd%9e%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e7%ae%a1%e7%90%86%e3%81%ae%e3%82%b9%e3%82%bf%e3%83%b3%e3%83%80%e3%83%bc%e3%83%89%e3%83%84%e3%83%bc%e3%83%ab/">https://www.imagazine.co.jp/%e5%ae%9f%e8%b7%b5-kubernetes%e3%80%80%e3%80%80%ef%bd%9e%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e7%ae%a1%e7%90%86%e3%81%ae%e3%82%b9%e3%82%bf%e3%83%b3%e3%83%80%e3%83%bc%e3%83%89%e3%83%84%e3%83%bc%e3%83%ab/</a></li>
<li><a href="https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0">https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0</a></li>
<li><a href="https://thinkit.co.jp/article/18263">https://thinkit.co.jp/article/18263</a></li>
</ul>
</blockquote>
<h4 id="externalname-service">â–¼ ExternalName Service<a class="headerlink" href="#externalname-service" title="Permanent link">&para;</a></h4>
<p>Serviceã«å¯¾ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’CNAMEãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä»‹ã—ã¦Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13739">https://thinkit.co.jp/article/13739</a></li>
</ul>
</blockquote>
<h4 id="headless-service">â–¼ Headless Service<a class="headerlink" href="#headless-service" title="Permanent link">&para;</a></h4>
<p>Serviceã«å¯¾ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã‚’ã€ãã®ã¾ã¾Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚</p>
<p>PodãŒè¤‡æ•°ã‚ã‚‹å ´åˆã¯ã€ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³æ–¹å¼ã§IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿”å´ã•ã‚Œã‚‹ãŸã‚ã€è² è·ã®é«˜ã„Podã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€è² è·åˆ†æ•£ã«ã¯å‘ã„ã¦ã„ãªã„ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dig<span class="w"> </span>&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;

<span class="p">;;</span><span class="w"> </span>QUESTION<span class="w"> </span>SECTION:
<span class="p">;</span>&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span>IN<span class="w">   </span>A

<span class="p">;;</span><span class="w"> </span>ANSWER<span class="w"> </span>SECTION:
&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span><span class="m">30</span><span class="w"> </span>IN<span class="w"> </span>A<span class="w">       </span><span class="m">10</span>.8.0.30
&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span><span class="m">30</span><span class="w"> </span>IN<span class="w"> </span>A<span class="w">       </span><span class="m">10</span>.8.1.34
&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span><span class="m">30</span><span class="w"> </span>IN<span class="w"> </span>A<span class="w">       </span><span class="m">10</span>.8.2.55
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13739">https://thinkit.co.jp/article/13739</a></li>
<li><a href="https://hyoublog.com/2020/05/22/kubernetes-headless-service/">https://hyoublog.com/2020/05/22/kubernetes-headless-service/</a></li>
</ul>
</blockquote>
<p>ã¾ãŸã€Headless Serviceã‹ã‚‰StatefulSetã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹å ´åˆã¯ã€å”¯ä¸€ã€Podã§ç›´æ¥çš„ã«åå‰è§£æ±ºã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dig<span class="w"> </span>&lt;Podå&gt;.&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;

<span class="p">;;</span><span class="w"> </span>QUESTION<span class="w"> </span>SECTION:
<span class="p">;</span>&lt;Podå&gt;.&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span>IN<span class="w"> </span>A

<span class="p">;;</span><span class="w"> </span>ANSWER<span class="w"> </span>SECTION:
&lt;Podå&gt;.&lt;Serviceã®å®Œå…¨ä¿®é£¾ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;.<span class="w"> </span><span class="m">30</span><span class="w"> </span>IN<span class="w"> </span>A<span class="w"> </span><span class="m">10</span>.8.0.30
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13739">https://thinkit.co.jp/article/13739</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="04-cluster">04. Clusterãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#04-cluster" title="Permanent link">&para;</a></h2>
<h3 id="cluster">Clusterãƒªã‚½ãƒ¼ã‚¹ã¨ã¯<a class="headerlink" href="#cluster" title="Permanent link">&para;</a></h3>
<p>Clusterå…¨ä½“ã«æ¸¡ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/13542">https://thinkit.co.jp/article/13542</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="namespace">Namespace<a class="headerlink" href="#namespace" title="Permanent link">&para;</a></h3>
<h4 id="namespace_1">â–¼ Namespaceã¨ã¯<a class="headerlink" href="#namespace_1" title="Permanent link">&para;</a></h4>
<p>å„Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®å½±éŸ¿ç¯„å›²ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®é ˜åŸŸã®ã“ã¨ã€‚</p>
<p>NamespaceãŒç•°ãªã‚Œã°ã€<code>.metadata.labels</code>ã‚­ãƒ¼ã«åŒã˜å€¤ (ä¾‹ï¼šåŒã˜åå‰ã€ãªã©) ã‚’è¨­å®šã§ãã‚‹ã€‚</p>
<h4 id="namespace_2">â–¼ åˆæœŸNamespace<a class="headerlink" href="#namespace_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>åå‰</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default</code></td>
<td>ä»»æ„ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’é…ç½®ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td><code>kube-node-lease</code></td>
<td>Kubernetesãƒªã‚½ãƒ¼ã‚¹ã®ã†ã¡ã§ã€ç‰¹ã«Leaseã‚’é…ç½®ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td><code>kube-public</code></td>
<td>å…¨ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (<code>kubectl</code>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€Kubernetesãƒªã‚½ãƒ¼ã‚¹) ã«å…¬é–‹ã—ã¦ã‚‚è‰¯ã„Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’é…ç½®ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td><code>kube-system</code></td>
<td>KubernetesãŒè‡ªå‹•çš„ã«ä½œæˆã—ãŸKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚’é…ç½®ã™ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/#initial-namespaces">https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/#initial-namespaces</a></li>
</ul>
</blockquote>
<h4 id="namespaceterminating">â–¼ NamespaceãŒTerminatingã®ã¾ã¾ã«ãªã‚‹<a class="headerlink" href="#namespaceterminating" title="Permanent link">&para;</a></h4>
<p>ä»¥ä¸‹ã®æ–¹æ³•ã§å¯¾å‡¦ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://komeiy.hatenablog.com/entry/2019/07/28/232356">https://komeiy.hatenablog.com/entry/2019/07/28/232356</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="05">05. è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#05" title="Permanent link">&para;</a></h2>
<h3 id="_10">è¨­å®šç³»ãƒªã‚½ãƒ¼ã‚¹ã¨ã¯<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>ã‚³ãƒ³ãƒ†ãƒŠã§ä½¿ç”¨ã™ã‚‹å¤‰æ•°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã«é–¢ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚</p>
<p><br></p>
<h3 id="configmap">ConfigMap<a class="headerlink" href="#configmap" title="Permanent link">&para;</a></h3>
<h4 id="configmap_1">â–¼ ConfigMapã¨ã¯<a class="headerlink" href="#configmap_1" title="Permanent link">&para;</a></h4>
<p>ã‚³ãƒ³ãƒ†ãƒŠã§ä½¿ç”¨ã™ã‚‹æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒãƒ—å‹ã§ä¿æŒã§ãã‚‹ã€‚</p>
<p>æ”¹è¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å€¤ã«æ ¼ç´ã§ãã‚‹ã€‚</p>
<h4 id="_11">â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>å¤‰æ•°</th>
<th>ä½•ã®ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã®ã‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>DBãƒ›ã‚¹ãƒˆå</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€DBã®ãƒ›ã‚¹ãƒˆåã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>DBãƒãƒ¼ãƒˆç•ªå·</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€DBã®ãƒãƒ¼ãƒˆç•ªå·ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>DBæ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>DBæ¥ç¶šå†è©¦è¡Œæ•°</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€å†è©¦è¡Œã®å›æ•°ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="secret">Secret<a class="headerlink" href="#secret" title="Permanent link">&para;</a></h3>
<h4 id="secret_1">â–¼ Secretã¨ã¯<a class="headerlink" href="#secret_1" title="Permanent link">&para;</a></h4>
<p>ã‚³ãƒ³ãƒ†ãƒŠã§ä½¿ç”¨ã™ã‚‹æ©Ÿå¯†ãªå¤‰æ•°ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼å‹ã§æ°¸ç¶šåŒ–ã™ã‚‹ã€‚</p>
<p>æ°¸ç¶šåŒ–ã•ã‚Œã¦ã„ã‚‹é–“ã¯<code>base64</code>æ–¹å¼ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ãŸä¸Šã§ã€å¤‰æ•°ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å¯¾è±¡ã®Podã«å‡ºåŠ›ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/configuration/secret/#uses-for-secrets">https://kubernetes.io/docs/concepts/configuration/secret/#uses-for-secrets</a></li>
</ul>
</blockquote>
<h4 id="_12">â–¼ æ©Ÿå¯†ã§ã¯ãªã„å¤‰æ•°ã®ä¾‹<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>å¤‰æ•°</th>
<th>ä½•ã®ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã®ã‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>DBãƒ¦ãƒ¼ã‚¶ãƒ¼å</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>DBãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</td>
<td>ã‚³ãƒ³ãƒ†ãƒŠãŒDBã«æ¥ç¶šã™ã‚‹æ™‚ã«ã€DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<h4 id="_13">â–¼ ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ—ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>Podã®èµ·å‹•æ™‚ã«ã€kubectlã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«ã™ã‚‹ã€‚</p>
<p>Secretã«æ°¸ç¶šåŒ–ã•ã‚ŒãŸå€¤ã‚’å¾©å·åŒ–ã—ã€<code>kubectl</code>ã‚³ãƒãƒ³ãƒ‰ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦å‡ºåŠ›ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-imagepullsecrets">https://kubernetes.io/docs/concepts/configuration/secret/#using-imagepullsecrets</a></li>
</ul>
</blockquote>
<h4 id="_14">â–¼ ã‚³ãƒ³ãƒ†ãƒŠã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>æ°¸ç¶šåŒ–ã•ã‚ŒãŸå€¤ã‚’å¾©å·åŒ–ã—ã€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠã«ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦å‡ºåŠ›ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables">https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="06">06. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#06" title="Permanent link">&para;</a></h2>
<h3 id="_15">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»ãƒªã‚½ãƒ¼ã‚¹ã®ç¨®é¡<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>Kubernetesã§ä½œæˆã§ãã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ã€ä½œæˆå ´æ‰€ã§ç¨®é¡ã‚’åˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚</p>
<p><img alt="kubernetes_storage_resource_types.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_storage_resource_types.png" /></p>
<table>
<thead>
<tr>
<th>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ç¨®é¡</th>
<th>Volume</th>
<th>PersistentVolume</th>
</tr>
</thead>
<tbody>
<tr>
<td>Podå†…ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td>
<td>EmptyDir</td>
<td>ãªã—</td>
</tr>
<tr>
<td>Nodeå†…ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td>
<td>HostPath</td>
<td>HostPathã€Local</td>
</tr>
<tr>
<td>Nodeå¤–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td>
<td>å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td>
<td>å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/">https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="persistentvolume_1">PersistentVolume<a class="headerlink" href="#persistentvolume_1" title="Permanent link">&para;</a></h3>
<h4 id="persistentvolume_2">â–¼ PersistentVolumeã¨ã¯<a class="headerlink" href="#persistentvolume_2" title="Permanent link">&para;</a></h4>
<p><img alt="storage_class.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/storage_class.png" /></p>
<p>Nodeä¸Šã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šã«Volumeã‚’ä½œæˆã™ã‚‹ã€‚</p>
<p>Nodeä¸Šã®Podé–“ã§Volumeã‚’å…±æœ‰ã§ãã€åŒä¸€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã§ã‚‚Volumeã‚’å…±æœ‰ã§ãã‚‹ã€‚</p>
<p>PodãŒPersistentVolumeã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€PersistentVolumeClaimã«PersistentVolumeã‚’è¦æ±‚ã•ã›ã¦ãŠãã€Podã§ã“ã®PersistentVolumeClaimã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’å¤‰æ›´ã—ãŸå ´åˆã¯ã€PersistentVolumeã‚’å†ä½œæˆã—ãªã„ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®èª­ã¿å‡ºã—ã§ãƒ‘ã‚¹ã‚’è§£æ±ºã§ããªã„å ´åˆãŒã‚ã‚‹ã€‚</p>
<p>Dockerã®Volumeã¨ã¯ç‹¬ç«‹ã—ãŸæ©Ÿèƒ½ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/14195">https://thinkit.co.jp/article/14195</a></li>
<li><a href="https://stackoverflow.com/questions/62312227/docker-volume-and-kubernetes-volume">https://stackoverflow.com/questions/62312227/docker-volume-and-kubernetes-volume</a></li>
<li><a href="https://stackoverflow.com/questions/53062547/docker-volume-vs-kubernetes-persistent-volume">https://stackoverflow.com/questions/53062547/docker-volume-vs-kubernetes-persistent-volume</a></li>
<li><a href="https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/">https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/</a></li>
</ul>
</blockquote>
<h4 id="persistentvolume-crashloopbackoff">â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã§ãªã„å ´åˆ)<a class="headerlink" href="#persistentvolume-crashloopbackoff" title="Permanent link">&para;</a></h4>
<p>Podå†…ã§<code>df</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€PersistentVolumeã®ä½¿ç”¨ç‡ã‚’ç¢ºèªã§ãã‚‹ã€‚</p>
<p>å‡ºåŠ›çµæœã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ä½¿ç”¨ç‡ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-n<span class="w"> </span>prometheus<span class="w"> </span>foo-pod<span class="w"> </span>--<span class="w"> </span>df<span class="w"> </span>-hT
</code></pre></div>
<p>ãŸã ã—ã€CrashLoopBackOffãªã©ãŒç†ç”±ã§ã€ã‚³ãƒ³ãƒ†ãƒŠãŒãã‚‚ãã‚‚èµ·å‹•ã—ãªã„å ´åˆã€ã“ã®æ–¹æ³•ã§ç¢ºèªã§ããªã„ã€‚</p>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/53200828/how-to-identify-the-storage-space-left-in-a-persistent-volume-claim">https://stackoverflow.com/questions/53200828/how-to-identify-the-storage-space-left-in-a-persistent-volume-claim</a></li>
</ul>
</blockquote>
<p>ã¾ãŸã€Grafanaã®kubernetes-mixinsã«ã¯ã€èµ·å‹•ä¸­ã®Podã®PersistentVolumeã®ä½¿ç”¨ç‡ã‚’å¯è¦–åŒ–ã§ãã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒã‚ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://github.com/monitoring-mixins/website/blob/master/assets/kubernetes/dashboards/persistentvolumesusage.json">https://github.com/monitoring-mixins/website/blob/master/assets/kubernetes/dashboards/persistentvolumesusage.json</a></li>
</ul>
</blockquote>
<h4 id="persistentvolume-crashloopbackoff_1">â–¼ PersistentVolumeã®ä½¿ç”¨ç‡ã®ç¢ºèªæ–¹æ³• (CrashLoopBackOffã®å ´åˆ)<a class="headerlink" href="#persistentvolume-crashloopbackoff_1" title="Permanent link">&para;</a></h4>
<p>ã“ã“ã§ã¯ã€Prometheusã‚’ä¾‹ã«æŒ™ã’ã‚‹ã€‚</p>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p>Prometheusã®Podã«ç´ã¥ãPersistentVolumeã¯ã€æœ€å¤§200Giã‚’è¦æ±‚ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pvc<span class="w"> </span>foo-prometheus-pvc<span class="w"> </span>-n<span class="w"> </span>prometheus
NAME<span class="w">                 </span>STATUS<span class="w">   </span>VOLUME<span class="w">      </span>CAPACITY<span class="w">   </span>ACCESS<span class="w"> </span>MODES<span class="w">   </span>STORAGECLASS<span class="w">    </span>AGE
foo-prometheus-pvc<span class="w">   </span>Bound<span class="w">    </span>pvc-*****<span class="w">   </span>200Gi<span class="w">      </span>RWO<span class="w">            </span>gp3-encrypted<span class="w">   </span>181d
</code></pre></div>
<dl>
<dt><code>(2)</code></dt>
<dd>
<p>Nodeå†… (AWS EKSã®EC2ãƒ¯ãƒ¼ã‚«ãƒ¼Nodeã®å ´åˆ) ã§ã€Podã«ç´ã¥ãPersistentVolumeãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã™ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>-la<span class="w"> </span>/var/lib/kubelet/plugins/kubernetes.io/aws-ebs/mounts/aws/&lt;ãƒªãƒ¼ã‚¸ãƒ§ãƒ³&gt;/vol-*****/prometheus-db/

-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">         </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">17</span>:07<span class="w"> </span><span class="m">00004931</span>
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">         </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">17</span>:09<span class="w"> </span><span class="m">00004932</span>
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">         </span><span class="m">0</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">17</span>:12<span class="w"> </span><span class="m">00004933</span>

...

drwxrwsr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">      </span><span class="m">4096</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">18</span>:00<span class="w"> </span>checkpoint.00002873.tmp
drwxrwsr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">      </span><span class="m">4096</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">02</span>:00<span class="w"> </span>checkpoint.00002898
drwxrwsr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>ec2-user<span class="w"> </span><span class="m">2000</span><span class="w">      </span><span class="m">4096</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">04</span>:00<span class="w"> </span>checkpoint.00002911.tmp
</code></pre></div>
<dl>
<dt><code>(3)</code></dt>
<dd>
<p><code>df</code>ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ä½¿ç”¨ç‡ã‚’ç¢ºèªã™ã‚‹ã€‚Nodeã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’ç¢ºèªã™ã‚‹ã¨ã€197Gã¨ãªã£ã¦ã„ã‚‹ã€‚ PersistentVolumeã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>df<span class="w"> </span>-h<span class="w"> </span>/var/lib/kubelet/plugins/kubernetes.io/aws-ebs/mounts/aws/ap-northeast-1a/vol-*****/prometheus-db/

Filesystem<span class="w">      </span>Size<span class="w">  </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
/dev/nvme8n1<span class="w">    </span>197G<span class="w">  </span>197G<span class="w">     </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>%<span class="w"> </span>/var/lib/kubelet/plugins/kubernetes.io/aws-ebs/mounts/aws/ap-northeast-1a/vol-*****
</code></pre></div>
<h4 id="hostpath">â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)<a class="headerlink" href="#hostpath" title="Permanent link">&para;</a></h4>
<p>Nodeã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šã«Volumeã‚’ä½œæˆã—ã€ã“ã‚Œã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>æ©Ÿèƒ½ã¨ã—ã¦ã¯ã€Volumeã®ä¸€ç¨®ã§ã‚ã‚‹HostPathã¨åŒã˜ã§ã‚ã‚‹ã€‚</p>
<p>ãƒãƒ«ãƒNodeã«ã¯å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€æœ¬ç•ªç’°å¢ƒã§ã¯éæ¨å¥¨ã§ã‚ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#types-of-persistent-volumes">https://kubernetes.io/docs/concepts/storage/persistent-volumes/#types-of-persistent-volumes</a></li>
<li><a href="https://thenewstack.io/10-kubernetes-best-practices-you-can-easily-apply-to-your-clusters/">https://thenewstack.io/10-kubernetes-best-practices-you-can-easily-apply-to-your-clusters/</a></li>
</ul>
</blockquote>
<h4 id="local">â–¼ Local (æœ¬ç•ªç’°å¢ƒã§æ¨å¥¨)<a class="headerlink" href="#local" title="Permanent link">&para;</a></h4>
<p>Nodeä¸Šã«Volumeã‚’ä½œæˆã—ã€ã“ã‚Œã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>ãƒãƒ«ãƒNodeã«å¯¾å¿œã—ã¦ã„ã‚‹ (æ˜è¨€ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãã€HostPathã¨ã®æ˜ç¢ºãªé•ã„ãŒã‚ˆãã‚ã‹ã‚‰ãªã„) ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/storage/volumes/#local">https://kubernetes.io/docs/concepts/storage/volumes/#local</a></li>
<li><a href="https://qiita.com/sotoiwa/items/09d2f43a35025e7be782#local">https://qiita.com/sotoiwa/items/09d2f43a35025e7be782#local</a></li>
</ul>
</blockquote>
<h4 id="volume">â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume<a class="headerlink" href="#volume" title="Permanent link">&para;</a></h4>
<p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ (ä¾‹ï¼šAWS EBSã€NFSã€ãªã©) ãŒæä¾›ã™ã‚‹Volumeã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>StorageClassã¨PersistentVolumeClaimã‚’ä»‹ã—ã¦ã€PersistentVolumeã¨å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç´ä»˜ã‘ã€Volumeã¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>ã¾ãŸã€å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã«ã¯ã€CSIãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚‚å¿…è¦ã§ã‚ã‚‹ã€‚</p>
<p><img alt="storage_class.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/storage_class.png" /></p>
<p><br></p>
<h3 id="volume_1">Volume<a class="headerlink" href="#volume_1" title="Permanent link">&para;</a></h3>
<h4 id="volume_2">â–¼ Volumeã¨ã¯<a class="headerlink" href="#volume_2" title="Permanent link">&para;</a></h4>
<p><img alt="storage_class.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/storage_class.png" /></p>
<p>æ—¢å­˜ (ä¾‹ï¼šNFSã€iSCSIã€Cephã€ãªã©) ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ãã®ã¾ã¾Kubernetesã®Volumeã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚</p>
<p>Podã®<code>.spec.volumes</code>ã‚­ãƒ¼ã§æŒ‡å®šã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://thinkit.co.jp/article/14195">https://thinkit.co.jp/article/14195</a></li>
</ul>
</blockquote>
<p>Dockerã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¨ã¯ç‹¬ç«‹ã—ãŸæ©Ÿèƒ½ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Podã«æ¥ç¶šã™ã‚‹</span>
$<span class="w"> </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;Podå&gt;<span class="w"> </span>-c<span class="w"> </span>&lt;ã‚³ãƒ³ãƒ†ãƒŠå&gt;<span class="w"> </span>--<span class="w"> </span>bash

<span class="c1"># ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹</span>
<span class="o">[</span>root@&lt;Podå&gt;:/var/www/html<span class="o">]</span><span class="w"> </span>$<span class="w"> </span>df<span class="w"> </span>-h

Filesystem<span class="w">      </span>Size<span class="w">  </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
overlay<span class="w">          </span>59G<span class="w">   </span>36G<span class="w">   </span>20G<span class="w">  </span><span class="m">65</span>%<span class="w"> </span>/
tmpfs<span class="w">            </span>64M<span class="w">     </span><span class="m">0</span><span class="w">   </span>64M<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/dev
tmpfs<span class="w">           </span><span class="m">3</span>.9G<span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">3</span>.9G<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup
/dev/vda1<span class="w">        </span>59G<span class="w">   </span>36G<span class="w">   </span>20G<span class="w">  </span><span class="m">65</span>%<span class="w"> </span>/etc/hosts
shm<span class="w">              </span>64M<span class="w">     </span><span class="m">0</span><span class="w">   </span>64M<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/dev/shm
overlay<span class="w">          </span>59G<span class="w">   </span>36G<span class="w">   </span>20G<span class="w">  </span><span class="m">65</span>%<span class="w"> </span>/var/www/foo<span class="w"> </span><span class="c1"># ä½œæˆã—ãŸãƒœãƒªãƒ¥ãƒ¼ãƒ </span>
tmpfs<span class="w">           </span><span class="m">7</span>.8G<span class="w">   </span>12K<span class="w">  </span><span class="m">7</span>.8G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/run/secrets/kubernetes.io/serviceaccount
tmpfs<span class="w">           </span><span class="m">3</span>.9G<span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">3</span>.9G<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/proc/acpi
tmpfs<span class="w">           </span><span class="m">3</span>.9G<span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">3</span>.9G<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/sys/firmware
</code></pre></div>
<p>PodãŒæŒã¤Volumeã®ä¸€è¦§ã¯ã€<code>kubectl describe</code>ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pod

...

Volumes:
<span class="w">  </span>foo-volume:
<span class="w">    </span>Type:<span class="w">       </span>EmptyDir<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>temporary<span class="w"> </span>directory<span class="w"> </span>that<span class="w"> </span>shares<span class="w"> </span>a<span class="w"> </span>pod<span class="s1">&#39;s lifetime)</span>
<span class="s1">    Medium:</span>
<span class="s1">    SizeLimit:  &lt;unset&gt;</span>
<span class="s1">  bar-volume:</span>
<span class="s1">    Type:       EmptyDir (a temporary directory that shares a pod&#39;</span>s<span class="w"> </span>lifetime<span class="o">)</span>
<span class="w">    </span>Medium:
<span class="w">    </span>SizeLimit:<span class="w">  </span>&lt;unset&gt;
<span class="w">  </span>baz-volume:
<span class="w">    </span>Type:<span class="w">      </span>ConfigMap<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>volume<span class="w"> </span>populated<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>ConfigMap<span class="o">)</span>
<span class="w">    </span>Name:<span class="w">      </span>baz-cm
<span class="w">    </span>Optional:<span class="w">  </span><span class="nb">false</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/62312227/docker-volume-and-kubernetes-volume">https://stackoverflow.com/questions/62312227/docker-volume-and-kubernetes-volume</a></li>
<li><a href="https://stackoverflow.com/questions/53062547/docker-volume-vs-kubernetes-persistent-volume">https://stackoverflow.com/questions/53062547/docker-volume-vs-kubernetes-persistent-volume</a></li>
</ul>
</blockquote>
<h4 id="hostpath_1">â–¼ HostPath (æœ¬ç•ªç’°å¢ƒã§éæ¨å¥¨)<a class="headerlink" href="#hostpath_1" title="Permanent link">&para;</a></h4>
<p>Nodeä¸Šã®æ—¢å­˜ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šã«Volumeã‚’ä½œæˆã—ã€ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆã¯Nodeã¨Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã§å®Ÿè¡Œã•ã‚Œã€åŒä¸€Nodeä¸Šã®Podé–“ã§ã“ã®Volumeã‚’å…±æœ‰ã§ãã€åŒä¸€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã§ã‚‚Volumeã‚’å…±æœ‰ã§ãã‚‹ã€‚</p>
<p>ã¾ãŸã€PodãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚ã“ã®Volumeã¯å‰Šé™¤ã•ã‚Œãªã„ã€‚</p>
<p>HostPathã¯éæ¨å¥¨ã§ã‚ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Nodeå†…ã§dockerã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ</span>
$<span class="w"> </span>docker<span class="w"> </span>inspect<span class="w"> </span>&lt;ã‚³ãƒ³ãƒ†ãƒŠID&gt;

<span class="w">    </span><span class="o">{</span>

<span class="w">        </span>...

<span class="w">        </span><span class="s2">&quot;HostConfig&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="s2">&quot;Binds&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">                </span><span class="s2">&quot;/data:/var/www/foo&quot;</span>,
<span class="w">                </span><span class="s2">&quot;/var/lib/kubelet/pods/&lt;Podã®UUID&gt;/volumes/kubernetes.io~projected/kube-api-access-*****:/var/run/secrets/kubernetes.io/serviceaccount:ro&quot;</span>,
<span class="w">                </span><span class="s2">&quot;/var/lib/kubelet/pods/&lt;Podã®UUID&gt;/etc-hosts:/etc/hosts&quot;</span>,
<span class="w">                </span><span class="s2">&quot;/var/lib/kubelet/pods/&lt;Podã®UUID&gt;/containers/foo/*****:/dev/termination-log&quot;</span>
<span class="w">            </span><span class="o">]</span>,

<span class="w">            </span>...
<span class="w">        </span><span class="o">}</span>,

<span class="w">        </span>...

<span class="w">        </span><span class="s2">&quot;Mounts&quot;</span>:<span class="w"> </span><span class="o">[</span>

<span class="w">            </span>...

<span class="w">            </span><span class="o">{</span>
<span class="w">                </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;bind&quot;</span>,<span class="w"> </span><span class="c1"># ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã€‚</span>
<span class="w">                </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/data&quot;</span>,
<span class="w">                </span><span class="s2">&quot;Destination&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/www/foo&quot;</span>,
<span class="w">                </span><span class="s2">&quot;Mode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">                </span><span class="s2">&quot;RW&quot;</span>:<span class="w"> </span>true,
<span class="w">                </span><span class="s2">&quot;Propagation&quot;</span>:<span class="w"> </span><span class="s2">&quot;rprivate&quot;</span>
<span class="w">            </span><span class="o">}</span>,

<span class="w">            </span>...
<span class="w">        </span><span class="o">]</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://thenewstack.io/10-kubernetes-best-practices-you-can-easily-apply-to-your-clusters/">https://thenewstack.io/10-kubernetes-best-practices-you-can-easily-apply-to-your-clusters/</a></li>
<li><a href="https://qiita.com/umkyungil/items/218be95f7a1f8d881415">https://qiita.com/umkyungil/items/218be95f7a1f8d881415</a></li>
</ul>
</blockquote>
<h4 id="emptydir">â–¼ EmptyDir<a class="headerlink" href="#emptydir" title="Permanent link">&para;</a></h4>
<p>Podã®æ—¢å­˜ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šã«Volume (<code>/var/lib/kubelet/pods/&lt;Podã®UUID&gt;/volumes/kubernetes.io~empty-dir/</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª) ã‚’ä½œæˆã—ã€ã‚³ãƒ³ãƒ†ãƒŠã«ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>åŒä¸€Nodeä¸Šã®Podé–“ã§ã“ã®Volumeã‚’å…±æœ‰ã§ããšã€åŒä¸€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã§ã¯Volumeã‚’å…±æœ‰ã§ãã‚‹ã€‚</p>
<p>ã¾ãŸã€PodãŒå‰Šé™¤ã•ã‚Œã‚‹ã¨ã“ã®Volumeã‚‚åŒæ™‚ã«å‰Šé™¤ã•ã‚Œã¦ã—ã¾ã†ã€‚</p>
<p>ä¿æŒæœŸé–“ã‚’è¨­å®šã§ãã‚‹ãƒ„ãƒ¼ãƒ« (ä¾‹ï¼šPrometheusã€Victoria Metricsã€ãªã©) ã«ã¦ã€Podã®Volumeã‚’EmptyDirã¨ã—ã¦ã„ã‚‹å ´åˆã€Podã‚’ä¿æŒæœŸé–“ã‚ˆã‚Šå…ˆã«å‰Šé™¤ã™ã‚‹ã¨ã€ä¿æŒæœŸé–“ã‚’å¾…ãŸãšã«Volumeã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã—ã¾ã†ã€‚</p>
<blockquote>
<ul>
<li><a href="https://qiita.com/umkyungil/items/218be95f7a1f8d881415">https://qiita.com/umkyungil/items/218be95f7a1f8d881415</a></li>
<li><a href="https://cstoku.dev/posts/2018/k8sdojo-05/">https://cstoku.dev/posts/2018/k8sdojo-05/</a></li>
</ul>
</blockquote>
<h4 id="volume_3">â–¼ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®Volume<a class="headerlink" href="#volume_3" title="Permanent link">&para;</a></h4>
<p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ (ä¾‹ï¼šAWS EBSã€NFSã€ãªã©) ãŒæä¾›ã™ã‚‹Volumeã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚</p>
<p>åŒä¸€Nodeä¸Šã®Podé–“ã§ã“ã®Volumeã‚’å…±æœ‰ã§ãã€åŒä¸€Podå†…ã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã§ã‚‚Volumeã‚’å…±æœ‰ã§ãã‚‹ã€‚</p>
<p>ã¾ãŸã€PodãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚ã“ã®Volumeã¯å‰Šé™¤ã•ã‚Œãªã„ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/storage/volumes/">https://kubernetes.io/docs/concepts/storage/volumes/</a></li>
<li><a href="https://zenn.dev/suiudou/articles/31ab107f3c2de6#%E2%96%A0kubernetes%E3%81%AE%E3%81%84%E3%82%8D%E3%82%93%E3%81%AA%E3%83%9C%E3%83%AA%E3%83%A5%E3%83%BC%E3%83%A0">https://zenn.dev/suiudou/articles/31ab107f3c2de6#%E2%96%A0kubernetes%E3%81%AE%E3%81%84%E3%82%8D%E3%82%93%E3%81%AA%E3%83%9C%E3%83%AA%E3%83%A5%E3%83%BC%E3%83%A0</a></li>
</ul>
</blockquote>
<h4 id="volumepersistentvolume">â–¼ Volumeã®ä»£ã‚ã‚Šã«PersistentVolumeã‚’ä½¿ç”¨ã™ã‚‹<a class="headerlink" href="#volumepersistentvolume" title="Permanent link">&para;</a></h4>
<p>Podã®<code>.spec.volumes</code>ã‚­ãƒ¼ã§PersistentVolumeClaimã‚’å®£è¨€ã™ã‚Œã°ã€Volumeã®ä»£ã‚ã‚Šã«PersistentVolumeã‚’ä½¿ç”¨ã§ãã‚‹ã€‚</p>
<p><br></p>
<h2 id="06-02">06-02. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¦æ±‚ç³»<a class="headerlink" href="#06-02" title="Permanent link">&para;</a></h2>
<h3 id="persistentvolumeclaim">PersistentVolumeClaim<a class="headerlink" href="#persistentvolumeclaim" title="Permanent link">&para;</a></h3>
<h4 id="persistentvolumeclaim_1">â–¼ PersistentVolumeClaimã¨ã¯<a class="headerlink" href="#persistentvolumeclaim_1" title="Permanent link">&para;</a></h4>
<p>è¨­å®šã•ã‚ŒãŸæ¡ä»¶ã«åŸºã¥ã„ã¦ã€Kubernetesã§ä½œæˆæ¸ˆã¿ã®PersistentVolumeã‚’è¦æ±‚ã—ã€æŒ‡å®šã—ãŸKubernetesãƒªã‚½ãƒ¼ã‚¹ã«å‰²ã‚Šå½“ã¦ã‚‹ã€‚</p>
<p><img alt="storage_class.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/storage_class.png" /></p>
<blockquote>
<ul>
<li><a href="https://garafu.blogspot.com/2019/07/k8s-pv-and-pvc.html">https://garafu.blogspot.com/2019/07/k8s-pv-and-pvc.html</a></li>
</ul>
</blockquote>
<h4 id="_16">â–¼ å‰Šé™¤ã§ããªã„<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>PersistentVolumeClaimã‚’å‰Šé™¤ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€<code>.metadata.finalizers</code>ã‚­ãƒ¼é…ä¸‹ã«<code>kubernetes.io/pvc-protection</code>å€¤ãŒè¨­å®šã•ã‚Œã€å‰Šé™¤ã§ããªããªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">finalizers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/pvc-protection</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-persistent-volume-claim</span>
<span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p>ã“ã®å ´åˆã€<code>kubectl edit</code>ã‚³ãƒãƒ³ãƒ‰ãªã©ã§<code>.metadata.finalizers</code>ã‚­ãƒ¼ã‚’ç©ºé…åˆ—ã«ç·¨é›†ã¨ã€å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>edit<span class="w"> </span>pvc<span class="w"> </span>&lt;PersistentVolumeClaimå&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">finalizers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-persistent-volume-claim</span>
<span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://qiita.com/dss_hashimoto/items/8cbf834c504e57fbe1ff">https://qiita.com/dss_hashimoto/items/8cbf834c504e57fbe1ff</a></li>
</ul>
</blockquote>
<h4 id="node-affinity-conflict">â–¼ node affinity conflict<a class="headerlink" href="#node-affinity-conflict" title="Permanent link">&para;</a></h4>
<p>PersistentVolumeClaimã¯ã€<code>annotation</code>ã‚­ãƒ¼é…ä¸‹ã®<code>volume.kubernetes.io/selected-node</code>ã‚­ãƒ¼ã§ã€ç´ã¥ãPersistentVolumeãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹Nodeåã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚</p>
<p>PersistentVolumeClaimã¯ã€æ¡ä»¶ã«å¿œã˜ã¦PersistentVolumeã‚’æ¢ã™ã€‚</p>
<p>ã—ã‹ã—ã€PersistentVolumeClaimãŒ <code>volume.kubernetes.io/selected-node</code> ã‚­ãƒ¼ã§æŒ‡å®šã™ã‚‹Nodeã¨ã€PodãŒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹NodeãŒç•°ãªã‚‹AZã§ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†ã€‚</p>
<div class="highlight"><pre><span></span><code>N<span class="w"> </span>node<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>had<span class="w"> </span>volume<span class="w"> </span>node<span class="w"> </span>affinity<span class="w"> </span>conflict,<span class="w"> </span>N<span class="w"> </span>node<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>didn<span class="s1">&#39;t match Pod&#39;</span>s<span class="w"> </span>node<span class="w"> </span>affinity/selector
</code></pre></div>
<p>ã“ã‚ŒãŒèµ·ã“ã‚‹åŸå› ã¯æ§˜ã€…ã‚ã‚‹ (ä¾‹ï¼šNodeã®å†ä½œæˆæ™‚ã«Podã®ã‚ã‚‹Nodeã®AZãŒå¤‰ã‚ã‚‹ã€AWSã®ã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ç‰¹å®šã®AZã«ã—ã‹NodeãŒä½œæˆã•ã‚Œãªã„)ã€‚</p>
<p><strong>ï¼Šè§£æ±ºä¾‹ï¼Š</strong></p>
<p>ã“ã“ã§ã¯ã€Nodeã®å†ä½œæˆã§Podã®ã‚ã‚‹Nodeã®AZãŒå¤‰ã‚ã£ãŸå ´åˆã®è§£æ±ºç­–ã‚’è¨˜è¼‰ã™ã‚‹ã€‚</p>
<p>AWSã®ã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ç‰¹å®šã®AZã«ã—ã‹NodeãŒä½œæˆã•ã‚Œãªã„å•é¡Œã§ã¯å¯¾å‡¦ã§ããªã„ã€‚</p>
<p>ä¾‹ãˆã°ã€ã‚‚ã¨ã‚‚ã¨<code>a</code>ã‚¾ãƒ¼ãƒ³ã«ã„ã‚‹PodãŒNodeã®å†ä½œæˆã§å†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã€<code>c</code>ã‚¾ãƒ¼ãƒ³ã«ãªã£ãŸã¨ã™ã‚‹ã€‚</p>
<p>ã—ã‹ã—ã€Podã«ç´ã¥ãPersistentVolumeClaimã¯å…ƒã€…ã®<code>a</code>ã‚¾ãƒ¼ãƒ³ã®Nodeã®PersistentVolumeã‚’æŒ‡å®šã—ãŸã¾ã¾ã«ãªã£ã¦ãŠã‚Šã€<code>c</code>ã‚¾ãƒ¼ãƒ³ã®Podã¯<code>a</code>ã‚¾ãƒ¼ãƒ³ã®PersistentVolumeã‚’æŒ‡å®šã§ããªã„ãŸã‚ã€<code>volume node affinity conflict</code>ã«ãªã‚‹ã€‚</p>
<p>ä»¥ä¸‹ã®æ‰‹é †ã§ã€PersistentVolumeClaimã¨ã“ã‚Œã‚’æŒ‡å®šã™ã‚‹Podã®ä¸¡æ–¹ã‚’å†ä½œæˆã—ã€PersistentVolumeClaimã¯Podã¨åŒã˜ã‚¾ãƒ¼ãƒ³ã®PersistentVolumeã‚’æŒ‡å®šå¯èƒ½ã«ã™ã‚‹ã€‚</p>
<p>æ³¨æ„ç‚¹ã¨ã—ã¦ã€ä½•ã‚‰ã‹ã®ç†ç”± (ä¾‹ï¼šã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹) ã§ã€ç‰¹å®šã®AZã«Nodeã‚’é…ç½®ã§ããªã„å ´åˆã€ã“ã®æ‰‹é †ã§ã¯è§£æ±ºã§ããªã„ã€‚</p>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p>èµ·å‹•ã§ããªã„Podã‚’ã„ãšã‚Œã®Nodeã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªã™ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>&lt;Podå&gt;<span class="w"> </span>-o<span class="w"> </span>wide<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Node:
</code></pre></div>
<dl>
<dt><code>(2)</code></dt>
<dd>
<p>Nodeã®ã‚ã‚‹ã‚¾ãƒ¼ãƒ³ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>node<span class="w"> </span>&lt;Podã®ã‚ã‚‹Nodeå&gt;<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>topology.kubernetes.io
</code></pre></div>
<dl>
<dt><code>(3)</code></dt>
<dd>
<p>PersistentVolumeClaimã®<code>volume.kubernetes.io/selected-node</code>ã‚­ãƒ¼ã§ã€PodãŒã„ãšã‚Œã®Nodeã®PersistentVolumeã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
<p>ã“ã®Nodeåã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pvc<span class="w"> </span>&lt;PVCå&gt;<span class="w"> </span>-n<span class="w"> </span>prometheus<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>selected-node
</code></pre></div>
<dl>
<dt><code>(4)</code></dt>
<dd>
<p>Nodeã®ã‚ã‚‹ã‚¾ãƒ¼ãƒ³ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>node<span class="w"> </span>ip-*-*-*-*.ap-northeast-1.compute.internal<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>zone
</code></pre></div>
<dl>
<dt><code>(5)</code></dt>
<dd>
<p>(1)ã¨(4)ã®æ‰‹é †ã§ç¢ºèªã—ãŸNodeã®ã‚¾ãƒ¼ãƒ³ãŒç•°ãªã‚‹ã‚¾ãƒ¼ãƒ³ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
</dd>
<dt><code>(6)</code></dt>
<dd>
<p>PersistentVolumeClaimã‚’å‰Šé™¤ã™ã‚‹ã€‚</p>
<p>ã“ã®æ™‚PersistentVolumeã¯å‰Šé™¤ã•ã‚Œãªã„ãŸã‚ã€ä¿ç®¡ãƒ‡ãƒ¼ã‚¿ã¯å‰Šé™¤ã•ã‚Œãªã„ã€‚</p>
</dd>
<dt><code>(7)</code></dt>
<dd>
<p>StatefulSetè‡ªä½“ã‚’å†ä½œæˆã™ã‚‹ã€‚</p>
</dd>
<dt><code>(8)</code></dt>
<dd>
<p>StatefulSetãŒPersistentVolumeClaimã‚’æ–°ã—ãä½œæˆã™ã‚‹ã€‚</p>
</dd>
<dt><code>(9)</code></dt>
<dd>
<p>PersistentVolumeClaimãŒã€Podã¨åŒã˜ã‚¾ãƒ¼ãƒ³ã®PersistentVolumeã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p>
</dd>
</dl>
<blockquote>
<ul>
<li><a href="https://github.com/kubernetes/kubernetes/issues/74374#issuecomment-466191847">https://github.com/kubernetes/kubernetes/issues/74374#issuecomment-466191847</a></li>
<li><a href="https://stackoverflow.com/questions/51946393/kubernetes-pod-warning-1-nodes-had-volume-node-affinity-conflict">https://stackoverflow.com/questions/51946393/kubernetes-pod-warning-1-nodes-had-volume-node-affinity-conflict</a></li>
</ul>
</blockquote>
<h4 id="_17">â–¼ ã‚µã‚¤ã‚ºã‚’æ‹¡å¼µã™ã‚‹<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p>PVCã®å€¤ãŒå¤‰ã‚ã‚Œã°ã€ä½¿ç”¨ã™ã‚‹PVã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã€‚</p>
<p><code>--cascade</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§Podã‚’æ®‹ã—ã¦StatefulSetã‚’</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>patch<span class="w"> </span>prometheus<span class="w"> </span>foo<span class="w"> </span>--patch<span class="w"> </span><span class="s1">&#39;{&quot;spec&quot;: {&quot;paused&quot;: true, &quot;storage&quot;: {&quot;volumeClaimTemplate&quot;: {&quot;spec&quot;: {&quot;resources&quot;: {&quot;requests&quot;: {&quot;storage&quot;:&quot;10Gi&quot;}}}}}}}&#39;</span><span class="w"> </span>--type<span class="w"> </span>merge

$<span class="w"> </span>kubectl<span class="w"> </span>delete<span class="w"> </span>statefulset<span class="w"> </span>-l<span class="w"> </span>operator.prometheus.io/name<span class="o">=</span>foo-operator<span class="w"> </span>--cascade<span class="o">=</span>orphan
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/40335179/can-a-persistent-volume-be-resized">https://stackoverflow.com/questions/40335179/can-a-persistent-volume-be-resized</a></li>
<li><a href="https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/user-guides/storage.md#resizing-volumes">https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/user-guides/storage.md#resizing-volumes</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="storageclass">StorageClass<a class="headerlink" href="#storageclass" title="Permanent link">&para;</a></h3>
<h4 id="storageclass_1">â–¼ StorageClassã¨ã¯<a class="headerlink" href="#storageclass_1" title="Permanent link">&para;</a></h4>
<p>Kuberneteså¤–éƒ¨ã§ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã•ã‚ŒãŸã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (ä¾‹ï¼šAWS EBSã€Azure Diskã€ãªã©) ã‚’è¦æ±‚ã—ã€ã“ã‚Œã‚’Volumeã¨ã—ã¦PersistentVolumeClaimã«æä¾›ã™ã‚‹ã€‚</p>
<p>ãã®ãŸã‚ã€PersistentVolumeã‚‚åˆã‚ã›ã¦ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>StorageClassã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€PersistentVolumeClaimã§ã¯ãªãStorageClasså´ã§<code>reclaimPolicy</code>ã‚­ãƒ¼ã¨ã—ã¦è¨­å®šã™ã‚‹ã€‚</p>
<p><img alt="storage_class.png" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/storage_class.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/#using-dynamic-provisioning">https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/#using-dynamic-provisioning</a></li>
<li><a href="https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/">https://www.netone.co.jp/knowledge-center/netone-blog/20191206-1/</a></li>
</ul>
</blockquote>
<h4 id="aws-ebs">â–¼ AWS EBSã‚’è¦æ±‚ã™ã‚‹å ´åˆ<a class="headerlink" href="#aws-ebs" title="Permanent link">&para;</a></h4>
<p><code>reclaimPolicy</code>ãŒ<code>Delete</code>ã«ãªã£ã¦ã„ã‚‹PersistentVolumeClaimã‚’å‰Šé™¤ã™ã‚Œã°ã€StorageClassãŒAWS EBSã‚‚ã‚ˆã—ãªã«å‰Šé™¤ã—ã¦ãã‚Œã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://github.com/kubernetes-sigs/aws-ebs-csi-driver/issues/1071">https://github.com/kubernetes-sigs/aws-ebs-csi-driver/issues/1071</a></li>
</ul>
</blockquote>
<p><br></p>
<p><br></p>
<h2 id="07">07. èªè¨¼ç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#07" title="Permanent link">&para;</a></h2>
<h3 id="certificatesigningrequest">CertificateSigningRequest<a class="headerlink" href="#certificatesigningrequest" title="Permanent link">&para;</a></h3>
<h4 id="certificatesigningrequest_1">â–¼ CertificateSigningRequestã¨ã¯<a class="headerlink" href="#certificatesigningrequest_1" title="Permanent link">&para;</a></h4>
<p>èªè¨¼å±€ã«å¯¾ã™ã‚‹SSLè¨¼æ˜æ›¸ã®è¦æ±‚ (<code>openssl x509</code>ã‚³ãƒãƒ³ãƒ‰) ã‚’å®£è¨€çš„ã«è¨­å®šã™ã‚‹ã€‚</p>
<p>åˆ¥é€”ã€ç§˜å¯†éµã‹ã‚‰è¨¼æ˜æ›¸ç½²åè¦æ±‚ã‚’ä½œæˆã—ã€ã“ã‚Œã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://qiita.com/knqyf263/items/aefb0ff139cfb6519e27">https://qiita.com/knqyf263/items/aefb0ff139cfb6519e27</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="serviceaccount">ServiceAccount<a class="headerlink" href="#serviceaccount" title="Permanent link">&para;</a></h3>
<h4 id="serviceaccount_1">â–¼ ServiceAccountã¨ã¯<a class="headerlink" href="#serviceaccount_1" title="Permanent link">&para;</a></h4>
<p><img alt="kubernetes_authorization" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_authorization.png" /></p>
<p>kube-apiserverãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡å…ƒã‚’èªè¨¼å¯èƒ½ã«ã™ã‚‹ã€‚</p>
<p>kube-apiserverãŒã€Kubernetesãƒªã‚½ãƒ¼ã‚¹ (ç‰¹ã«Pod) ã‚’èªè¨¼å¯èƒ½ã«ã™ã‚‹ã€‚</p>
<p>åˆ¥é€”ã€RoleBindingã‚„ClusterRoleBindingã‚’ä½¿ç”¨ã—ã¦Kubernetesãƒªã‚½ãƒ¼ã‚¹ã«èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>æ¨™æº–ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ã«ã¯è‡ªå‹•çš„ã«ServiceAccountãŒè¨­å®šã•ã‚Œã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">https://kubernetes.io/docs/reference/access-authn-authz/authentication/</a></li>
<li><a href="https://tech-blog.cloud-config.jp/2021-12-04-kubernetes-authentication/">https://tech-blog.cloud-config.jp/2021-12-04-kubernetes-authentication/</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<h4 id="serviceaccount_2">â–¼ ServiceAccountã®ä»•çµ„ã¿<a class="headerlink" href="#serviceaccount_2" title="Permanent link">&para;</a></h4>
<p>ServiceAccountã¯ã€ServiceAccountæœ¬ä½“ã€service-account-controllerã€token-controllerã€service-account-admission-controllerã€ã¨ã„ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<table>
<thead>
<tr>
<th>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>service-account-controller</td>
<td>Namespaceå†…ã«<code>default</code>ã¨ã„ã†ServiceAccountã‚’è‡ªå‹•çš„ã«ä½œæˆã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>token-controller</td>
<td>ServiceAccountç”¨ã®Secretã®ä½œæˆã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã€Secretã«ãƒˆãƒ¼ã‚¯ãƒ³æ–‡å­—åˆ—ã‚’è¿½åŠ ã™ã‚‹ã€‚ä¸€æ–¹ã§ã€Secretã®å‰Šé™¤ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã€ServiceAccountã‹ã‚‰Secretã®æŒ‡å®šã‚’å‰Šé™¤ã™ã‚‹ã€‚ã¾ãŸã€ServiceAccountã®å‰Šé™¤ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã€token-controllerã¯Secretã®ãƒˆãƒ¼ã‚¯ãƒ³æ–‡å­—åˆ—ã‚’è‡ªå‹•çš„ã«å‰Šé™¤ã™ã‚‹ã€‚</td>
</tr>
<tr>
<td>service-account-admission-controller</td>
<td>AdmissionWebhookã®ä»•çµ„ã¿ã®ä¸­ã§ã€Podã®ä½œæˆæ™‚ã«ã€Volumeä¸Šã®<code>/var/run/secrets/kubernetes.io/serviceaccount</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã®æ–‡å­—åˆ—ã¯ã€<code>/var/run/secrets/kubernetes.io/serviceaccount/token</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/#control-plane-details">https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/#control-plane-details</a></li>
</ul>
</blockquote>
<h4 id="serviceaccount_3">â–¼ ServiceAccountã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å<a class="headerlink" href="#serviceaccount_3" title="Permanent link">&para;</a></h4>
<p>ç‰¹ã«ServiceAccountã«ã¯ã€ã‚ˆã‚Šæ­£ç¢ºãªå®šç¾©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒã‚ã‚‹ã€‚</p>
<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯ã€<code>system:serviceaccount:ï¼œNamespaceåï¼:ï¼œServiceAccountåï¼</code>ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<p>ã“ã‚Œã¯ã€RoleBindingã‚„ClusterBindingã®å®šç¾©æ™‚ã«ä½¿ç”¨ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#referring-to-subjects">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#referring-to-subjects</a></li>
<li><a href="https://knowledge.sakura.ad.jp/21129/">https://knowledge.sakura.ad.jp/21129/</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="useraccount">UserAccount<a class="headerlink" href="#useraccount" title="Permanent link">&para;</a></h3>
<h4 id="useraccount_1">â–¼ UserAccountã¨ã¯<a class="headerlink" href="#useraccount_1" title="Permanent link">&para;</a></h4>
<p><img alt="kubernetes_authorization" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_authorization.png" /></p>
<p>kube-apiserverãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡å…ƒã‚’èªè¨¼å¯èƒ½ã«ã™ã‚‹ã€‚</p>
<p>kube-apiserverãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’èªè¨¼å¯èƒ½ã«ã™ã‚‹ã€‚åˆ¥é€”ã€RoleBindingã‚„ClusterRoleBindingã‚’ä½¿ç”¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®èªè¨¼ã«å¿…è¦ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸ã¯ã€<code>kubeconfig</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">https://kubernetes.io/docs/reference/access-authn-authz/authentication/</a></li>
<li><a href="https://tech-blog.cloud-config.jp/2021-12-04-kubernetes-authentication/">https://tech-blog.cloud-config.jp/2021-12-04-kubernetes-authentication/</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="08">08. èªå¯ç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#08" title="Permanent link">&para;</a></h2>
<h3 id="roleclusterrole">Roleã€ClusterRole<a class="headerlink" href="#roleclusterrole" title="Permanent link">&para;</a></h3>
<h4 id="role">â–¼ Role<a class="headerlink" href="#role" title="Permanent link">&para;</a></h4>
<p>Namespacedã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ (Namespaceã‚’è¨­å®šã§ãã‚‹Kubernetesãƒªã‚½ãƒ¼ã‚¹) ã«é–¢ã™ã‚‹èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<p><img alt="kubernetes_authorization" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_authorization.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-and-clusterrole">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-and-clusterrole</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<h4 id="clusterrole">â–¼ ClusterRoleã¨ã¯<a class="headerlink" href="#clusterrole" title="Permanent link">&para;</a></h4>
<p>Clusterã‚¹ã‚³ãƒ¼ãƒ—ãªKubernetesãƒªã‚½ãƒ¼ã‚¹ã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ (Namespaceã‚’è¨­å®šã§ããªã„Kubernetesãƒªã‚½ãƒ¼ã‚¹) ã«é–¢ã™ã‚‹èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<p><img alt="kubernetes_authorization" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/kubernetes_authorization.png" /></p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-and-clusterrole">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-and-clusterrole</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<h4 id="rbacrole-based-access-control">â–¼ RBACï¼šRole-based access control<a class="headerlink" href="#rbacrole-based-access-control" title="Permanent link">&para;</a></h4>
<p>Roleã€ClusterRoleã€ã‚’ä½¿ç”¨ã—ã¦èªå¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åˆ¶å¾¡ã™ã‚‹ä»•çµ„ã¿ã®ã“ã¨ã€‚</p>
<blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">https://kubernetes.io/docs/reference/access-authn-authz/rbac/</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="rolebinding">RoleBinding<a class="headerlink" href="#rolebinding" title="Permanent link">&para;</a></h3>
<h4 id="clusterrolebinding">â–¼ ClusterRoleBinding<a class="headerlink" href="#clusterrolebinding" title="Permanent link">&para;</a></h4>
<p>ClusterRoleã‚’ã€UserAccount / ServiceAccount / Groupã«ç´ä»˜ã‘ã‚‹ã€‚</p>
<p>æ³¨æ„ç‚¹ã¨ã—ã¦ã€ClusterRoleã®ã¿ã®ç´ä»˜ã‘ã«ä½¿ç”¨ã§ãã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control?hl=ja">https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control?hl=ja</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#rolebinding-and-clusterrolebinding">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#rolebinding-and-clusterrolebinding</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<h4 id="rolebinding_1">â–¼ RoleBinding<a class="headerlink" href="#rolebinding_1" title="Permanent link">&para;</a></h4>
<p>Roleã‚„ClusterRoleã‚’ã€UserAccount / ServiceAccount / Groupã«ç´ä»˜ã‘ã‚‹ã€‚</p>
<p>æ³¨æ„ç‚¹ã¨ã—ã¦ã€Roleã¨ClusterRoleã®ä¸¡æ–¹ã®ç´ä»˜ã‘ã«ä½¿ç”¨ã§ãã‚‹ã€‚</p>
<p>ã‚‚ã—Roleã‚’ç´ã¥ã‘ãŸå ´åˆã¯ã€ãã®UserAccount / ServiceAccount / Groupã¯ã€Namespacedã‚¹ã‚³ãƒ¼ãƒ—ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã«é–¢ã™ã‚‹æ¨©é™ã‚’å¾—ã‚‹ã€‚</p>
<p>ã‚‚ã—ClusterRoleã‚’ç´ã¥ã‘ãŸå ´åˆã¯ã€ãã®UserAccount / ServiceAccount / Groupã¯ã€Clusterã‚¹ã‚³ãƒ¼ãƒ—ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã«é–¢ã™ã‚‹æ¨©é™ã‚’å¾—ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control?hl=ja">https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control?hl=ja</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#rolebinding-and-clusterrolebinding">https://kubernetes.io/docs/reference/access-authn-authz/rbac/#rolebinding-and-clusterrolebinding</a></li>
<li><a href="https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html">https://support.huaweicloud.com/intl/en-us/usermanual-cce/cce_01_0189.html</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="09">09. ãƒãƒªã‚·ãƒ¼ç³»ãƒªã‚½ãƒ¼ã‚¹<a class="headerlink" href="#09" title="Permanent link">&para;</a></h2>
<h3 id="networkpolicy">NetworkPolicy<a class="headerlink" href="#networkpolicy" title="Permanent link">&para;</a></h3>
<h4 id="networkpolicy_1">â–¼ NetworkPolicyã¨ã¯<a class="headerlink" href="#networkpolicy_1" title="Permanent link">&para;</a></h4>
<p>Podé–“é€šä¿¡ã§ã®ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰/ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®é€å—ä¿¡ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<blockquote>
<ul>
<li><a href="https://www.amazon.co.jp/dp/B08FZX8PYW">https://www.amazon.co.jp/dp/B08FZX8PYW</a></li>
<li><a href="https://qiita.com/dingtianhongjie/items/983417de88db2553f0c2">https://qiita.com/dingtianhongjie/items/983417de88db2553f0c2</a></li>
</ul>
</blockquote>
<h4 id="ingress_5">â–¼ Ingressã®å ´åˆ<a class="headerlink" href="#ingress_5" title="Permanent link">&para;</a></h4>
<p>ä»–ã®Podã‹ã‚‰ã®å—ä¿¡ã™ã‚‹ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<p>Ingressã¨ã¯é–¢ä¿‚ãŒãªã„ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚</p>
<h4 id="egress">â–¼ Egressã®å ´åˆ<a class="headerlink" href="#egress" title="Permanent link">&para;</a></h4>
<p>ä»–ã®Podã«é€ä¿¡ã™ã‚‹ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰é€šä¿¡ã®ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<p><br></p>

  <hr>
<div class="md-source-file">
  <small>
    
      æœ€çµ‚æ›´æ–°æ—¥:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-08-28</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/hiroki-it" target="_blank" rel="noopener" title="GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/Hiroki__IT" target="_blank" rel="noopener" title="Twitterã‚¢ã‚«ã‚¦ãƒ³ãƒˆ" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.prune", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>