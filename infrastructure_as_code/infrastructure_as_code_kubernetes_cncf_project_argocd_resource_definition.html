
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="リソース定義＠ArgoCDの知見を記録しています。">
      
      
        <meta name="author" content="Hiroki Hasegawa">
      
      
        <link rel="canonical" href="https://hiroki-it.github.io/tech-notebook/infrastructure_as_code/infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition.html">
      
      
        <link rel="prev" href="infrastructure_as_code_kubernetes_cncf_project_argocd_architecture_characteristics.html">
      
      
        <link rel="next" href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_common.html">
      
      
      <link rel="icon" href="../assets/images/logo_v2.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>【IT技術の知見】リソース定義＠ArgoCD - 俺の技術ノート</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Japanese:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans Japanese";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-HPJGWKTH9W"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-HPJGWKTH9W",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-HPJGWKTH9W",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dark" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#argocd" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="俺の技術ノート" class="md-header__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            俺の技術ノート
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              【IT技術の知見】リソース定義＠ArgoCD
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
    
  
  当サイトについて

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../about.html" class="md-tabs__link">
        
  
    
  
  『俺』

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../system/index.html" class="md-tabs__link">
          
  
    
  
  🌳 システム

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/index.html" class="md-tabs__link">
          
  
    
  
  🧬 ソフトウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/application/index.html" class="md-tabs__link">
          
  
    
  
  🚀 アプリ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/middleware/index.html" class="md-tabs__link">
          
  
    
  
  🤝🏻 ミドルウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/basic/index.html" class="md-tabs__link">
          
  
    
  
  🐧 OS

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../language/index.html" class="md-tabs__link">
          
  
    
  
  🔠 言語

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../testing/index.html" class="md-tabs__link">
          
  
    
  
  🧪 テスト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../hardware/index.html" class="md-tabs__link">
          
  
    
  
  💻 ハードウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../network/index.html" class="md-tabs__link">
          
  
    
  
  🌏 ネットワーク

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/index.html" class="md-tabs__link">
          
  
    
  
  🔐 セキュリティ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cloud_computing/index.html" class="md-tabs__link">
          
  
    
  
  ⛅️ 3大クラウド

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../virtualization/index.html" class="md-tabs__link">
          
  
    
  
  📦 仮想化

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="index.html" class="md-tabs__link">
          
  
    
  
  ⚙️ IaC

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="kubernetes/index.html" class="md-tabs__link">
          
  
    
  
  ☸️ K8s

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="kubernetes_addon/index.html" class="md-tabs__link">
          
  
    
  
  ⏬ K8sアドオン

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="cncf_projects/index.html" class="md-tabs__link">
          
  
    
  
  🌊 CNCF

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/index.html" class="md-tabs__link">
          
  
    
  
  ♾️ DevOps

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/cicd/index.html" class="md-tabs__link">
          
  
    
  
  🔄 CI/CD

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../observability/index.html" class="md-tabs__link">
          
  
    
  
  🔎 可観測性

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software_development_methodology/index.html" class="md-tabs__link">
          
  
    
  
  👥 開発手法

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="俺の技術ノート" class="md-nav__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    俺の技術ノート
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    当サイトについて
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../about.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    『俺』
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../system/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🌳 システム
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            🌳 システム
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../system/system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    システム
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../system/system_architecture_characteristics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アーキテクチャ特性
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../software/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🧬 ソフトウェア
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            🧬 ソフトウェア
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software/software.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ソフトウェア
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_policy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設計規約
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../software/application/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🚀 アプリ
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            🚀 アプリ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アーキテクチャ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../software/software_application_architecture_backend_object_orientation.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ バックエンドアーキテクチャ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_application_architecture_frontend.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ フロントエンドアーキテクチャ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_application_architecture_microservices.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ マイクロサービスアーキテクチャ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_application_collaboration_communication.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ アプリケーション間連携
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../software/middleware/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🤝🏻 ミドルウェア
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            🤝🏻 ミドルウェア
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../software/software_middleware_web_nginx.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Web系
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    
  
  
    <a href="../software/software_middleware_application_gi_fastcgi_php_fpm.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ アプリケーション系
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    
  
  
    <a href="../software/software_middleware_database_rdb_rdbms.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ データベース系
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_middleware_security_linux.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ セキュリティ系
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_middleware_service_mesh.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ サービスメッシュ系
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../software/basic/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🐧 OS
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            🐧 OS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_basic_linux_kernel.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Linuxカーネル
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_basic_utility.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ ユーティリティ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/software_basic_language_processor.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 言語プロセッサ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../language/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🔠 言語
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            🔠 言語
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../language/language_type.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    言語の種類
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../language/language_process_mode.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    言語別の処理方式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../language/language_data_description_language_json.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ データ記述言語
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../language/language_php.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ PHP
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../language/language_js_prototype_based.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ JavaScript
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../language/language_go.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Go
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../language/language_python.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Python
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../language/language_r.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    R
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../testing/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🧪 テスト
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            🧪 テスト
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../testing/testing_whitebox.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ ホワイトボックステスト
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../testing/testing_blackbox.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ ブラックボックステスト
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../hardware/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    💻 ハードウェア
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            💻 ハードウェア
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ハードウェア
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware_cpu.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware_memory.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    メモリ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware_storage.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ストレージ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware_embedded_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    組み込み機器
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../network/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🌏 ネットワーク
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            🌏 ネットワーク
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../network/network.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ネットワーク
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../network/network_model_osi.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ モデル
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../security/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🔐 セキュリティ
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12" id="__nav_12_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            🔐 セキュリティ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../security/security_cyber_attacks.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ サイバー攻撃
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../security/security_measures.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 対策
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../security/security_auth_authentication.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 認証/認可
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../cloud_computing/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⛅️ 3大クラウド
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_13" id="__nav_13_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            ⛅️ 3大クラウド
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_computing/cloud_computing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3大クラウド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../cloud_computing/cloud_computing_aws_cli.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ AWS
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../cloud_computing/cloud_computing_gcp_cli.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ GCP
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../virtualization/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    📦 仮想化
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_14" id="__nav_14_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            📦 仮想化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    仮想化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../virtualization/virtualization_container_docker.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ コンテナ型仮想化
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⚙️ IaC
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_15" id="__nav_15_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            ⚙️ IaC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IaC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_ansible.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 手続き型
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_docker_compose_command.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 宣言型
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="kubernetes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ☸️ K8s
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_16" id="__nav_16_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            ☸️ K8s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Kubernetes
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_architecture_characteristics_cluster.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ アーキテクチャ特性
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_resource.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Kubernetesリソース
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_custom_resource.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ カスタムリソース
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_hardware_resource_management_addon_resizer.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ ハードウェアリソース管理
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_development_client_package.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 開発
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_kubernetes_manifests_management_helm.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ マニフェスト管理
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="kubernetes_addon/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ⏬ K8sアドオン
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_17" id="__nav_17_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            ⏬ K8sアドオン
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_addon_component_control_plane_admission_controllers.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ コントロールプレーンアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_addon_ingress_controller.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Ingressコントローラーアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_addon_network_coredns.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ ネットワークアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_kubernetes_addon_secret_secrets_store_csi_driver.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Secretアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="infrastructure_as_code_kubernetes_addon_cloud_provider_aws_eks.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ クラウドプロバイダーアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="cncf_projects/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🌊 CNCF
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_18" id="__nav_18_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            🌊 CNCF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18_2" checked>
        
          
          <label class="md-nav__link" for="__nav_18_2" id="__nav_18_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ■ ArgoCD
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_18_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_18_2">
            <span class="md-nav__icon md-icon"></span>
            ■ ArgoCD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ArgoCD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_command.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コマンド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_policy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    設計規約
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_architecture_characteristics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    アーキテクチャ特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_18_2_5" id="__nav_18_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ■ リソース定義
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_18_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_18_2_5">
            <span class="md-nav__icon md-icon"></span>
            ■ リソース定義
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    リソース定義
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    リソース定義
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="このページの内容">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      このページの内容
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01. セットアップ
  </a>
  
    <nav class="md-nav" aria-label="01. セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ツールバージョン
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    AWS側
  </a>
  
    <nav class="md-nav" aria-label="AWS側">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terraform" class="md-nav__link">
    ▼ Terraformの公式モジュールの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    マニフェスト側
  </a>
  
    <nav class="md-nav" aria-label="マニフェスト側">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ 非チャートとして
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ▼ チャートとして
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator" class="md-nav__link">
    ▼ Operatorとして
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-02" class="md-nav__link">
    01-02. ダッシュボード
  </a>
  
    <nav class="md-nav" aria-label="01-02. ダッシュボード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ネットワークに公開しない場合
  </a>
  
    <nav class="md-nav" aria-label="ネットワークに公開しない場合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubectl" class="md-nav__link">
    ▼ kubectlコマンドを使用して
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argocd_1" class="md-nav__link">
    ▼ argocdコマンドを使用して
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ネットワークに公開する場合
  </a>
  
    <nav class="md-nav" aria-label="ネットワークに公開する場合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ 共通の手順
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ 開発環境の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▼ 本番環境
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-03" class="md-nav__link">
    01-03. マニフェスト
  </a>
  
    <nav class="md-nav" aria-label="01-03. マニフェスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    マニフェストの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploymentpod" class="md-nav__link">
    Deployment配下のPod
  </a>
  
    <nav class="md-nav" aria-label="Deployment配下のPod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argocd-server" class="md-nav__link">
    ▼ argocd-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repo-server" class="md-nav__link">
    ▼ repo-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-server" class="md-nav__link">
    ▼ redis-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dex-server" class="md-nav__link">
    ▼ dex-server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-controller" class="md-nav__link">
    ▼ application-controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-application" class="md-nav__link">
    02. Application
  </a>
  
    <nav class="md-nav" aria-label="02. Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    Applicationとは
  </a>
  
    <nav class="md-nav" aria-label="Applicationとは">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kuberneres" class="md-nav__link">
    ▼ Kuberneresリソースのポーリング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▼ 自己ポーリング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 操作の種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ ヘルスステータスの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    ▼ Namespace
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specignoredifferences" class="md-nav__link">
    .spec.ignoreDifferences
  </a>
  
    <nav class="md-nav" aria-label=".spec.ignoreDifferences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ignoredifferences" class="md-nav__link">
    ▼ ignoreDifferencesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#respectignoredifferences" class="md-nav__link">
    ▼ 合わせてRespectIgnoreDifferencesキーも使う
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specproject" class="md-nav__link">
    .spec.project
  </a>
  
    <nav class="md-nav" aria-label=".spec.project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project" class="md-nav__link">
    ▼ projectとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource" class="md-nav__link">
    .spec.source
  </a>
  
    <nav class="md-nav" aria-label=".spec.source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source" class="md-nav__link">
    ▼ sourceとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource_1" class="md-nav__link">
    .spec.source (マニフェストリポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (マニフェストリポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory" class="md-nav__link">
    ▼ directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    ▼ path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource_2" class="md-nav__link">
    .spec.source (チャートレジストリ内リポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (チャートレジストリ内リポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart" class="md-nav__link">
    ▼ chart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    ▼ helm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl_1" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision_1" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource-oci" class="md-nav__link">
    .spec.source (OCIレジストリ内リポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (OCIレジストリ内リポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart_1" class="md-nav__link">
    ▼ chart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm_1" class="md-nav__link">
    ▼ helm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl_2" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision_2" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specdestination" class="md-nav__link">
    .spec.destination
  </a>
  
    <nav class="md-nav" aria-label=".spec.destination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#destination" class="md-nav__link">
    ▼ destinationとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace_1" class="md-nav__link">
    ▼ namespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    ▼ server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsyncpolicy" class="md-nav__link">
    .spec.syncPolicy
  </a>
  
    <nav class="md-nav" aria-label=".spec.syncPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#syncpolicy" class="md-nav__link">
    ▼ syncPolicyとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated" class="md-nav__link">
    ▼ automated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncoptions" class="md-nav__link">
    ▼ syncOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-applicationset" class="md-nav__link">
    03. ApplicationSet
  </a>
  
    <nav class="md-nav" aria-label="03. ApplicationSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applicationset" class="md-nav__link">
    ApplicationSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-appproject" class="md-nav__link">
    04. AppProject
  </a>
  
    <nav class="md-nav" aria-label="04. AppProject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appproject" class="md-nav__link">
    AppProjectとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-appproject" class="md-nav__link">
    default AppProject
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsourcenamespaces" class="md-nav__link">
    spec.sourceNamespaces
  </a>
  
    <nav class="md-nav" aria-label="spec.sourceNamespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcenamespaces" class="md-nav__link">
    ▼ sourceNamespacesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    ▼ ConfigMap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaced" class="md-nav__link">
    ▼ デフォルトのNamespacedスコープモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcerepos" class="md-nav__link">
    sourceRepos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#destinations" class="md-nav__link">
    destinations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterresourcewhitelist" class="md-nav__link">
    clusterResourceWhitelist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaceresourcewhitelist" class="md-nav__link">
    namespaceResourceWhitelist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-argocd-notification" class="md-nav__link">
    05. ArgoCD Notification
  </a>
  
    <nav class="md-nav" aria-label="05. ArgoCD Notification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-configmanagementplugin" class="md-nav__link">
    06. ConfigManagementPlugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07-rollout" class="md-nav__link">
    07. Rollout
  </a>
  
    <nav class="md-nav" aria-label="07. Rollout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specanalysis" class="md-nav__link">
    .spec.analysis
  </a>
  
    <nav class="md-nav" aria-label=".spec.analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#analysis" class="md-nav__link">
    ▼ analysisとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#successfulrunhistorylimit" class="md-nav__link">
    ▼ successfulRunHistoryLimit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsuccessfulrunhistorylimit" class="md-nav__link">
    ▼ unsuccessfulRunHistoryLimit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specstrategy" class="md-nav__link">
    .spec.strategy
  </a>
  
    <nav class="md-nav" aria-label=".spec.strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strategy" class="md-nav__link">
    ▼ strategyとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bluegreen" class="md-nav__link">
    ▼ blueGreen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canary" class="md-nav__link">
    ▼ canary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08-workflow" class="md-nav__link">
    08. Workflow
  </a>
  
    <nav class="md-nav" aria-label="08. Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specentrypoint" class="md-nav__link">
    .spec.entrypoint
  </a>
  
    <nav class="md-nav" aria-label=".spec.entrypoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#entrypoint" class="md-nav__link">
    ▼ entrypointとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectemplates" class="md-nav__link">
    .spec.templates
  </a>
  
    <nav class="md-nav" aria-label=".spec.templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    ▼ templatesとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specworkflowtemplateref" class="md-nav__link">
    .spec.workflowTemplateRef
  </a>
  
    <nav class="md-nav" aria-label=".spec.workflowTemplateRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflowtemplateref" class="md-nav__link">
    ▼ workflowTemplateRefとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09-workflowtemplate" class="md-nav__link">
    09. WorkflowTemplate
  </a>
  
    <nav class="md-nav" aria-label="09. WorkflowTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spectemplates_1" class="md-nav__link">
    .spec.templates
  </a>
  
    <nav class="md-nav" aria-label=".spec.templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#templates_1" class="md-nav__link">
    ▼ templatesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#script" class="md-nav__link">
    ▼ script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    ▼ steps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    ConfigMap
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datatrigger" class="md-nav__link">
    ▼ data.trigger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataservice" class="md-nav__link">
    ▼ data.service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datatemplate" class="md-nav__link">
    ▼ data.template
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_common.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    共通項目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_plugin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プラグイン
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_auth.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    認証/認可系
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_configmap.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ConfigMap系
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_secret.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secret系
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_job.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job系
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_cert_manager_resource_definition.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ CertManager
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_fluentbit_fluentd.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ FluentBit/Fluentd
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_grafana.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Grafana
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_kyverno.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Kyverno
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_istio.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Istio
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_jaeger.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Jaeger
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_kiali.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Kiali
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_open_policy_agent.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ OpenPolicyAgent
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_prometheus.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Prometheus
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="infrastructure_as_code_kubernetes_cncf_project_vcluster.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ VCluster
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../devops/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ♾️ DevOps
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_19" id="__nav_19_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            ♾️ DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/devops.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ DevOps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../devops/devops_documentation.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 技術的要素
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/devops_culture.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 技術的要素
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_20" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../devops/cicd/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🔄 CI/CD
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_20" id="__nav_20_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_20">
            <span class="md-nav__icon md-icon"></span>
            🔄 CI/CD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_cicd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CI/CD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_cicd_deploy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    デプロイ手法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/devops_cicd_ci_github_actions.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ CIツール
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/devops_cicd_cd_argocd.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ CDツール
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/devops_cicd_auto_review_github_comment.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 自動レビューツール
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_21" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../observability/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🔎 可観測性
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_21" id="__nav_21_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_21">
            <span class="md-nav__icon md-icon"></span>
            🔎 可観測性
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    可観測性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../observability/observability_monitoring.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ 監視
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../observability/observability_telemetry.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ テレメトリー収集ツール
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../observability/observability_incident_management_pagerduty.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ インシデント管理ツール
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_22" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../software_development_methodology/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    👥 開発手法
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_22" id="__nav_22_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_22">
            <span class="md-nav__icon md-icon"></span>
            👥 開発手法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    開発手法論
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_organization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    組織論
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_project_management.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    プロジェクト管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../software_development_methodology/software_development_git_command.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ バージョン管理
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="このページの内容">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      このページの内容
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01. セットアップ
  </a>
  
    <nav class="md-nav" aria-label="01. セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ツールバージョン
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    AWS側
  </a>
  
    <nav class="md-nav" aria-label="AWS側">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terraform" class="md-nav__link">
    ▼ Terraformの公式モジュールの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    マニフェスト側
  </a>
  
    <nav class="md-nav" aria-label="マニフェスト側">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ 非チャートとして
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ▼ チャートとして
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator" class="md-nav__link">
    ▼ Operatorとして
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-02" class="md-nav__link">
    01-02. ダッシュボード
  </a>
  
    <nav class="md-nav" aria-label="01-02. ダッシュボード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ネットワークに公開しない場合
  </a>
  
    <nav class="md-nav" aria-label="ネットワークに公開しない場合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubectl" class="md-nav__link">
    ▼ kubectlコマンドを使用して
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argocd_1" class="md-nav__link">
    ▼ argocdコマンドを使用して
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ネットワークに公開する場合
  </a>
  
    <nav class="md-nav" aria-label="ネットワークに公開する場合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ 共通の手順
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ 開発環境の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▼ 本番環境
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-03" class="md-nav__link">
    01-03. マニフェスト
  </a>
  
    <nav class="md-nav" aria-label="01-03. マニフェスト">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    マニフェストの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploymentpod" class="md-nav__link">
    Deployment配下のPod
  </a>
  
    <nav class="md-nav" aria-label="Deployment配下のPod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argocd-server" class="md-nav__link">
    ▼ argocd-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repo-server" class="md-nav__link">
    ▼ repo-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-server" class="md-nav__link">
    ▼ redis-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dex-server" class="md-nav__link">
    ▼ dex-server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-controller" class="md-nav__link">
    ▼ application-controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-application" class="md-nav__link">
    02. Application
  </a>
  
    <nav class="md-nav" aria-label="02. Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    Applicationとは
  </a>
  
    <nav class="md-nav" aria-label="Applicationとは">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kuberneres" class="md-nav__link">
    ▼ Kuberneresリソースのポーリング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▼ 自己ポーリング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 操作の種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ ヘルスステータスの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    ▼ Namespace
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specignoredifferences" class="md-nav__link">
    .spec.ignoreDifferences
  </a>
  
    <nav class="md-nav" aria-label=".spec.ignoreDifferences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ignoredifferences" class="md-nav__link">
    ▼ ignoreDifferencesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#respectignoredifferences" class="md-nav__link">
    ▼ 合わせてRespectIgnoreDifferencesキーも使う
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specproject" class="md-nav__link">
    .spec.project
  </a>
  
    <nav class="md-nav" aria-label=".spec.project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project" class="md-nav__link">
    ▼ projectとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource" class="md-nav__link">
    .spec.source
  </a>
  
    <nav class="md-nav" aria-label=".spec.source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source" class="md-nav__link">
    ▼ sourceとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource_1" class="md-nav__link">
    .spec.source (マニフェストリポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (マニフェストリポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory" class="md-nav__link">
    ▼ directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    ▼ path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource_2" class="md-nav__link">
    .spec.source (チャートレジストリ内リポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (チャートレジストリ内リポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart" class="md-nav__link">
    ▼ chart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    ▼ helm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl_1" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision_1" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsource-oci" class="md-nav__link">
    .spec.source (OCIレジストリ内リポジトリの場合)
  </a>
  
    <nav class="md-nav" aria-label=".spec.source (OCIレジストリ内リポジトリの場合)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chart_1" class="md-nav__link">
    ▼ chart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm_1" class="md-nav__link">
    ▼ helm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repourl_2" class="md-nav__link">
    ▼ repoURL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targetrevision_2" class="md-nav__link">
    ▼ targetRevision
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specdestination" class="md-nav__link">
    .spec.destination
  </a>
  
    <nav class="md-nav" aria-label=".spec.destination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#destination" class="md-nav__link">
    ▼ destinationとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace_1" class="md-nav__link">
    ▼ namespace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    ▼ server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsyncpolicy" class="md-nav__link">
    .spec.syncPolicy
  </a>
  
    <nav class="md-nav" aria-label=".spec.syncPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#syncpolicy" class="md-nav__link">
    ▼ syncPolicyとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated" class="md-nav__link">
    ▼ automated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncoptions" class="md-nav__link">
    ▼ syncOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-applicationset" class="md-nav__link">
    03. ApplicationSet
  </a>
  
    <nav class="md-nav" aria-label="03. ApplicationSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applicationset" class="md-nav__link">
    ApplicationSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-appproject" class="md-nav__link">
    04. AppProject
  </a>
  
    <nav class="md-nav" aria-label="04. AppProject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appproject" class="md-nav__link">
    AppProjectとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-appproject" class="md-nav__link">
    default AppProject
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specsourcenamespaces" class="md-nav__link">
    spec.sourceNamespaces
  </a>
  
    <nav class="md-nav" aria-label="spec.sourceNamespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcenamespaces" class="md-nav__link">
    ▼ sourceNamespacesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap" class="md-nav__link">
    ▼ ConfigMap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaced" class="md-nav__link">
    ▼ デフォルトのNamespacedスコープモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcerepos" class="md-nav__link">
    sourceRepos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#destinations" class="md-nav__link">
    destinations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clusterresourcewhitelist" class="md-nav__link">
    clusterResourceWhitelist
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaceresourcewhitelist" class="md-nav__link">
    namespaceResourceWhitelist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-argocd-notification" class="md-nav__link">
    05. ArgoCD Notification
  </a>
  
    <nav class="md-nav" aria-label="05. ArgoCD Notification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-configmanagementplugin" class="md-nav__link">
    06. ConfigManagementPlugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07-rollout" class="md-nav__link">
    07. Rollout
  </a>
  
    <nav class="md-nav" aria-label="07. Rollout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specanalysis" class="md-nav__link">
    .spec.analysis
  </a>
  
    <nav class="md-nav" aria-label=".spec.analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#analysis" class="md-nav__link">
    ▼ analysisとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#successfulrunhistorylimit" class="md-nav__link">
    ▼ successfulRunHistoryLimit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsuccessfulrunhistorylimit" class="md-nav__link">
    ▼ unsuccessfulRunHistoryLimit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specstrategy" class="md-nav__link">
    .spec.strategy
  </a>
  
    <nav class="md-nav" aria-label=".spec.strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#strategy" class="md-nav__link">
    ▼ strategyとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bluegreen" class="md-nav__link">
    ▼ blueGreen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canary" class="md-nav__link">
    ▼ canary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08-workflow" class="md-nav__link">
    08. Workflow
  </a>
  
    <nav class="md-nav" aria-label="08. Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specentrypoint" class="md-nav__link">
    .spec.entrypoint
  </a>
  
    <nav class="md-nav" aria-label=".spec.entrypoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#entrypoint" class="md-nav__link">
    ▼ entrypointとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectemplates" class="md-nav__link">
    .spec.templates
  </a>
  
    <nav class="md-nav" aria-label=".spec.templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    ▼ templatesとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specworkflowtemplateref" class="md-nav__link">
    .spec.workflowTemplateRef
  </a>
  
    <nav class="md-nav" aria-label=".spec.workflowTemplateRef">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflowtemplateref" class="md-nav__link">
    ▼ workflowTemplateRefとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09-workflowtemplate" class="md-nav__link">
    09. WorkflowTemplate
  </a>
  
    <nav class="md-nav" aria-label="09. WorkflowTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spectemplates_1" class="md-nav__link">
    .spec.templates
  </a>
  
    <nav class="md-nav" aria-label=".spec.templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#templates_1" class="md-nav__link">
    ▼ templatesとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#script" class="md-nav__link">
    ▼ script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    ▼ steps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmap_1" class="md-nav__link">
    ConfigMap
  </a>
  
    <nav class="md-nav" aria-label="ConfigMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datatrigger" class="md-nav__link">
    ▼ data.trigger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataservice" class="md-nav__link">
    ▼ data.service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datatemplate" class="md-nav__link">
    ▼ data.template
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="argocd">リソース定義＠ArgoCD<a class="headerlink" href="#argocd" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/">https://hiroki-it.github.io/tech-notebook/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="01">01. セットアップ<a class="headerlink" href="#01" title="Permanent link">&para;</a></h2>
<h3 id="_2">ツールバージョン<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>手動でデプロイすることになるため、使用するツールを管理できるようにする。</p>
<div class="highlight"><pre><span></span><code>argocd<span class="w"> </span><span class="m">2</span>.7.2
helm<span class="w"> </span><span class="m">3</span>.11.2
helmfile<span class="w"> </span><span class="m">0</span>.152.0
kubectl<span class="w"> </span><span class="m">1</span>.26
sops<span class="w"> </span><span class="m">3</span>.7.3
</code></pre></div>
<p><br></p>
<h3 id="aws">AWS側<a class="headerlink" href="#aws" title="Permanent link">&para;</a></h3>
<h4 id="terraform">▼ Terraformの公式モジュールの場合<a class="headerlink" href="#terraform" title="Permanent link">&para;</a></h4>
<p>ArgoCDのセットアップのうち、AWS側で必要なものをまとめる。</p>
<p>ここでは、Terraformの公式モジュールを使用する。</p>
<div class="highlight"><pre><span></span><code><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;iam_assumable_role_with_oidc_argocd_repo_server&quot;</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="na">source</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;terraform-aws-modules/iam/aws//modules/iam-assumable-role-with-oidc&quot;</span>

<span class="w">  </span><span class="na">version</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;バージョン&gt;&quot;</span>

<span class="c1">  # ArgoCDのrepo-serverのPodに紐付けるIAMロール</span>
<span class="w">  </span><span class="na">create_role</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="na">role_name</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;foo-argocd-reposerver&quot;</span>

<span class="c1">  # AWS EKS ClusterのOIDCプロバイダーURLからhttpsプロトコルを除いたもの</span>
<span class="c1">  # ArgoCDは外部のAWS EKS Clusterで稼働している</span>
<span class="w">  </span><span class="na">provider_url</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="nv">module.eks_argocd.cluster_oidc_issuer_url</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;https://&quot;, &quot;&quot;</span><span class="p">)</span>

<span class="c1">  # AWS IAMロールに紐付けるIAMポリシー</span>
<span class="w">  </span><span class="na">role_policy_arns</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nv">aws_iam_policy.argocd_reposerver_policy.arn</span>
<span class="w">  </span><span class="p">]</span>

<span class="c1">  # ArgoCDのrepo-serverのPodのServiceAccount名</span>
<span class="c1">  # Terraformではなく、マニフェストで定義した方が良い</span>
<span class="w">  </span><span class="na">oidc_fully_qualified_subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;system:serviceaccount:argocd:foo-argocd-repo-server&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_policy&quot;</span><span class="w"> </span><span class="nv">&quot;argocd_reposerver_policy&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;foo-argocd-reposerver-policy&quot;</span>
<span class="w">  </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">templatefile</span><span class="p">(</span>
<span class="w">    </span><span class="s2">&quot;${path.module}/policies/inline_policies/argocd_reposerver_policy.tpl&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{}</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_3">マニフェスト側<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<h4 id="_4">▼ 非チャートとして<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>非チャートとして、argo-cdリポジトリのマニフェストを送信し、リソースを作成する。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/getting_started/">https://argo-cd.readthedocs.io/en/stable/getting_started/</a></li>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/install.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/install.yaml</a></li>
</ul>
</blockquote>
<h4 id="_5">▼ チャートとして<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>CRDをHelmの管理外で作成する。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/argoproj/argo-cd

$<span class="w"> </span>kubectl<span class="w"> </span>diff<span class="w"> </span>-k<span class="w"> </span>./manifests/crds

$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-k<span class="w"> </span>./manifests/crds
</code></pre></div>
<p>これは、URLで指定しても良い。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>diff<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;https://github.com/argoproj/argo-cd/manifests/crds?ref=&lt;タグ&gt;&quot;</span>

$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;https://github.com/argoproj/argo-cd/manifests/crds?ref=&lt;タグ&gt;&quot;</span>
</code></pre></div>
<p>例えば、argocd-cdチャートの<code>5.26.0</code>を使用する場合、これはArgoCDの<code>2.6.5</code>に対応しているため、以下の値で適用する。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>diff<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;https://github.com/argoproj/argo-cd/manifests/crds?ref=v2.6.5&quot;</span>

$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;https://github.com/argoproj/argo-cd/manifests/crds?ref=v2.6.5&quot;</span>
</code></pre></div>
<p>チャートリポジトリからチャートをインストールし、Kubernetesリソースを作成する。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>&lt;チャートリポジトリ名&gt;<span class="w"> </span>https://argoproj.github.io/argo-helm

$<span class="w"> </span>helm<span class="w"> </span>repo<span class="w"> </span>update

$<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>argocd

$<span class="w"> </span>helm<span class="w"> </span>install<span class="w"> </span>&lt;Helmリリース名&gt;<span class="w"> </span>&lt;チャートリポジトリ名&gt;/argo-cd<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>--version<span class="w"> </span>&lt;バージョンタグ&gt;
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd#installing-the-chart">https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd#installing-the-chart</a></li>
</ul>
</blockquote>
<h4 id="operator">▼ Operatorとして<a class="headerlink" href="#operator" title="Permanent link">&para;</a></h4>
<p>ArgoCDOperatorを先にセットアップし、ArgoCDに関するカスタムリソースを作成させる。</p>
<p>執筆時点 (2023/04/21) ではOpenShihtのみで使える。</p>
<p>Operatorでインストールすることは非推奨である。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-sL<span class="w"> </span>https://github.com/operator-framework/operator-lifecycle-manager/releases/download/&lt;バージョン&gt;/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash<span class="w"> </span>-s<span class="w"> </span>&lt;バージョン&gt;

$<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>https://operatorhub.io/install/argocd-operator.yaml

$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>csv<span class="w"> </span>-n<span class="w"> </span>operators
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://blog.mosuke.tech/entry/2021/04/13/argocd/">https://blog.mosuke.tech/entry/2021/04/13/argocd/</a></li>
<li><a href="https://github.com/argoproj-labs/argocd-operator">https://github.com/argoproj-labs/argocd-operator</a></li>
<li><a href="https://argocd-operator.readthedocs.io/en/latest/install/manual/">https://argocd-operator.readthedocs.io/en/latest/install/manual/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="01-02">01-02. ダッシュボード<a class="headerlink" href="#01-02" title="Permanent link">&para;</a></h2>
<h3 id="_6">ネットワークに公開しない場合<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<h4 id="kubectl">▼ <code>kubectl</code>コマンドを使用して<a class="headerlink" href="#kubectl" title="Permanent link">&para;</a></h4>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p>既存のServiceをLoadBalancer Serviceに変更する。</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>patch<span class="w"> </span>service<span class="w"> </span>argocd-server<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-n<span class="w"> </span>foo<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-p<span class="w"> </span><span class="s1">&#39;{&quot;spec&quot;: {&quot;type&quot;: &quot;LoadBalancer&quot;}}&#39;</span>
</code></pre></div>
<dl>
<dt><code>(2)</code></dt>
<dd>
<p>Kubernetes上のArgoCDダッシュボードのパスワードを取得する。</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>argocd-initial-admin-secret<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-n<span class="w"> </span>foo<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.data.password}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="p">;</span><span class="w"> </span><span class="nb">echo</span>
</code></pre></div>
<dl>
<dt><code>(3)</code></dt>
<dd>
<p><code>443</code>番ポートにルーティングできるロードバランサーを作成する。</p>
<p>この時、IngressとIngressコントローラーを作成するか、<code>kubectl port-forward</code>コマンドなど実行することにより、ダッシュボードにアクセスする。</p>
<p><code>minikube tunnel</code>コマンドでは、ポート番号を指定できないことに注意する。</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code><span class="c1"># Serviceの情報を使用してPodを指定し、ダッシュボードにアクセスできるようにする。</span>
$<span class="w"> </span>kubectl<span class="w"> </span>port-forward<span class="w"> </span>svc/argocd-server<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span><span class="m">8080</span>:443

<span class="c1"># ホストポートを介してPodのポートにアクセスする。</span>
$<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8080
</code></pre></div>
<h4 id="argocd_1">▼ <code>argocd</code>コマンドを使用して<a class="headerlink" href="#argocd_1" title="Permanent link">&para;</a></h4>
<dl>
<dt><code>(1)</code></dt>
<dd>
<p><code>argocd</code>コマンドをインストールする。</p>
</dd>
</dl>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/cli_installation/">https://argo-cd.readthedocs.io/en/stable/cli_installation/</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>/usr/local/bin/argocd<span class="w"> </span>https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64

$<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/argocd
</code></pre></div>
<dl>
<dt><code>(2)</code></dt>
<dd>
<p>ArgoCDにログインする。ユーザー名とパスワードを要求されるため、これらを入力する。</p>
</dd>
</dl>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>argocd<span class="w"> </span>login<span class="w"> </span>&lt;ArgoCDのドメイン名&gt;<span class="w"> </span>--username<span class="w"> </span>admin<span class="w"> </span>--password<span class="w"> </span>&lt;前の手順で取得した文字列&gt;

<span class="s1">&#39;admin:login&#39;</span><span class="w"> </span>logged<span class="w"> </span><span class="k">in</span><span class="w"> </span>successfully
</code></pre></div>
<p><br></p>
<h3 id="_7">ネットワークに公開する場合<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<h4 id="_8">▼ 共通の手順<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p><img alt="argocd_argocd-server_dashboard" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/argocd_argocd-server_dashboard.png" /></p>
<p>Nodeの外からArgoCDのダッシュボードをネットワークに公開する場合、Node外からargocd-serverにインバウンド通信が届くようにする必要がある。</p>
<p>Ingressを作成する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-ingress</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ingressClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-ingress-class</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ドメインを割り当てる場合、Hostヘッダーの合致ルールが必要である。</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.argocd.com</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-server</span>
<span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p>ClusterIP Serviceを作成する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-argocd-service</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterIP</span><span class="p">:</span><span class="w"> </span><span class="err">*</span><span class="l l-Scalar l-Scalar-Plain">.*.*.*</span>
<span class="w">  </span><span class="nt">clusterIPs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="err">*</span><span class="l l-Scalar l-Scalar-Plain">.*.*.*</span>
<span class="w">  </span><span class="nt">internalTrafficPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="w">  </span><span class="nt">ipFamilies</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IPv4</span>
<span class="w">  </span><span class="nt">ipFamilyPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SingleStack</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-foo</span>
<span class="w">      </span><span class="nt">nodePort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">31000</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https-foo</span>
<span class="w">      </span><span class="nt">nodePort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">31001</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-argocd</span>
<span class="w">  </span><span class="nt">sessionAffinity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://techstep.hatenablog.com/entry/2020/11/15/121503">https://techstep.hatenablog.com/entry/2020/11/15/121503</a></li>
</ul>
</blockquote>
<h4 id="_9">▼ 開発環境の場合<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>IngressClassを作成する。</p>
<p>開発環境では、IngressClassとしてNginxを使用する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IngressClass</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-ingress-class</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">controller</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8s.io/ingress-nginx</span>
</code></pre></div>
<h4 id="_10">▼ 本番環境<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>IngressClassを作成する。</p>
<p>本番環境では、クラウドプロバイダーのIngressClass (AWS ALB、GCP CLB) を使用する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IngressClass</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-ingress-class</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">controller</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ingress.k8s.aws/alb</span>
</code></pre></div>
<p>また、IngressClass (AWS ALB、GCP CLB) に接続できるように、ドメインレジストリ (Route53、CloudDNS) にArgoCDのドメインを登録する。</p>
<p><br></p>
<h2 id="01-03">01-03. マニフェスト<a class="headerlink" href="#01-03" title="Permanent link">&para;</a></h2>
<h3 id="_11">マニフェストの種類<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>ArgoCDは、Deployment (argocd-server、repo-server、redis-server、dex-server)、StatefulSet (application-controller)、といったコンポーネントから構成される。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span>argocd

NAME<span class="w">                                         </span>READY<span class="w">    </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
deployment.apps/argocd-dex-server<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">        </span><span class="m">1</span><span class="w">            </span>119d
deployment.apps/argocd-redis<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">        </span><span class="m">1</span><span class="w">            </span>119d
deployment.apps/argocd-repo-server<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">        </span><span class="m">1</span><span class="w">            </span>119d
deployment.apps/argocd-server<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">        </span><span class="m">1</span><span class="w">            </span>119d


$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>statefulset<span class="w"> </span>-n<span class="w"> </span>argocd

NAME<span class="w">                                                    </span>READY<span class="w">   </span>AGE
statefulset.apps/argocd-application-controller<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>119d
</code></pre></div>
<p><br></p>
<h3 id="deploymentpod">Deployment配下のPod<a class="headerlink" href="#deploymentpod" title="Permanent link">&para;</a></h3>
<h4 id="argocd-server">▼ argocd-server<a class="headerlink" href="#argocd-server" title="Permanent link">&para;</a></h4>
<p>記入中...</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-server</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">serviceAccountName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-server</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-server</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/argoproj/argocd:latest</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/bin/argocd-server</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--port=8080</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--metrics-port=8083</span>
<span class="w">        </span><span class="c1"># AWS ALBがHTTPリクエストでルーティングするように設定しているため、HTTPリクエストを許可する</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--insecure</span>
<span class="w">      </span><span class="c1"># クライアント、Prometheus、からのリクエストを受信する</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8083</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="c1"># 各種ConfigMapを読み込む。</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cmd-params-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-redis</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1"># Volumeの各種パスをコンテナにマウントする</span>
<span class="w">      </span><span class="c1"># https://github.com/argoproj/argo-cd/blob/v2.6.0/common/common.go#L60-L77</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># SSH公開鍵認証既知ホストファイルをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-known-hosts</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/ssh</span>
<span class="w">        </span><span class="c1"># ArgoCD外にHTTPSリクエストを送信するためのSSL証明書をコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-certs</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/tls</span>
<span class="w">        </span><span class="c1"># repo-serverに対してHTTPSリクエストするためのSSL証明書をコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/server/tls</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">        </span><span class="c1"># dex-serverに対してHTTPSリクエストするためのSSL証明書をコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server-tls</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/dex/tls</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plugins-home</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/argocd</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">styles</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/shared/app/custom</span>
<span class="w">        </span><span class="c1"># リポジトリから取得したクローンを保管するディレクトリをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmp</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp</span>

<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">  </span><span class="c1"># 各種ConfigMapやSecretを読み込む</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plugins-home</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmp</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-known-hosts</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-ssh-known-hosts-cm</span>
<span class="w">    </span><span class="c1"># ArgoCD外 (特にリポジトリ) にHTTPSリクエストを送信するために、SSL証明書を設定する。</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-certs</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-tls-certs-cm</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">styles</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-styles-cm</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># repo-serverにHTTPSリクエストを送信するために、SSL証明書を設定する</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">      </span><span class="nt">secret</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">    </span><span class="c1"># dex-serverにHTTPSリクエストを送信するために、SSL証明書を設定する</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server-tls</span>
<span class="w">      </span><span class="nt">secret</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server-tls</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/base/server/argocd-server-deployment.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/base/server/argocd-server-deployment.yaml</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/tls/#inbound-tls-options-for-argocd-server">https://argo-cd.readthedocs.io/en/stable/operator-manual/tls/#inbound-tls-options-for-argocd-server</a></li>
</ul>
</blockquote>
<h4 id="repo-server">▼ repo-server<a class="headerlink" href="#repo-server" title="Permanent link">&para;</a></h4>
<p>記入中...</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/argoproj/argocd:latest</span>
<span class="w">      </span><span class="c1"># コマンドのパラーメーターは、argocd-cmd-params-cmから渡す</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/bin/argocd-repo-server</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--port=8081</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--metrics-port=8084</span>
<span class="w">      </span><span class="c1"># application-controller、Prometheus、からのリクエストを受信する</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8081</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo-server</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8084</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="c1"># 各種ConfigMapを読み込む。</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">XDG_CONFIG_HOME</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/.config</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HELM_PLUGINS</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/helm-working-dir/plugins</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cmd-params-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-redis</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1"># Volumeの各種パスをコンテナにマウントする</span>
<span class="w">      </span><span class="c1"># https://github.com/argoproj/argo-cd/blob/v2.6.0/common/common.go#L60-L77</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># InitContainerでインストールしたバイナリファイルをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-tools</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/bin</span>
<span class="w">        </span><span class="c1"># SSH公開鍵認証既知ホストファイルをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-known-hosts</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/ssh</span>
<span class="w">        </span><span class="c1"># ArgoCD外にHTTPSリクエストを送信するために、SSL証明書を設定する。</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-certs</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/tls</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpg-keys</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/gpg/source</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpg-keyring</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/gpg/keys</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/reposerver/tls</span>
<span class="w">        </span><span class="c1"># ConfigManagementPluginのhelmコマンドを実行するディレクトリをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-working-dir</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/helm-working-dir</span>
<span class="w">        </span><span class="c1"># コンテナ間で通信するためのUnixドメインソケットファイルをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plugins</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/argocd/cmp-server/plugins</span>
<span class="w">        </span><span class="c1"># リポジトリから取得したクローンを保管するディレクトリをコンテナにマウントする</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmp</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp</span>


<span class="w">  </span><span class="nt">initContainers</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ConfigManagementPlugin用のサイドカーにcmp-serverバイナリをコピーするInitContainer</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">copyutil</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/argoproj/argocd:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/cp</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-n</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/bin/argocd</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/argocd/argocd-cmp-server</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/argocd</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">var-files</span>
<span class="w">    </span><span class="c1"># お好きなツールをインストールするInitContainer</span>
<span class="w">    </span><span class="c1"># Helm</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-installer</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpine:3.17.3</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># インストール処理</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-tools</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/custom-tools</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sops-installer</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpine:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># インストール処理</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-tools</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/custom-tools</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ksops-installer</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpine:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># インストール処理</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-tools</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/custom-tools</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-secrets-installer</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpine:latest</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no"># インストール処理</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-working-dir</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/helm-working-dir/plugins</span>

<span class="w">  </span><span class="c1"># 各種Secretを読み込む</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-tools</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helm-working-dir</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plugins</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">var-files</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmp</span>
<span class="w">      </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-known-hosts</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-ssh-known-hosts-cm</span>
<span class="w">    </span><span class="c1"># ArgoCD外 (特にリポジトリ) にHTTPSリクエストを送信するためのSSL証明書をコンテナにマウントする</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls-certs</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-tls-certs-cm</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpg-keys</span>
<span class="w">      </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-gpg-keys-cm</span>
<span class="w">    </span><span class="c1"># 他のコンポーネントからHTTPSリクエストを受信するために、SSL証明書を設定する</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">      </span><span class="nt">secret</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<h4 id="redis-server">▼ redis-server<a class="headerlink" href="#redis-server" title="Permanent link">&para;</a></h4>
<p>記入中...</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-redis-server</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-redis-server</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public.ecr.aws/docker/library/redis:latest-alpine</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--save</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--appendonly</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="w">      </span><span class="c1"># application-controllerからのリクエストを受信する</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6379</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<h4 id="dex-server">▼ dex-server<a class="headerlink" href="#dex-server" title="Permanent link">&para;</a></h4>
<p>記入中...</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/dexidp/dex:latest</span>
<span class="w">      </span><span class="c1"># コマンドのパラーメーターは、argocd-cmd-params-cmから渡す</span>
<span class="w">      </span><span class="nt">command</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/shared/argocd-dex</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rundex</span>
<span class="w">      </span><span class="c1"># application-controller、Prometheus、からのリクエストを受信する</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">          </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5556</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">grpc</span>
<span class="w">          </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5557</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">          </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5558</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="c1"># 各種ConfigMapを読み込む</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cmd-params-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">  </span><span class="c1"># 各種Secretを読み込む</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 他のコンポーネントからHTTPSリクエストを受信するために、SSL証明書を設定する</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server-tls</span>
<span class="w">      </span><span class="nt">secret</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-dex-server-tls</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/base/dex/argocd-dex-server-deployment.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/base/dex/argocd-dex-server-deployment.yaml</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="statefulset">StatefulSet<a class="headerlink" href="#statefulset" title="Permanent link">&para;</a></h3>
<h4 id="application-controller">▼ application-controller<a class="headerlink" href="#application-controller" title="Permanent link">&para;</a></h4>
<p>記入中...</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-application-controller</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-application-controller</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/argoproj/argocd:latest</span>
<span class="w">      </span><span class="c1"># コマンドのパラーメーターは、argocd-cmd-params-cmから渡す</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/bin/argocd-application-controller</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--metrics-port=8082</span>
<span class="w">      </span><span class="c1"># Prometheusからのリクエストを受信する</span>
<span class="w">      </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8082</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">          </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="c1"># 各種ConfigMapを読み込む</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">configMapKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cmd-params-cm</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="err">*****</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="err">****</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-redis</span>
<span class="w">              </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1"># Volumeの各種パスをコンテナにマウントする</span>
<span class="w">      </span><span class="c1"># https://github.com/argoproj/argo-cd/blob/v2.6.0/common/common.go#L60-L77</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/app/config/controller/tls</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/argocd</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-home</span>
<span class="w">  </span><span class="c1"># 各種Secretを読み込む</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># repo-serverとHTTPSリクエストを送信するために、SSL証明書を設定する</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>
<span class="w">      </span><span class="nt">secret</span><span class="p">:</span>
<span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420</span>
<span class="w">        </span><span class="nt">items</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.crt</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">            </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span>
<span class="w">        </span><span class="nt">optional</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-repo-server-tls</span>

<span class="w w-Error"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p><br></p>
<h2 id="02-application">02. Application<a class="headerlink" href="#02-application" title="Permanent link">&para;</a></h2>
<h3 id="application">Applicationとは<a class="headerlink" href="#application" title="Permanent link">&para;</a></h3>
<h4 id="kuberneres">▼ Kuberneresリソースのポーリング<a class="headerlink" href="#kuberneres" title="Permanent link">&para;</a></h4>
<p>Kubernetesのカスタムリソースから定義される。</p>
<p>ポーリング対象のKubernetesリソースやカスタムリソースを設定する。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/crds/application-crd.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/manifests/crds/application-crd.yaml</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#multiple-configuration-objects">https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#multiple-configuration-objects</a></li>
</ul>
</blockquote>
<h4 id="_12">▼ 自己ポーリング<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>Application自体もカスタムリソースなため、ApplicationがApplication自身のソースの変更をポーリングし、Syncできる。</p>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#manage-argo-cd-using-argo-cd">https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#manage-argo-cd-using-argo-cd</a></li>
<li><a href="https://github.com/argoproj/argo-cd/discussions/7908">https://github.com/argoproj/argo-cd/discussions/7908</a></li>
<li><a href="https://speakerdeck.com/sshota0809/argocd-teshi-xian-suru-kubernetes-niokeruxuan-yan-de-risosuteriharifalseshi-jian?slide=49">https://speakerdeck.com/sshota0809/argocd-teshi-xian-suru-kubernetes-niokeruxuan-yan-de-risosuteriharifalseshi-jian?slide=49</a></li>
</ul>
</blockquote>
<h4 id="_13">▼ 操作の種類<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>操作名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sync</td>
<td>ポーリング対象リポジトリとのマニフェストの差分を確認し、差分があれば<code>kubectl apply</code>コマンドを実行する。</td>
</tr>
<tr>
<td>Refresh</td>
<td>ポーリング対象リポジトリとのマニフェストの差分を確認する。差分を確認するのみで、applyは実行しない。</td>
</tr>
<tr>
<td>Hard Refresh</td>
<td>redis-serverに保管されているキャッシュを削除する。また、ポーリング対象リポジトリとのマニフェストの差分を確認する。差分を確認するのみで、applyは実行しない。</td>
</tr>
<tr>
<td>Restart</td>
<td>すでにapply済みのKubernetesリソース内のコンテナを再デプロイする。コンテナを再起動するのみで、Kubernetesリソースを作成することはない。<br>- <a href="https://twitter.com/reoring/status/1476046977599406087">https://twitter.com/reoring/status/1476046977599406087</a></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/core_concepts/">https://argo-cd.readthedocs.io/en/stable/core_concepts/</a></li>
<li><a href="https://github.com/argoproj/argo-cd/discussions/8260">https://github.com/argoproj/argo-cd/discussions/8260</a></li>
</ul>
</blockquote>
<h4 id="_14">▼ ヘルスステータスの種類<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>ステータス名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Healthy</td>
<td>全てのKubernetesリソースは正常に稼働している。</td>
</tr>
<tr>
<td>Progressing</td>
<td>一部のKubernetesリソースは正常に稼働していないが、リソースの状態が変化中のため、正常になる可能性がある。この状態の場合は、ステータスが他のいずれかになるまで待機する。</td>
</tr>
<tr>
<td>Degraded</td>
<td>一部のKubernetesリソースは正常に稼働していない。</td>
</tr>
<tr>
<td>Suspended</td>
<td>一部のKubernetesリソースは、イベント (例：CronJobなど) が実行されることを待機している。</td>
</tr>
<tr>
<td>Missing</td>
<td>記入中...</td>
</tr>
<tr>
<td>Unknown</td>
<td>記入中...</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/health/#way-1-define-a-custom-health-check-in-argocd-cm-configmap">https://argo-cd.readthedocs.io/en/stable/operator-manual/health/#way-1-define-a-custom-health-check-in-argocd-cm-configmap</a></li>
</ul>
</blockquote>
<h4 id="namespace">▼ Namespace<a class="headerlink" href="#namespace" title="Permanent link">&para;</a></h4>
<p>Applicationは任意のNamespaceに作成できる。</p>
<p>ただし、ルートのApplicationはargocd-serverと同じNamespaceに配置しないと、UI上にApplicationを表示できない。</p>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/">https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specignoredifferences">.spec.ignoreDifferences<a class="headerlink" href="#specignoredifferences" title="Permanent link">&para;</a></h3>
<h4 id="ignoredifferences">▼ ignoreDifferencesとは<a class="headerlink" href="#ignoredifferences" title="Permanent link">&para;</a></h4>
<p>特定のApplicationのSyncステータス (Synced、OutOfSync) の判定時に、特定のKubernetesリソースの特定の設定値の差分を無視し、OutOfSyncにならないようする。</p>
<p>Sync後にKubernetesリソースが変化するような仕様 (動的な設定値、Jobによる変更、mutating-admissionステップでのWebhook、マニフェストの自動整形、など) の場合に使用する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ignoreDifferences</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># KubernetesリソースのAPIグループの名前</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">      </span><span class="nt">jsonPointers</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># .spec.replicasキー (インスタンス数) の設定値の変化を無視する。</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/spec/replicas</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">autoscaling</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HorizontalPodAutoscaler</span>
<span class="w">      </span><span class="nt">jqPathExpressions</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># .spec.metrics (ターゲット対象のメトリクス) の自動整形を無視する。</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/spec/metrics</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/diffing/#application-level-configuration">https://argo-cd.readthedocs.io/en/stable/user-guide/diffing/#application-level-configuration</a></li>
<li><a href="https://blog.framinal.life/entry/2021/10/04/224722">https://blog.framinal.life/entry/2021/10/04/224722</a></li>
</ul>
</blockquote>
<h4 id="respectignoredifferences">▼ 合わせて<code>RespectIgnoreDifferences</code>キーも使う<a class="headerlink" href="#respectignoredifferences" title="Permanent link">&para;</a></h4>
<p>注意点として、Syncステータスの判定時に無視されるのみで、内部的にSyncは実行されてしまうため、Syncのたびに設定値が元に戻ってしまう。</p>
<p>そこで別途、<code>.spec.syncPolicy.syncOptions[].RespectIgnoreDifferences</code>キーも有効にしておくと良い。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ignoreDifferences</span><span class="p">:</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RespectIgnoreDifferences=true</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#respect-ignore-difference-configs">https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#respect-ignore-difference-configs</a></li>
<li><a href="https://mixi-developers.mixi.co.jp/update-argocd-to-v2-3-0-d609bbf16662">https://mixi-developers.mixi.co.jp/update-argocd-to-v2-3-0-d609bbf16662</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specproject">.spec.project<a class="headerlink" href="#specproject" title="Permanent link">&para;</a></h3>
<h4 id="project">▼ projectとは<a class="headerlink" href="#project" title="Permanent link">&para;</a></h4>
<p>アプリケーションの所属するAppProject名を設定する。</p>
<p>AppProject名は『<code>default</code>』は必ず作成する必要がある。</p>
<p><code>default</code>以外のAppProjectは、認可スコープと紐付けられるように、チーム別や実行環境別に作成すると良い。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root-application</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"> </span><span class="c1"># アプリケーションコンポーネント。その他、実行環境 (dev、stg、prd) がよい。</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-infra-application</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class="w"> </span><span class="c1"># インフラコンポーネント。その他、実行環境 (dev、stg、prd) がよい。</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-app-application</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app</span><span class="w"> </span><span class="c1"># アプリケーションコンポーネント。その他、実行環境 (dev、stg、prd) がよい。</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specsource">.spec.source<a class="headerlink" href="#specsource" title="Permanent link">&para;</a></h3>
<h4 id="source">▼ sourceとは<a class="headerlink" href="#source" title="Permanent link">&para;</a></h4>
<p>リポジトリ (マニフェストリポジトリ、チャートリポジトリ、OCIリポジトリ) の変更をポーリングし、これらからプルしたマニフェストで<code>kubectl apply</code>コマンドを実行。</p>
<table>
<thead>
<tr>
<th>リポジトリの種類</th>
<th>管理方法</th>
<th>マニフェストのapply方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>マニフェストリポジトリ (例：GitHub内のリポジトリ)</td>
<td>マニフェストそのまま</td>
<td>ArgoCDで直接的に<code>kubectl apply</code>コマンドを実行する。</td>
</tr>
<tr>
<td>チャートリポジトリ (例：ArtifactHub、GitHub Pages、内のリポジトリ)</td>
<td>チャートアーカイブ (<code>.tgz</code>形式ファイル)</td>
<td>Helmを使用して、ArgoCDで間接的に<code>kubectl apply</code>コマンドを実行する。パラメーターに応じて、内部的に<code>helm</code>コマンドが実行される。</td>
</tr>
<tr>
<td>OCIリポジトリ (例：ECR内のリポジトリ)</td>
<td>チャートアーカイブ (<code>.tgz</code>形式ファイル)</td>
<td>Helmを使用して、ArgoCDで間接的に<code>kubectl apply</code>コマンドを実行する。パラメーターに応じて、内部的に<code>helm</code>コマンドが実行される。</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specsource_1">.spec.source (マニフェストリポジトリの場合)<a class="headerlink" href="#specsource_1" title="Permanent link">&para;</a></h3>
<h4 id="directory">▼ directory<a class="headerlink" href="#directory" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のマニフェストリポジトリのディレクトリ構造に関して設定する。</p>
<p>また、リポジトリにチャートを配置しているがチャートリポジトリとして扱っていない場合、マニフェストリポジトリ内のローカルのチャートとして、ポーリングすることもできる。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>include</code></td>
<td><code>.spec.source.path</code>キーで指定したディレクトリ内で、特定のマニフェストのみを指定し、kube-apiserverに送信する</td>
</tr>
<tr>
<td><code>exclude</code></td>
<td><code>.spec.source.path</code>キーで指定したディレクトリ内で、特定のマニフェストを除外し、kube-apiserverに送信する</td>
</tr>
<tr>
<td><code>recurse</code></td>
<td><code>.spec.source.path</code>キーで指定したディレクトリにサブディレクトリが存在している場合、全てのマニフェストを指定できるように、ディレクトリ内の再帰的検出を有効化するか否かを設定する。</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./manifests</span>
<span class="w">    </span><span class="nt">directory</span><span class="p">:</span>
<span class="w">      </span><span class="nt">recurse</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L78">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L78</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/tool_detection/">https://argo-cd.readthedocs.io/en/stable/user-guide/tool_detection/</a></li>
</ul>
</blockquote>
<h4 id="path">▼ path<a class="headerlink" href="#path" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のマニフェストリポジトリのディレクトリを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./manifests</span>
</code></pre></div>
<p>マニフェストリポジトリ内のローカルのチャートもポーリングできる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./charts</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">valueFiles</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./values/values.yaml</span>
</code></pre></div>
<h4 id="repourl">▼ repoURL<a class="headerlink" href="#repourl" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のマニフェストリポジトリのURLを設定する。</p>
<p>パブリックリポジトリであれば認証が不要であるが、プライベートリポジトリであればこれが必要になる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/hiroki-hasegawa/foo-manifests.git</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git">https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git</a></li>
</ul>
</blockquote>
<h4 id="targetrevision">▼ targetRevision<a class="headerlink" href="#targetrevision" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のマニフェストリポジトリのブランチやバージョンタグを設定する。</p>
<p>各実行環境に、実行環境に対応したブランチを指定するマニフェストを定義しておくと良い。</p>
<p>これにより、各実行環境内のApplicationは特定のブランチのみをポーリングするようになる。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 本番環境のApplication</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"> </span><span class="c1"># 本番環境に対応するブランチ</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># ステージング環境のApplication</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stg</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">develop</span><span class="w"> </span><span class="c1"># ステージング環境に対応するブランチ</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git">https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specsource_2">.spec.source (チャートレジストリ内リポジトリの場合)<a class="headerlink" href="#specsource_2" title="Permanent link">&para;</a></h3>
<h4 id="chart">▼ chart<a class="headerlink" href="#chart" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のチャートレジストリ内のリポジトリにあるチャート名を設定する。</p>
<p>バージョンタグは、<code>Chart.yaml</code>ファイルの<code>name</code>キーから確認する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">chart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;チャート名&gt;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications">https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications</a></li>
</ul>
</blockquote>
<h4 id="helm">▼ helm<a class="headerlink" href="#helm" title="Permanent link">&para;</a></h4>
<p><code>helm</code>コマンドに渡すパラメーターを設定する。</p>
<p>helmfileと同じように<code>helm</code>コマンドを宣言的に実行しつつ、実行を自動化できる。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>releaseName</code></td>
<td>リリース名を設定する。多くのチャートではデフォルトでArgoCDの名前をリリース名としており、リリース名はチャート内のKubernetesリソースのプレフィクスになる。予期せぬApplicationの再作成を防ぐにために、<code>releaseName</code>を明示的に設定した方が良い。</td>
<td></td>
</tr>
<tr>
<td><code>values</code></td>
<td><code>helm</code>コマンドに渡す<code>values</code>ファイルの値をハードコーディングする。</td>
<td>執筆時点 (2022/10/31) では、<code>values</code>ファイルは、同じチャートリポジトリ内にある必要がある。チャートと<code>values</code>ファイルが異なるリポジトリにある場合 (例：チャートはOSSを参照し、<code>values</code>ファイルは独自で定義する) 、<code>valueFiles</code>オプションの代わりに<code>values</code>オプションを使用する。<br>・<a href="https://github.com/argoproj/argo-cd/issues/2789#issuecomment-624043936">https://github.com/argoproj/argo-cd/issues/2789#issuecomment-624043936</a> <br>・<a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L48-L62">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L48-L62</a> <br><br>ただし、Applicationに<code>values</code>ファイルをハードコーディングした場合に、共有<code>values</code>ファイルと差分<code>values</code>ファイルに切り分けて定義できなくなってしまう。そこで、<code>values</code>オプションの一部分をHelmのテンプレート機能で動的に出力する。ただし、新機能として複数のリポジトリの<code>values</code>ファイルを参照する方法が提案されており、これを使用すれば異なるリポジトリに<code>values</code>ファイルがあっても<code>valueFiles</code>オプションで指定できるようになる。新機能のリリースあとはこちらを使用した方が良さそう。<br>・<a href="https://github.com/argoproj/argo-cd/pull/10432">https://github.com/argoproj/argo-cd/pull/10432</a></td>
</tr>
<tr>
<td><code>valueFiles</code></td>
<td><code>helm</code>コマンドに渡す<code>values</code>ファイルを設定する。</td>
<td></td>
</tr>
<tr>
<td><code>version</code></td>
<td><code>helm</code>コマンドのバージョンを設定する。デフォルトでは、<code>v3</code>になる。 ArgoCD自体をHelmでセットアップする場合は、インストールするHelmのバージョンを指定できるため、このオプションを使用する必要はない。</td>
<td>・<a href="https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#helm-version">https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#helm-version</a></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#helm-plugins">https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#helm-plugins</a></li>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L25">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L25</a></li>
<li><a href="https://mixi-developers.mixi.co.jp/argocd-with-helm-fee954d1003c">https://mixi-developers.mixi.co.jp/argocd-with-helm-fee954d1003c</a></li>
</ul>
</blockquote>
<p><code>helm</code>コマンドに渡す<code>values</code>ファイルの値をハードコーディングする。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">releaseName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="w">      </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">foo: foo</span>
<span class="w">        </span><span class="no">bar: bar</span>
<span class="w">        </span><span class="no">baz: baz</span>
</code></pre></div>
<p>ポーリング対象のリポジトリにある<code>values</code>ファイルを使用する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">releaseName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="w">      </span><span class="nt">valueFiles</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./prd.yaml</span>
</code></pre></div>
<p>デフォルトの<code>values</code>ファイルと実行環境別の<code>values</code>ファイルの複数を指定できる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">releaseName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="w">      </span><span class="nt">valueFiles</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default.yaml</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./prd.yaml</span>
</code></pre></div>
<p>暗号化された<code>values</code>ファイルを使用することもできる。</p>
<blockquote>
<ul>
<li><a href="https://github.com/camptocamp/argocd-helm-sops-example">https://github.com/camptocamp/argocd-helm-sops-example</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">releaseName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="w">      </span><span class="nt">valueFiles</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># helm-secretsを使用して暗号化されたvaluesファイル</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./secrets.yaml</span>
</code></pre></div>
<p>あらかじめ、SOPSを使用して、<code>values</code>ファイルを暗号化し、キーバリュー型バックエンドに設定しておく。</p>
<p>ポーリング対象のリポジトリに<code>.sops.yaml</code>ファイルと<code>secrets</code>ファイル (キーバリュー型バックエンド) を配置しておく必要がある。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># secretsファイル</span>

<span class="c1"># キーバリュー型バックエンド</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AWS_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENC[AES256...</span>
<span class="w">  </span><span class="nt">AWS_SECRET_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENC[AES256...</span>

<span class="nt">sops</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p>ArgoCDは暗号化された<code>values</code>ファイルを復号化し、チャートをインストールする。</p>
<p>補足としてArgoCD上では、Secretのdataキーは<code>base64</code>方式でエンコードされる。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># values.yamlファイルの暗号化された値を出力するテンプレートファイル</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-aws-credentials</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AWS_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="nv">.Values.data.AWS_ACCESS_KEY | b64en</span><span class="p p-Indicator">}}</span><span class="w"> </span><span class="c1"># base64方式でエンコードされる。</span>
<span class="w">  </span><span class="nt">AWS_SECRET_ACCESS_KEY</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="nv">.Values.data.AWS_SECRET_ACCESS_KEY | b64en</span><span class="p p-Indicator">}}</span>
</code></pre></div>
<p>ArgoCDはHelmの<code>v2</code>と<code>v3</code>の両方を保持している。</p>
<p>リリースするチャートの<code>.apiVersion</code>キーの値が<code>v1</code>であれば、ArgoCDはHelmの<code>v2</code>を使用して、一方で<code>.apiVersion</code>キーの値が<code>v2</code>であれば、Helmの<code>v3</code>を使用するようになっている。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/issues/2383#issuecomment-584441681">https://github.com/argoproj/argo-cd/issues/2383#issuecomment-584441681</a></li>
</ul>
</blockquote>
<p>ArgoCDを介してHelmを実行する場合、内部的には<code>helm template</code>コマンドとetcd上のマニフェストを<code>kubectl diff</code>コマンドで比較し、生じた差分を<code>kubectl apply</code>コマンドを使用してデプロイしている。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>helm<span class="w"> </span>template<span class="w"> </span>.<span class="w"> </span>--include-crds<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>diff<span class="w"> </span>-f<span class="w"> </span>-

$<span class="w"> </span>helm<span class="w"> </span>template<span class="w"> </span>.<span class="w"> </span>--include-crds<span class="w"> </span><span class="p">|</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/helm/helm/issues/6930#issuecomment-555242131">https://github.com/helm/helm/issues/6930#issuecomment-555242131</a></li>
<li><a href="https://qiita.com/kyohmizu/items/118bf654d0288da2294e">https://qiita.com/kyohmizu/items/118bf654d0288da2294e</a></li>
</ul>
</blockquote>
<p>そのため、Helmを手動でマニフェストをリリースする場合とは異なり、カスタムリソースのマニフェストの設定値を変更できる。</p>
<p>一方で、リリース履歴が存在しない。</p>
<p>Helmのリリース履歴の代わりとして、<code>argocd app history</code>コマンドで確認できる。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>argocd<span class="w"> </span>app<span class="w"> </span><span class="nb">history</span><span class="w"> </span>&lt;Application名&gt;

ID<span class="w">  </span>DATE<span class="w">                           </span>REVISION
<span class="m">0</span><span class="w">   </span><span class="m">2020</span>-04-12<span class="w"> </span><span class="m">10</span>:22:57<span class="w"> </span>+0900<span class="w"> </span>JST<span class="w">  </span><span class="m">1</span>.0.0
<span class="m">1</span><span class="w">   </span><span class="m">2020</span>-04-12<span class="w"> </span><span class="m">10</span>:49:14<span class="w"> </span>+0900<span class="w"> </span>JST<span class="w">  </span>&lt;バージョンタグ&gt;
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#random-data">https://argo-cd.readthedocs.io/en/stable/user-guide/helm/#random-data</a></li>
<li><a href="https://medium.com/@ch1aki/argocd%E3%81%A7helm%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95%E3%81%A8%E6%97%A2%E5%AD%98%E3%81%AErelease%E3%82%92argocd%E7%AE%A1%E7%90%86%E3%81%B8%E7%A7%BB%E8%A1%8C%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95-9108295887">https://medium.com/@ch1aki/argocd%E3%81%A7helm%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95%E3%81%A8%E6%97%A2%E5%AD%98%E3%81%AErelease%E3%82%92argocd%E7%AE%A1%E7%90%86%E3%81%B8%E7%A7%BB%E8%A1%8C%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95-9108295887</a></li>
<li><a href="https://github.com/argoproj/argo-cd/issues/4537#issuecomment-707997759">https://github.com/argoproj/argo-cd/issues/4537#issuecomment-707997759</a></li>
</ul>
</blockquote>
<h4 id="repourl_1">▼ repoURL<a class="headerlink" href="#repourl_1" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のチャートレジストリ内のリポジトリのURLを設定する。</p>
<p>パブリックリポジトリであれば認証が不要であるが、プライベートリポジトリであればこれが必要になる。</p>
<p>チャートリポジトリとして扱うために、リポジトリのルート直下に<code>index.yaml</code>ファイルと<code>.tgz</code>ファイルを配置して、チャートリポジトリとして扱えるようにしておく必要がある。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 例えば、GitHub内のGitHub Pagesをチャートリポジトリとして扱う。</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/hiroki-hasegawa/foo-repository.git</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications">https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications</a></li>
<li><a href="https://cloud.redhat.com/blog/continuous-delivery-with-helm-and-argo-cd">https://cloud.redhat.com/blog/continuous-delivery-with-helm-and-argo-cd</a></li>
</ul>
</blockquote>
<h4 id="targetrevision_1">▼ targetRevision<a class="headerlink" href="#targetrevision_1" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のチャートレジストリ内のリポジトリにあるチャートのバージョンタグを設定する。</p>
<p>バージョンタグは、<code>Chart.yaml</code>ファイルの<code>version</code>キーから確認する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;バージョンタグ&gt;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git">https://argo-cd.readthedocs.io/en/stable/user-guide/tracking_strategies/#git</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specsource-oci">.spec.source (OCIレジストリ内リポジトリの場合)<a class="headerlink" href="#specsource-oci" title="Permanent link">&para;</a></h3>
<h4 id="chart_1">▼ chart<a class="headerlink" href="#chart_1" title="Permanent link">&para;</a></h4>
<p>チャートレジストリと同じ。</p>
<h4 id="helm_1">▼ helm<a class="headerlink" href="#helm_1" title="Permanent link">&para;</a></h4>
<p>チャートレジストリと同じ。</p>
<h4 id="repourl_2">▼ repoURL<a class="headerlink" href="#repourl_2" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のOCIレジストリ内のリポジトリのURLを設定する。</p>
<p>パブリックリポジトリであれば認証が不要であるが、プライベートリポジトリであればこれが必要になる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 例えば、ECR内のリポジトリをOCIリポジトリとして扱う。</span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oci://&lt;AWSアカウントID&gt;.dkr.ecr.ap-northeast-1.amazonaws.com/&lt;チャート名&gt;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/68219458/connecting-an-app-in-argocd-to-use-a-helm-oci-repository">https://stackoverflow.com/questions/68219458/connecting-an-app-in-argocd-to-use-a-helm-oci-repository</a></li>
</ul>
</blockquote>
<h4 id="targetrevision_2">▼ targetRevision<a class="headerlink" href="#targetrevision_2" title="Permanent link">&para;</a></h4>
<p>ポーリング対象のOCIレジストリ内のリポジトリのバージョンタグを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;バージョンタグ&gt;</span>
</code></pre></div>
<p><br></p>
<h3 id="specdestination">.spec.destination<a class="headerlink" href="#specdestination" title="Permanent link">&para;</a></h3>
<h4 id="destination">▼ destinationとは<a class="headerlink" href="#destination" title="Permanent link">&para;</a></h4>
<p>apply先のKubernetesを設定する。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml</a></li>
</ul>
</blockquote>
<h4 id="namespace_1">▼ namespace<a class="headerlink" href="#namespace_1" title="Permanent link">&para;</a></h4>
<p>apply先のNamespaceを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-namespace</span>
</code></pre></div>
<p>注意点として、Applicationがリポジトリで検知したKubernetesリソースの<code>metadata.namespace</code>キーで、別のNamespaceで作成されている場合、そちらが優先される。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/issues/2280#issuecomment-530030455">https://github.com/argoproj/argo-cd/issues/2280#issuecomment-530030455</a></li>
<li><a href="https://github.com/argoproj/argo-cd/issues/6274#issuecomment-844494318">https://github.com/argoproj/argo-cd/issues/6274#issuecomment-844494318</a></li>
</ul>
</blockquote>
<h4 id="server">▼ server<a class="headerlink" href="#server" title="Permanent link">&para;</a></h4>
<p>kube-apiserverのURLを設定する。</p>
<p>ArgoCDの稼働しているClusterを指定する場合は、in-cluster (<code>https://kubernetes.default.svc</code>) を設定する。</p>
<p>一方で、外部のClusterを指定する場合、これのkube-apiserverのエンドポイントを指定する必要がある。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># AWS EKSの場合</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 外部のAWS EKS Clusterのkube-apiserverのエンドポイントを指定する。</span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://*****.gr7.ap-northeast-1.eks.amazonaws.com</span>
</code></pre></div>
<p><br></p>
<h3 id="specsyncpolicy">.spec.syncPolicy<a class="headerlink" href="#specsyncpolicy" title="Permanent link">&para;</a></h3>
<h4 id="syncpolicy">▼ syncPolicyとは<a class="headerlink" href="#syncpolicy" title="Permanent link">&para;</a></h4>
<p>Syncのオプションを設定する。</p>
<h4 id="automated">▼ automated<a class="headerlink" href="#automated" title="Permanent link">&para;</a></h4>
<p>GitOpsでのリポジトリ (例：GitHub、Helm、など) とKubernetesの間の自動Syncを設定する。</p>
<p>ArgoCDはリポジトリを<code>3</code>分間ごとにポーリングしており、このタイミングでリポジトリとの間でマニフェストの状態を同期する。</p>
<p>開発者には参照権限のみの認可スコープを付与し、ArgoCDの自動Syncを有効化すれば、開発者がデプロイできなくなり、安全性が増す。</p>
<p>また、複数の実行環境やチームがある場合に、Sync漏れを防げる。</p>
<p>一方で、App-Of-Appsを採用している場合に、親のApplicationの自動Syncが有効になっていると、子Applicationの設定値 (例：ターゲットブランチ) を変更できず煩わしい。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>allowEmpty</code></td>
<td>Prune中に、Application配下にリソースを検出できなくなると、Pruneは失敗するようになっている。Applicationが空 (配下にリソースがない) 状態を許可するか否かを設定する。</td>
<td>・<a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-pruning-with-allow-empty-v18">https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-pruning-with-allow-empty-v18</a><br>・<a href="https://stackoverflow.com/questions/67597403/argocd-stuck-at-deleting-but-resources-are-already-deleted">https://stackoverflow.com/questions/67597403/argocd-stuck-at-deleting-but-resources-are-already-deleted</a></td>
</tr>
<tr>
<td><code>prune</code></td>
<td>リソースを作成しつつ、不要になったリソースを自動削除するか否かを設定する。デフォルトでは、GitHubリポジトリでマニフェストが削除されても、ArgoCDはリソースを自動的に削除しない。開発者の気づかないうちに、残骸のKubernetesリソースが溜まる可能性があるため、有効化した方が良い。<code>rev:&lt;番号&gt;</code>という表記があるKubernetesリソースは、<code>prune</code>を忘れて新旧バージョンが存在していることを表す。Applicationを削除する時には、Application配下のKubernetesリソースが残骸にならないように、Application配下のKubernetesリソースを先に削除しておく。</td>
<td>- <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-pruning">https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-pruning</a></td>
</tr>
<tr>
<td><code>selfHeal</code></td>
<td>ArgoCD以外の方法でCluster内でマニフェストを変更した場合、リポジトリ (例：GitHub、Helm) の状態に自動Syncする。デフォルトでは、ArgoCD以外の方法で変更しても、自動Syncは実行しない。</td>
<td>- <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-self-healing">https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automatic-self-healing</a></td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automated-sync-policy">https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automated-sync-policy</a></li>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L113">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml#L113</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">automated</span><span class="p">:</span>
<span class="w">      </span><span class="nt">allowEmpty</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">prune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">selfHeal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automated-sync-policy">https://argo-cd.readthedocs.io/en/stable/user-guide/auto_sync/#automated-sync-policy</a></li>
</ul>
</blockquote>
<h4 id="syncoptions">▼ syncOptions<a class="headerlink" href="#syncoptions" title="Permanent link">&para;</a></h4>
<p>GitOpsでのマニフェストのSync処理の詳細を設定する。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CreateNamespace</code></td>
<td>Applicationの作成対象のNamespaceを自動的に作成する。</td>
<td>Namespaceので出どころがわからなくなるため、ArgoCDの<code>createNamespace</code>オプションは無効化し、Namespaceのマニフェストを定義しておく方が良い。</td>
</tr>
<tr>
<td><code>Validate</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>PrunePropagationPolicy</code></td>
<td>Sync後に不要になったKubernetesリソースの削除方法を設定する。削除方法は、KubernetesでのKubernetesリソースの削除の仕組みと同様に、バックグラウンド、フォアグラウンド、オルファン、がある。</td>
<td>・<a href="https://www.devopsschool.com/blog/sync-options-in-argo-cd/">https://www.devopsschool.com/blog/sync-options-in-argo-cd/</a><br>・<a href="https://hyoublog.com/2020/06/09/kubernetes-%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E5%89%8A%E9%99%A4%E9%80%A3%E9%8E%96%E5%89%8A%E9%99%A4/">https://hyoublog.com/2020/06/09/kubernetes-%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E5%89%8A%E9%99%A4%E9%80%A3%E9%8E%96%E5%89%8A%E9%99%A4/</a></td>
</tr>
<tr>
<td><code>PruneLast</code></td>
<td>通常のPruneでは、Syncしながら古いリソースを独立的に削除していく。PruneLastでは、一度全てのKubernetesリソースをSyncしてしまい、正常に稼働した後に古いリソースをまとめて削除していく。</td>
<td>- <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#prune-last">https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#prune-last</a></td>
</tr>
<tr>
<td><code>ServerSideApply</code></td>
<td>Sync時に、<code>kubectl apply</code>コマンド<code>--server-side</code>オプションを有効化する。</td>
<td>- <a href="https://argo-cd.readthedocs.io/en/latest/user-guide/sync-options/#server-side-apply">https://argo-cd.readthedocs.io/en/latest/user-guide/sync-options/#server-side-apply</a></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-application</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">syncOptions</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CreateNamespace=true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PrunePropagationPolicy=background</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PruneLast=true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServerSideApply=true</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#sync-options">https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#sync-options</a></li>
<li><a href="https://dev.classmethod.jp/articles/argocd-for-external-cluster/">https://dev.classmethod.jp/articles/argocd-for-external-cluster/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="03-applicationset">03. ApplicationSet<a class="headerlink" href="#03-applicationset" title="Permanent link">&para;</a></h2>
<h3 id="applicationset">ApplicationSet<a class="headerlink" href="#applicationset" title="Permanent link">&para;</a></h3>
<p>ArgoCDのApplicationは、<code>1</code>個のClusterにしかマニフェストを送信できない。</p>
<p>そのため、Clusterの数だけApplicationを個別に管理しなければならない。</p>
<p>一方で、ApplicationSetであれば、異なるClusterに対応するApplicationを一括して管理できる。</p>
<p>なお、Helmを使用している場合は、ApplicationSetの代わりに<code>range</code>関数を使用できる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ApplicationSet</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guestbook</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">generators</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">list</span><span class="p">:</span>
<span class="w">        </span><span class="nt">elements</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cluster</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-eks-cluster</span>
<span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://*****.gr7.ap-northeast-1.eks.amazonaws.com</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cluster</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-kubeadm-cluster</span>
<span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Cluster名を出力する。</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{cluster}}&quot;</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="nt">source</span><span class="p">:</span>
<span class="w">        </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/hiroki-hasegawa/foo-manifests.git</span>
<span class="w">        </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HEAD</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">destination</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># ClusterのURLを出力する。</span>
<span class="w">        </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{url}}&quot;</span>
<span class="w">        </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-namespace</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://techstep.hatenablog.com/entry/2021/12/02/085034">https://techstep.hatenablog.com/entry/2021/12/02/085034</a></li>
<li><a href="https://blog.argoproj.io/introducing-the-applicationset-controller-for-argo-cd-982e28b62dc5">https://blog.argoproj.io/introducing-the-applicationset-controller-for-argo-cd-982e28b62dc5</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="04-appproject">04. AppProject<a class="headerlink" href="#04-appproject" title="Permanent link">&para;</a></h2>
<h3 id="appproject">AppProjectとは<a class="headerlink" href="#appproject" title="Permanent link">&para;</a></h3>
<p>単一のCluster内で、Applicationの責務境界のテナントを作成する。</p>
<p>CRDの設定 (<code>scoped: Namespace</code>) からもわかるように、AppProjectはNamespacedスコープなカスタムリソースである。</p>
<p>Applicationが選べるAppProjectを制限できるように、Applicationが選べるAppProjectはNamespace単位で分割する。</p>
<p>もし全てのApplicationとAppProjectを同じNamespaceで管理してしまうと、自由にAppProjectを変更して、そのProjectにデプロイできてしまう。</p>
<blockquote>
<ul>
<li><a href="https://techstep.hatenablog.com/entry/2021/12/30/233323#Project%E3%81%A8%E3%81%AF">https://techstep.hatenablog.com/entry/2021/12/30/233323#Project%E3%81%A8%E3%81%AF</a></li>
<li><a href="https://github.com/argoproj/argo-cd/issues/11058">https://github.com/argoproj/argo-cd/issues/11058</a></li>
<li><a href="https://blog.cybozu.io/entry/2020/02/04/110000">https://blog.cybozu.io/entry/2020/02/04/110000</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="default-appproject">default AppProject<a class="headerlink" href="#default-appproject" title="Permanent link">&para;</a></h3>
<p>ArgoCDは、最も認可スコープの大きい<code>default</code>のAppProjectを自動的に作成する。</p>
<p><code>default</code>のAppProjectでは、任意のNamespaceでApplicationを作成できる。</p>
<p>テナントを完全に分離するために、<code>default</code>のAppProjectにはApplicationを作成せずに、ユーザー定義のAppProjectを使用する。</p>
<p>なお同じAppProject内では、ArgoCDのApplication名は一意にする必要がある。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterResourceWhitelist</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">  </span><span class="nt">destinations</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">  </span><span class="nt">sourceRepos</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="c1"># 執筆時点 (2023/05/17) では、defaultのAppProjectでsourceNamespacesキーは使用できない</span>
<span class="c1"># sourceNamespaces</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/user-guide/projects/#the-default-project">https://argo-cd.readthedocs.io/en/stable/user-guide/projects/#the-default-project</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#projects">https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#projects</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specsourcenamespaces">spec.sourceNamespaces<a class="headerlink" href="#specsourcenamespaces" title="Permanent link">&para;</a></h3>
<h4 id="sourcenamespaces">▼ sourceNamespacesとは<a class="headerlink" href="#sourcenamespaces" title="Permanent link">&para;</a></h4>
<p>AppProjectに所属可能なApplicationを制御する。</p>
<p>設定したNamespace内にあるApplicationのみが、そのAppProjectに所属できる。</p>
<p>もし全てのNamespaceを許可する場合は、<code>*</code> (アスタリスク) を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># AppProjectへの所属を許可したいApplicationのNamespaceを設定する</span>
<span class="w">  </span><span class="nt">sourceNamespaces</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
</code></pre></div>
<h4 id="configmap">▼ ConfigMap<a class="headerlink" href="#configmap" title="Permanent link">&para;</a></h4>
<p>ArgoCDのApplicationを作成できるNamespaceは、デフォルトであると<code>argocd</code>のため、それ以外を許可するためにも必要である。</p>
<p>argocd-serverとapplication-controllerの両方で、設定が必要である。</p>
<p>argocd-cmd-params-cmの<code>.application.namespaces</code>では、アスタリスク (<code>*</code>) としておく。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-cmd-params-cm</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">application.namespaces</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
</code></pre></div>
<p>あるいは、application-controllerの起動時にパラメーターとして渡しても良い。</p>
<div class="highlight"><pre><span></span><code>apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Pod
metadata:
<span class="w">  </span>name:<span class="w"> </span>argocd-application-controller
<span class="w">  </span>namespace:<span class="w"> </span>argocd
spec:
<span class="w">  </span>containers:
<span class="w">    </span>-<span class="w"> </span>name:<span class="w"> </span>argocd-application-controller
<span class="w">      </span>image:<span class="w"> </span>quay.io/argoproj/argocd:latest
<span class="w">      </span>args:
<span class="w">        </span>-<span class="w"> </span>/usr/local/bin/argocd-application-controller
<span class="w">        </span><span class="c1"># 起動時のパラメーターとして</span>
<span class="w">        </span>-<span class="w"> </span>--application-namespaces<span class="o">=</span><span class="s2">&quot;*&quot;</span>

<span class="w">  </span>...
</code></pre></div>
<div class="highlight"><pre><span></span><code>apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Pod
metadata:
<span class="w">  </span>name:<span class="w"> </span>argocd-server
<span class="w">  </span>namespace:<span class="w"> </span>argocd
spec:
<span class="w">  </span>containers:
<span class="w">    </span>-<span class="w"> </span>name:<span class="w"> </span>argocd-server
<span class="w">      </span>image:<span class="w"> </span>quay.io/argoproj/argocd:latest
<span class="w">      </span>args:
<span class="w">        </span>-<span class="w"> </span>/usr/local/bin/argocd-server
<span class="w">        </span><span class="c1"># 起動時のパラメーターとして</span>
<span class="w">        </span>-<span class="w"> </span>--application-namespaces<span class="o">=</span><span class="s2">&quot;*&quot;</span>

<span class="w">  </span>...
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#cluster-scoped-argo-cd-installation">https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#cluster-scoped-argo-cd-installation</a></li>
<li><a href="https://github.com/argoproj/argo-cd/pull/9755">https://github.com/argoproj/argo-cd/pull/9755</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#implementation-details">https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#implementation-details</a></li>
<li><a href="https://developers.redhat.com/articles/2022/04/13/manage-namespaces-multitenant-clusters-argo-cd-kustomize-and-helm#a_simple_argo_cd_application">https://developers.redhat.com/articles/2022/04/13/manage-namespaces-multitenant-clusters-argo-cd-kustomize-and-helm#a_simple_argo_cd_application</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/server-commands/argocd-application-controller/">https://argo-cd.readthedocs.io/en/stable/operator-manual/server-commands/argocd-application-controller/</a></li>
</ul>
</blockquote>
<h4 id="namespaced">▼ デフォルトのNamespacedスコープモード<a class="headerlink" href="#namespaced" title="Permanent link">&para;</a></h4>
<p>デフォルトのNamespacedスコープモードのArgoCDでは、application-controllerとrepo-serverが自分自身のNamespaceのみを見る。</p>
<p>そのため、異なるNamespace間で同じ親Applicationがあっても、Namespaceを超えて親を共有してしまうことがない。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/pull/9755">https://github.com/argoproj/argo-cd/pull/9755</a></li>
<li><a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#cluster-scoped-argo-cd-installation">https://argo-cd.readthedocs.io/en/stable/operator-manual/app-any-namespace/#cluster-scoped-argo-cd-installation</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="sourcerepos">sourceRepos<a class="headerlink" href="#sourcerepos" title="Permanent link">&para;</a></h3>
<p>AppProject内でポーリング可能なリポジトリを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span><span class="w"> </span><span class="c1"># 実行環境名、運用チーム名など</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">sourceRepos</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
</code></pre></div>
<p><br></p>
<h3 id="description">description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span><span class="w"> </span><span class="c1"># 実行環境名、運用チーム名など</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">This is application in prd environment</span>
</code></pre></div>
<p><br></p>
<h3 id="destinations">destinations<a class="headerlink" href="#destinations" title="Permanent link">&para;</a></h3>
<p>AppProjectに所属するApplicationが指定可能なClusterを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span><span class="w"> </span><span class="c1"># 実行環境名、運用チーム名など</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">destinations</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"> </span><span class="c1"># 所属するApplictionは、全てのNamespaceにデプロイできる。</span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://*****.gr7.ap-northeast-1.eks.amazonaws.com</span><span class="w"> </span><span class="c1"># 所属するApplictionは、指定したURLのClusterのみを指定できる。</span>
</code></pre></div>
<p><br></p>
<h3 id="clusterresourcewhitelist">clusterResourceWhitelist<a class="headerlink" href="#clusterresourcewhitelist" title="Permanent link">&para;</a></h3>
<p>AppProject内でApplicationがデプロイできるClusterスコープ (Namespaceのない) なリソースを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span><span class="w"> </span><span class="c1"># 実行環境名、運用チーム名など</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clusterResourceWhitelist</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
</code></pre></div>
<h3 id="namespaceresourcewhitelist">namespaceResourceWhitelist<a class="headerlink" href="#namespaceresourcewhitelist" title="Permanent link">&para;</a></h3>
<p>AppProject内でApplicationがデプロイできるNamespacedスコープ (Namespaceのある) なリソースを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prd</span><span class="w"> </span><span class="c1"># 実行環境名、運用チーム名など</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"> </span><span class="c1"># サービス名、など</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespaceResourceWhitelist</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
</code></pre></div>
<p><br></p>
<h2 id="05-argocd-notification">05. ArgoCD Notification<a class="headerlink" href="#05-argocd-notification" title="Permanent link">&para;</a></h2>
<h3 id="_15">セットアップ<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/argoproj-labs/argocd-notifications/release-1.0/manifests/install.yaml
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argocd-notifications.readthedocs.io/en/stable/#getting-started">https://argocd-notifications.readthedocs.io/en/stable/#getting-started</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="06-configmanagementplugin">06. ConfigManagementPlugin<a class="headerlink" href="#06-configmanagementplugin" title="Permanent link">&para;</a></h2>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/infrastructure_as_code/infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_plugin.html">https://hiroki-it.github.io/tech-notebook/infrastructure_as_code/infrastructure_as_code_kubernetes_cncf_project_argocd_resource_definition_plugin.html</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="07-rollout">07. Rollout<a class="headerlink" href="#07-rollout" title="Permanent link">&para;</a></h2>
<h3 id="specanalysis">.spec.analysis<a class="headerlink" href="#specanalysis" title="Permanent link">&para;</a></h3>
<h4 id="analysis">▼ analysisとは<a class="headerlink" href="#analysis" title="Permanent link">&para;</a></h4>
<p>Progressive Deliveryを使用する場合、詳細を設定する。</p>
<blockquote>
<ul>
<li><a href="https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml">https://github.com/argoproj/argo-cd/blob/v2.6.0/docs/operator-manual/application.yaml</a></li>
</ul>
</blockquote>
<h4 id="successfulrunhistorylimit">▼ successfulRunHistoryLimit<a class="headerlink" href="#successfulrunhistorylimit" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">successfulRunHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>
<h4 id="unsuccessfulrunhistorylimit">▼ unsuccessfulRunHistoryLimit<a class="headerlink" href="#unsuccessfulrunhistorylimit" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">unsuccessfulRunHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>
<p><br></p>
<h3 id="specstrategy">.spec.strategy<a class="headerlink" href="#specstrategy" title="Permanent link">&para;</a></h3>
<h4 id="strategy">▼ strategyとは<a class="headerlink" href="#strategy" title="Permanent link">&para;</a></h4>
<p>デプロイ手法を設定する。</p>
<p>大前提として、そもそもArgoCDは<code>kubectl apply</code>コマンドでリソースを作成しているだけなため、デプロイ手法は、Deploymentの<code>.spec.strategy</code>キーや、DaemonSetとStatefulSetの<code>.spec.updateStrategy</code>キーの設定値に依存する。</p>
<p>ArgoCDのstrategyオプションを使用することにより、これらのKubernetesリソース自体を冗長化し、より安全にapplyを行える。</p>
<h4 id="bluegreen">▼ blueGreen<a class="headerlink" href="#bluegreen" title="Permanent link">&para;</a></h4>
<p><img alt="argocd_blue-green-deployment" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/argocd_blue-green-deployment.png" /></p>
<p>ブルー/グリーンデプロイメントを使用して、新しいPodをリリースする。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>activeService</code></td>
<td>現環境へのルーティングに使用するServiceを設定する。</td>
</tr>
<tr>
<td><code>autoPromotionEnabled</code></td>
<td>現環境から新環境への自動切り替えを有効化するか否かを設定する。もし無効化した場合、<code>autoPromotionSeconds</code>の秒数だけ切り替えを待機する。</td>
</tr>
<tr>
<td><code>autoPromotionSeconds</code></td>
<td>現環境から新環境への切り替えを手動で行う場合、切り替えを待機する最大秒数を設定する。最大秒数が経過すると、自動的に切り替わってしまうことに注意する。</td>
</tr>
<tr>
<td><code>previewReplicaCount</code></td>
<td>新環境のPod数を設定する。</td>
</tr>
<tr>
<td><code>previewService</code></td>
<td>新環境へのルーティングに使用するServiceを設定する。</td>
</tr>
<tr>
<td><code>scaleDownDelaySeconds</code></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-blue-green-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ブルー/グリーンデプロイメイト</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-active-service</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-preview-service</span>
<span class="w">      </span><span class="nt">previewReplicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argoproj.github.io/argo-rollouts/features/bluegreen/">https://argoproj.github.io/argo-rollouts/features/bluegreen/</a></li>
<li><a href="https://argoproj.github.io/argo-rollouts/concepts/#blue-green">https://argoproj.github.io/argo-rollouts/concepts/#blue-green</a></li>
<li><a href="https://korattablog.com/2020/06/19/argocd%E3%81%AB%E3%82%88%E3%82%8Bbluegreen%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%82%92%E8%A9%A6%E3%81%99/">https://korattablog.com/2020/06/19/argocd%E3%81%AB%E3%82%88%E3%82%8Bbluegreen%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%82%92%E8%A9%A6%E3%81%99/</a></li>
</ul>
</blockquote>
<h4 id="canary">▼ canary<a class="headerlink" href="#canary" title="Permanent link">&para;</a></h4>
<p><img alt="argocd_canary-release" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/argocd_canary-release.png" /></p>
<p>カナリアリリースを使用して、新しいPodをリリースする。</p>
<table>
<thead>
<tr>
<th>キー</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>step</code></td>
<td>カナリアリリースの手順を設定する。<br>・<code>setWeight</code>：新しいPodへの重み付けを設定する。<br>・<code>pause</code>：次の手順に移行せずに待機する。待機秒数を設定できる。</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-canary-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># カナリアリリース</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span>
<span class="w">            </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argoproj.github.io/argo-rollouts/features/canary/">https://argoproj.github.io/argo-rollouts/features/canary/</a></li>
<li><a href="https://argoproj.github.io/argo-rollouts/concepts/#canary">https://argoproj.github.io/argo-rollouts/concepts/#canary</a></li>
<li><a href="https://korattablog.com/2020/06/19/argocd%E3%81%AEcanary-deployment%E3%82%92%E8%A9%A6%E3%81%99/">https://korattablog.com/2020/06/19/argocd%E3%81%AEcanary-deployment%E3%82%92%E8%A9%A6%E3%81%99/</a></li>
</ul>
</blockquote>
<p>サービスメッシュツールでは手動カナリアリリースを実装できるが、これと連携し、サービスメッシュツールで自動カナリアリリースを実現できる。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-canary-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># カナリアリリース</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="nt">canaryService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canary-virtual-service</span>
<span class="w">        </span><span class="nt">stableService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stable-virtual-service</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://argo-rollouts.readthedocs.io/en/latest/features/traffic-management/istio/">https://argo-rollouts.readthedocs.io/en/latest/features/traffic-management/istio/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="08-workflow">08. Workflow<a class="headerlink" href="#08-workflow" title="Permanent link">&para;</a></h2>
<h3 id="specentrypoint">.spec.entrypoint<a class="headerlink" href="#specentrypoint" title="Permanent link">&para;</a></h3>
<h4 id="entrypoint">▼ entrypointとは<a class="headerlink" href="#entrypoint" title="Permanent link">&para;</a></h4>
<p>一番最初に使用するテンプレート名を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-workflow</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-template</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="spectemplates">.spec.templates<a class="headerlink" href="#spectemplates" title="Permanent link">&para;</a></h3>
<h4 id="templates">▼ templatesとは<a class="headerlink" href="#templates" title="Permanent link">&para;</a></h4>
<p>パイプラインの処理を設定する。</p>
<p>WorkflowTemplateとして切り分けても良い。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-workflow</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-template</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-template</span>
<span class="w">      </span><span class="nt">script</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpline:1.0.0</span>
<span class="w">          </span><span class="nt">command</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">          </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">echo &quot;Hello World&quot;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="specworkflowtemplateref">.spec.workflowTemplateRef<a class="headerlink" href="#specworkflowtemplateref" title="Permanent link">&para;</a></h3>
<h4 id="workflowtemplateref">▼ workflowTemplateRefとは<a class="headerlink" href="#workflowtemplateref" title="Permanent link">&para;</a></h4>
<p>切り分けたWorkflowTemplateの名前を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-workflow</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workflowTemplateRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello-world-workflow-template</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="09-workflowtemplate">09. WorkflowTemplate<a class="headerlink" href="#09-workflowtemplate" title="Permanent link">&para;</a></h2>
<h3 id="spectemplates_1">.spec.templates<a class="headerlink" href="#spectemplates_1" title="Permanent link">&para;</a></h3>
<h4 id="templates_1">▼ templatesとは<a class="headerlink" href="#templates_1" title="Permanent link">&para;</a></h4>
<p>パイプラインの処理を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkflowTemplate</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello-world-workflow-template</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-template</span>
<span class="w">      </span><span class="nt">script</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpline:1.0.0</span>
<span class="w">          </span><span class="nt">cource</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">echo &quot;Hello World&quot;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<h4 id="script">▼ script<a class="headerlink" href="#script" title="Permanent link">&para;</a></h4>
<p>コンテナをプルし、コンテナ内でスクリプトを実行する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkflowTemplate</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello-world-workflow-template</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-template</span>
<span class="w">      </span><span class="nt">script</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpline:1.0.0</span>
<span class="w">          </span><span class="nt">command</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">          </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">echo &quot;Hello World&quot;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<h4 id="steps">▼ steps<a class="headerlink" href="#steps" title="Permanent link">&para;</a></h4>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220">https://zenn.dev/nameless_gyoza/articles/argo-wf-20200220</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="configmap_1">ConfigMap<a class="headerlink" href="#configmap_1" title="Permanent link">&para;</a></h3>
<h4 id="datatrigger">▼ data.trigger<a class="headerlink" href="#datatrigger" title="Permanent link">&para;</a></h4>
<p>通知条件を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-notification-cm</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">trigger.on-sync-status-unknown</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">- when: app.status.sync.status == &#39;Unknown&#39;</span>
<span class="w">      </span><span class="no">send: [app-sync-status, github-commit-status]</span>
<span class="w">  </span><span class="nt">trigger.sync-operation-change</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">- when: app.status.operationState.phase in [&#39;Error&#39;, &#39;Failed&#39;]</span>
<span class="w">      </span><span class="no">send: [app-sync-failed, github-commit-status]</span>
<span class="w">  </span><span class="nt">trigger.on-deployed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">- when: app.status.operationState.phase in [&#39;Succeeded&#39;] and app.status.health.status == &#39;Healthy&#39;</span>
<span class="w">      </span><span class="no">oncePer: app.status.sync.revision</span>
<span class="w">      </span><span class="no">send: [app-sync-succeeded]</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#triggers">https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#triggers</a></li>
</ul>
</blockquote>
<h4 id="dataservice">▼ data.service<a class="headerlink" href="#dataservice" title="Permanent link">&para;</a></h4>
<p>通知先のURLを設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-notifications-cm</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">service.slack</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">token: *****</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#services">https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#services</a></li>
</ul>
</blockquote>
<h4 id="datatemplate">▼ data.template<a class="headerlink" href="#datatemplate" title="Permanent link">&para;</a></h4>
<p>通知内容を設定する。</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd-notifications-cm</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">env: prd</span>

<span class="w">  </span><span class="nt">template.a-slack-template-with-context</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">message: &quot;ArgoCD sync in {{ .context.env }}&quot;</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#templates">https://zenn.dev/nameless_gyoza/articles/introduction-argocd-notifications#templates</a></li>
</ul>
</blockquote>
<p><br></p>

  <hr>
<div class="md-source-file">
  <small>
    
      最終更新日:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-10-11</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  ページトップへ戻る
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/hiroki-it" target="_blank" rel="noopener" title="GitHubアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/Hiroki__IT" target="_blank" rel="noopener" title="Twitterアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.prune", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../assets/javascripts/bundle.94c44541.min.js"></script>
      
    
  </body>
</html>