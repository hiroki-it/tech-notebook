
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="メソッド/データ@Goの知見を記録しています。">
      
      
        <meta name="author" content="Hiroki Hasegawa">
      
      
        <link rel="canonical" href="https://hiroki-it.github.io/tech-notebook/language/language_go_logic_method_data.html">
      
      
        <link rel="prev" href="language_go_command.html">
      
      
        <link rel="next" href="language_go_logic_validation.html">
      
      
      <link rel="icon" href="../assets/images/logo_v2.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.3.1">
    
    
      
        <title>【IT技術の知見】メソッド/データ@Go - 俺の技術ノート</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Japanese:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans Japanese";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-HPJGWKTH9W"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-HPJGWKTH9W",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-HPJGWKTH9W",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dark" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#go" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="俺の技術ノート" class="md-header__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            俺の技術ノート
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              【IT技術の知見】メソッド/データ@Go
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
    
  
  当サイトについて

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../about.html" class="md-tabs__link">
        
  
    
  
  『俺』

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../system/index.html" class="md-tabs__link">
          
  
    
  
  🌳 システム

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/index.html" class="md-tabs__link">
          
  
    
  
  🧬 ソフトウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/application/index.html" class="md-tabs__link">
          
  
    
  
  🚀 アプリ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/middleware/index.html" class="md-tabs__link">
          
  
    
  
  🤝🏻 ミドルウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software/basic/index.html" class="md-tabs__link">
          
  
    
  
  🐧 OS

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
    
  
  🔠 言語

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../testing/index.html" class="md-tabs__link">
          
  
    
  
  🧪 テスト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../hardware/index.html" class="md-tabs__link">
          
  
    
  
  💻 ハードウェア

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../network/index.html" class="md-tabs__link">
          
  
    
  
  🌏 ネットワーク

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/index.html" class="md-tabs__link">
          
  
    
  
  🔐 セキュリティ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cloud_computing/index.html" class="md-tabs__link">
          
  
    
  
  ⛅️ 3大クラウド

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../virtualization/index.html" class="md-tabs__link">
          
  
    
  
  📦 仮想化

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../infrastructure_as_code/index.html" class="md-tabs__link">
          
  
    
  
  ⚙️ IaC

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../infrastructure_as_code/kubernetes/index.html" class="md-tabs__link">
          
  
    
  
  ☸️ K8s

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../infrastructure_as_code/kubernetes_addon/index.html" class="md-tabs__link">
          
  
    
  
  ⏬ K8sアドオン

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../infrastructure_as_code/cncf_projects/index.html" class="md-tabs__link">
          
  
    
  
  🌊 CNCFプロジェクト

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/index.html" class="md-tabs__link">
          
  
    
  
  ♾️ DevOps

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../devops/cicd/index.html" class="md-tabs__link">
          
  
    
  
  🔄 CI/CD

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../observability/index.html" class="md-tabs__link">
          
  
    
  
  🔎 可観測性

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../software_development_methodology/index.html" class="md-tabs__link">
          
  
    
  
  👥 開発手法

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://hiroki-it.github.io/tech-notebook/" title="俺の技術ノート" class="md-nav__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    俺の技術ノート
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    当サイトについて
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../about.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    『俺』
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../system/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🌳 システム
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🧬 ソフトウェア
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/application/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🚀 アプリ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/middleware/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🤝🏻 ミドルウェア
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software/basic/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🐧 OS
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    🔠 言語
  </span>
  

            </a>
            
              <label class="md-nav__link " for="__nav_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            🔠 言語
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_type.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    言語の種類
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_process_mode.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    言語別の処理方式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="language_data_description_language_json.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ データ記述言語
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="language_php.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ PHP
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="language_js_prototype_based.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ JavaScript
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7" checked>
        
          <label class="md-nav__link" for="__nav_8_7" id="__nav_8_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ■ Go
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_7">
            <span class="md-nav__icon md-icon"></span>
            ■ Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_go.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_go_command.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    コマンド
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7_3" checked>
        
          <label class="md-nav__link" for="__nav_8_7_3" id="__nav_8_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ■ ロジック
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_7_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_7_3">
            <span class="md-nav__icon md-icon"></span>
            ■ ロジック
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    メソッド/データ
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="language_go_logic_method_data.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    メソッド/データ
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="このページの内容">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      このページの内容
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01. データ型
  </a>
  
    <nav class="md-nav" aria-label="01. データ型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    データ型の種類
  </a>
  
    <nav class="md-nav" aria-label="データ型の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ▼ データ型の初期値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ プリミティブ型に所属するデータ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ▼ 合成型に所属するデータ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ▼ 参照型に所属するデータ型
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    プリミティブ型のまとめ
  </a>
  
    <nav class="md-nav" aria-label="プリミティブ型のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ プリミティブ型とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defined-type" class="md-nav__link">
    ▼ Defined Typeによるユーザー定義のプリミティブ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ プリミティブ型とメモリの関係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▼ 各データ型のサイズ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    構造体
  </a>
  
    <nav class="md-nav" aria-label="構造体">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▼ 構造体とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defined-type_1" class="md-nav__link">
    ▼ Defined Typeによるユーザー定義の構造体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 使用不可のフィールド名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ 初期化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#di" class="md-nav__link">
    ▼ DI (依存性注入)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ▼ 埋め込みによる委譲
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    ▼ 無名構造体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    JSON
  </a>
  
    <nav class="md-nav" aria-label="JSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json_1" class="md-nav__link">
    ▼ JSONと構造体のマッピング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omitempty" class="md-nav__link">
    ▼ omitempty
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    配列
  </a>
  
    <nav class="md-nav" aria-label="配列">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    ▼ 配列とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    ▼ 宣言と代入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    ▼ 配列とメモリの関係
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    ポインタ
  </a>
  
    <nav class="md-nav" aria-label="ポインタ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    ▼ ポインタ型とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    ▼ 参照演算子 (&amp;)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    ▼ 間接参照演算子 (*)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    ▼ ポインタ型で扱うべきデータ型
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    スライス
  </a>
  
    <nav class="md-nav" aria-label="スライス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    ▼ スライスとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    ▼ 宣言と代入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    ▼ 配列の値の参照
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    ▼ 要素の追加
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    マップ
  </a>
  
    <nav class="md-nav" aria-label="マップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    ▼ 単一のプリミティブ型を値に持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    ▼ スライス型を値に持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    ▼ 複数のデータ型を持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    ▼ マップ値の抽出
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    インターフェース
  </a>
  
    <nav class="md-nav" aria-label="インターフェース">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    ▼ 埋め込みによる委譲
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    ▼ アップキャストの可否を利用した検証
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    ▼ 緩い型としてのインターフェース
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    ▼ 型アサーション
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    ▼ errorインターフェース
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    ▼ stringインターフェース
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nil" class="md-nav__link">
    nil
  </a>
  
    <nav class="md-nav" aria-label="nil">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nil_1" class="md-nav__link">
    ▼ nilとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    ▼ ポインタの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    ▼ インターフェースの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02" class="md-nav__link">
    02. 関数
  </a>
  
    <nav class="md-nav" aria-label="02. 関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main" class="md-nav__link">
    main関数
  </a>
  
    <nav class="md-nav" aria-label="main関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main_1" class="md-nav__link">
    ▼ main関数とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    独自関数
  </a>
  
    <nav class="md-nav" aria-label="独自関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    ▼ 関数とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    ▼ 引数の型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#closure" class="md-nav__link">
    ▼ Closure (無名関数) とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    ▼ 即時関数とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    メソッド
  </a>
  
    <nav class="md-nav" aria-label="メソッド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    ▼ メソッドとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    ▼ レシーバによる紐付け
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    ▼ 値レシーバ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    ▼ ポインタレシーバ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defer" class="md-nav__link">
    defer関数
  </a>
  
    <nav class="md-nav" aria-label="defer関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defer_1" class="md-nav__link">
    ▼ defer関数とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defer_2" class="md-nav__link">
    ▼ 複数のdefer関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    返却値
  </a>
  
    <nav class="md-nav" aria-label="返却値">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    ▼ 複数の返却値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    ▼ 返却値の破棄
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04" class="md-nav__link">
    04. 変数
  </a>
  
    <nav class="md-nav" aria-label="04. 変数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    定義 (宣言+代入)
  </a>
  
    <nav class="md-nav" aria-label="定義 (宣言+代入)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    ▼ 明示的な定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    ▼ 暗黙的な定義 (型推論)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    ▼ 再宣言
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    定義位置の種類
  </a>
  
    <nav class="md-nav" aria-label="定義位置の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    ▼ パッケージ変数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    ▼ ローカル変数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03. スコープ
  </a>
  
    <nav class="md-nav" aria-label="03. スコープ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    変数、定数
  </a>
  
    <nav class="md-nav" aria-label="変数、定数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    ▼ パッケージ内外から参照可能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    ▼ パッケージ内のみ参照可能
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    関数
  </a>
  
    <nav class="md-nav" aria-label="関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    ▼ パッケージ内外から参照可能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    ▼ パッケージ内のみ参照可能
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04_1" class="md-nav__link">
    04. 制御文
  </a>
  
    <nav class="md-nav" aria-label="04. 制御文">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    配列またはスライスの走査
  </a>
  
    <nav class="md-nav" aria-label="配列またはスライスの走査">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-range" class="md-nav__link">
    ▼ for ... range
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05. 処理の種類
  </a>
  
    <nav class="md-nav" aria-label="05. 処理の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    同期処理
  </a>
  
    <nav class="md-nav" aria-label="同期処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    ▼ 同期処理とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    非同期処理 (並行処理)
  </a>
  
    <nav class="md-nav" aria-label="非同期処理 (並行処理)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    ▼ 非同期処理 (並行処理) とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    並列処理
  </a>
  
    <nav class="md-nav" aria-label="並列処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    ▼ 並列処理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel" class="md-nav__link">
    ▼ channel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitgroup" class="md-nav__link">
    ▼ WaitGroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errgroup" class="md-nav__link">
    ▼ errgroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    ▼ select
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06. エラーキャッチ、例外スロー
  </a>
  
    <nav class="md-nav" aria-label="06. エラーキャッチ、例外スロー">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go_1" class="md-nav__link">
    Goにおけるエラーキャッチと例外スロー
  </a>
  
    <nav class="md-nav" aria-label="Goにおけるエラーキャッチと例外スロー">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    ▼ 例外スローのある言語の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_2" class="md-nav__link">
    ▼ Goには例外が無い
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    エラーキャッチ
  </a>
  
    <nav class="md-nav" aria-label="エラーキャッチ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nil_2" class="md-nav__link">
    ▼ nilの比較検証
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_1" class="md-nav__link">
    errorインターフェース
  </a>
  
    <nav class="md-nav" aria-label="errorインターフェース">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    ▼ 標準エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new" class="md-nav__link">
    ▼ New関数による独自エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fmterrorf" class="md-nav__link">
    ▼ fmt.Errorfメソッドによる独自エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    ▼ 構造体による独自エラー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xerrors" class="md-nav__link">
    xerrorsパッケージ
  </a>
  
    <nav class="md-nav" aria-label="xerrorsパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xerrors_1" class="md-nav__link">
    ▼ xerrorsパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new_1" class="md-nav__link">
    ▼ New関数によるトレース付与
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorf" class="md-nav__link">
    ▼ Errorfメソッドによるトレース付与
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-02" class="md-nav__link">
    06-02. ロギング
  </a>
  
    <nav class="md-nav" aria-label="06-02. ロギング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    logパッケージ
  </a>
  
    <nav class="md-nav" aria-label="logパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log_1" class="md-nav__link">
    ▼ logパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    ▼ 接尾辞Printメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fatal" class="md-nav__link">
    ▼ 接尾辞Fatalメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panic" class="md-nav__link">
    ▼ 接尾辞Panicメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07. テンプレート
  </a>
  
    <nav class="md-nav" aria-label="07. テンプレート">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    ロジック
  </a>
  
    <nav class="md-nav" aria-label="ロジック">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    ▼ コメント
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    ▼ 条件分岐
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    テンプレート内のエスケープ
  </a>
  
    <nav class="md-nav" aria-label="テンプレート内のエスケープ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    ▼ テンプレート内のエスケープとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    ▼ {{ "&lt;記号&gt;" }}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_85" class="md-nav__link">
    ▼ {{ &lt;記号を含む文字&gt; }}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08" class="md-nav__link">
    08. ビルトインパッケージ
  </a>
  
    <nav class="md-nav" aria-label="08. ビルトインパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_86" class="md-nav__link">
    パッケージのコード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bytes" class="md-nav__link">
    bytes
  </a>
  
    <nav class="md-nav" aria-label="bytes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer" class="md-nav__link">
    ▼ Bufferメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjson" class="md-nav__link">
    encoding/json
  </a>
  
    <nav class="md-nav" aria-label="encoding/json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#marshal" class="md-nav__link">
    ▼ Marshal関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unmarshal" class="md-nav__link">
    ▼ Unmarshal関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rawmessage" class="md-nav__link">
    ▼ RawMessage関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indent" class="md-nav__link">
    ▼ Indent関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fmt" class="md-nav__link">
    fmt
  </a>
  
    <nav class="md-nav" aria-label="fmt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_87" class="md-nav__link">
    ▼ 接頭接尾辞無しメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s" class="md-nav__link">
    ▼ 接頭辞Sメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ln" class="md-nav__link">
    ▼ 接尾辞lnメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f" class="md-nav__link">
    ▼ 接尾辞fメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nethttp" class="md-nav__link">
    net/http
  </a>
  
    <nav class="md-nav" aria-label="net/http">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    ▼ httpパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    ▼ Getメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post" class="md-nav__link">
    ▼ Postメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrequest" class="md-nav__link">
    ▼ NewRequestメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listenandserve" class="md-nav__link">
    ▼ ListenAndServeメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newservemux" class="md-nav__link">
    ▼ NewServeMuxメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os" class="md-nav__link">
    os
  </a>
  
    <nav class="md-nav" aria-label="os">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open" class="md-nav__link">
    ▼ Open関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reflect" class="md-nav__link">
    reflect
  </a>
  
    <nav class="md-nav" aria-label="reflect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typeofvalueof" class="md-nav__link">
    ▼ TypeOfメソッド、ValueOfメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    strings
  </a>
  
    <nav class="md-nav" aria-label="strings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builder" class="md-nav__link">
    ▼ Builder関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_go_logic_validation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    検証ロジック
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="language_go_framework_gin.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ フレームワーク
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="language_go_package.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ パッケージ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="language_python.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ■ Python
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="language_r.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    R
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../testing/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🧪 テスト
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../hardware/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    💻 ハードウェア
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../network/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🌏 ネットワーク
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../security/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🔐 セキュリティ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../cloud_computing/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ⛅️ 3大クラウド
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../virtualization/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    📦 仮想化
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../infrastructure_as_code/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ⚙️ IaC
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../infrastructure_as_code/kubernetes/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ☸️ K8s
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../infrastructure_as_code/kubernetes_addon/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ⏬ K8sアドオン
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../infrastructure_as_code/cncf_projects/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🌊 CNCFプロジェクト
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    ♾️ DevOps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../devops/cicd/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🔄 CI/CD
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../observability/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    🔎 可観測性
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../software_development_methodology/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    👥 開発手法
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="このページの内容">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      このページの内容
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01. データ型
  </a>
  
    <nav class="md-nav" aria-label="01. データ型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    データ型の種類
  </a>
  
    <nav class="md-nav" aria-label="データ型の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ▼ データ型の初期値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ プリミティブ型に所属するデータ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ▼ 合成型に所属するデータ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ▼ 参照型に所属するデータ型
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    プリミティブ型のまとめ
  </a>
  
    <nav class="md-nav" aria-label="プリミティブ型のまとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ プリミティブ型とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defined-type" class="md-nav__link">
    ▼ Defined Typeによるユーザー定義のプリミティブ型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ プリミティブ型とメモリの関係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ▼ 各データ型のサイズ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    構造体
  </a>
  
    <nav class="md-nav" aria-label="構造体">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ▼ 構造体とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defined-type_1" class="md-nav__link">
    ▼ Defined Typeによるユーザー定義の構造体
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 使用不可のフィールド名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ 初期化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#di" class="md-nav__link">
    ▼ DI (依存性注入)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ▼ 埋め込みによる委譲
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    ▼ 無名構造体
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    JSON
  </a>
  
    <nav class="md-nav" aria-label="JSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json_1" class="md-nav__link">
    ▼ JSONと構造体のマッピング
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omitempty" class="md-nav__link">
    ▼ omitempty
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    配列
  </a>
  
    <nav class="md-nav" aria-label="配列">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    ▼ 配列とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    ▼ 宣言と代入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    ▼ 配列とメモリの関係
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    ポインタ
  </a>
  
    <nav class="md-nav" aria-label="ポインタ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    ▼ ポインタ型とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    ▼ 参照演算子 (&amp;)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    ▼ 間接参照演算子 (*)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    ▼ ポインタ型で扱うべきデータ型
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    スライス
  </a>
  
    <nav class="md-nav" aria-label="スライス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    ▼ スライスとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    ▼ 宣言と代入
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    ▼ 配列の値の参照
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    ▼ 要素の追加
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    マップ
  </a>
  
    <nav class="md-nav" aria-label="マップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    ▼ 単一のプリミティブ型を値に持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    ▼ スライス型を値に持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    ▼ 複数のデータ型を持つマップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    ▼ マップ値の抽出
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    インターフェース
  </a>
  
    <nav class="md-nav" aria-label="インターフェース">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    ▼ 埋め込みによる委譲
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    ▼ アップキャストの可否を利用した検証
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    ▼ 緩い型としてのインターフェース
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    ▼ 型アサーション
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error" class="md-nav__link">
    ▼ errorインターフェース
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    ▼ stringインターフェース
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nil" class="md-nav__link">
    nil
  </a>
  
    <nav class="md-nav" aria-label="nil">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nil_1" class="md-nav__link">
    ▼ nilとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    ▼ ポインタの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    ▼ インターフェースの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02" class="md-nav__link">
    02. 関数
  </a>
  
    <nav class="md-nav" aria-label="02. 関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main" class="md-nav__link">
    main関数
  </a>
  
    <nav class="md-nav" aria-label="main関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main_1" class="md-nav__link">
    ▼ main関数とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    独自関数
  </a>
  
    <nav class="md-nav" aria-label="独自関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    ▼ 関数とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    ▼ 引数の型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#closure" class="md-nav__link">
    ▼ Closure (無名関数) とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    ▼ 即時関数とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    メソッド
  </a>
  
    <nav class="md-nav" aria-label="メソッド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    ▼ メソッドとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    ▼ レシーバによる紐付け
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    ▼ 値レシーバ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    ▼ ポインタレシーバ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defer" class="md-nav__link">
    defer関数
  </a>
  
    <nav class="md-nav" aria-label="defer関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defer_1" class="md-nav__link">
    ▼ defer関数とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defer_2" class="md-nav__link">
    ▼ 複数のdefer関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    返却値
  </a>
  
    <nav class="md-nav" aria-label="返却値">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    ▼ 複数の返却値
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    ▼ 返却値の破棄
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04" class="md-nav__link">
    04. 変数
  </a>
  
    <nav class="md-nav" aria-label="04. 変数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    定義 (宣言+代入)
  </a>
  
    <nav class="md-nav" aria-label="定義 (宣言+代入)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    ▼ 明示的な定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    ▼ 暗黙的な定義 (型推論)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    ▼ 再宣言
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    定義位置の種類
  </a>
  
    <nav class="md-nav" aria-label="定義位置の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    ▼ パッケージ変数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    ▼ ローカル変数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03. スコープ
  </a>
  
    <nav class="md-nav" aria-label="03. スコープ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    変数、定数
  </a>
  
    <nav class="md-nav" aria-label="変数、定数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    ▼ パッケージ内外から参照可能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    ▼ パッケージ内のみ参照可能
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    関数
  </a>
  
    <nav class="md-nav" aria-label="関数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    ▼ パッケージ内外から参照可能
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    ▼ パッケージ内のみ参照可能
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04_1" class="md-nav__link">
    04. 制御文
  </a>
  
    <nav class="md-nav" aria-label="04. 制御文">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    配列またはスライスの走査
  </a>
  
    <nav class="md-nav" aria-label="配列またはスライスの走査">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-range" class="md-nav__link">
    ▼ for ... range
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05. 処理の種類
  </a>
  
    <nav class="md-nav" aria-label="05. 処理の種類">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    同期処理
  </a>
  
    <nav class="md-nav" aria-label="同期処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    ▼ 同期処理とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    非同期処理 (並行処理)
  </a>
  
    <nav class="md-nav" aria-label="非同期処理 (並行処理)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    ▼ 非同期処理 (並行処理) とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    並列処理
  </a>
  
    <nav class="md-nav" aria-label="並列処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    ▼ 並列処理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channel" class="md-nav__link">
    ▼ channel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitgroup" class="md-nav__link">
    ▼ WaitGroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errgroup" class="md-nav__link">
    ▼ errgroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select" class="md-nav__link">
    ▼ select
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06. エラーキャッチ、例外スロー
  </a>
  
    <nav class="md-nav" aria-label="06. エラーキャッチ、例外スロー">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#go_1" class="md-nav__link">
    Goにおけるエラーキャッチと例外スロー
  </a>
  
    <nav class="md-nav" aria-label="Goにおけるエラーキャッチと例外スロー">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    ▼ 例外スローのある言語の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_2" class="md-nav__link">
    ▼ Goには例外が無い
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    エラーキャッチ
  </a>
  
    <nav class="md-nav" aria-label="エラーキャッチ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nil_2" class="md-nav__link">
    ▼ nilの比較検証
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error_1" class="md-nav__link">
    errorインターフェース
  </a>
  
    <nav class="md-nav" aria-label="errorインターフェース">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    ▼ 標準エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new" class="md-nav__link">
    ▼ New関数による独自エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fmterrorf" class="md-nav__link">
    ▼ fmt.Errorfメソッドによる独自エラー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    ▼ 構造体による独自エラー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xerrors" class="md-nav__link">
    xerrorsパッケージ
  </a>
  
    <nav class="md-nav" aria-label="xerrorsパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xerrors_1" class="md-nav__link">
    ▼ xerrorsパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new_1" class="md-nav__link">
    ▼ New関数によるトレース付与
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorf" class="md-nav__link">
    ▼ Errorfメソッドによるトレース付与
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-02" class="md-nav__link">
    06-02. ロギング
  </a>
  
    <nav class="md-nav" aria-label="06-02. ロギング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    logパッケージ
  </a>
  
    <nav class="md-nav" aria-label="logパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log_1" class="md-nav__link">
    ▼ logパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    ▼ 接尾辞Printメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fatal" class="md-nav__link">
    ▼ 接尾辞Fatalメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panic" class="md-nav__link">
    ▼ 接尾辞Panicメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07. テンプレート
  </a>
  
    <nav class="md-nav" aria-label="07. テンプレート">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    ロジック
  </a>
  
    <nav class="md-nav" aria-label="ロジック">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    ▼ コメント
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    ▼ 条件分岐
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    テンプレート内のエスケープ
  </a>
  
    <nav class="md-nav" aria-label="テンプレート内のエスケープ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    ▼ テンプレート内のエスケープとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    ▼ {{ "&lt;記号&gt;" }}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_85" class="md-nav__link">
    ▼ {{ &lt;記号を含む文字&gt; }}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08" class="md-nav__link">
    08. ビルトインパッケージ
  </a>
  
    <nav class="md-nav" aria-label="08. ビルトインパッケージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_86" class="md-nav__link">
    パッケージのコード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bytes" class="md-nav__link">
    bytes
  </a>
  
    <nav class="md-nav" aria-label="bytes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffer" class="md-nav__link">
    ▼ Bufferメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encodingjson" class="md-nav__link">
    encoding/json
  </a>
  
    <nav class="md-nav" aria-label="encoding/json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#marshal" class="md-nav__link">
    ▼ Marshal関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unmarshal" class="md-nav__link">
    ▼ Unmarshal関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rawmessage" class="md-nav__link">
    ▼ RawMessage関数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indent" class="md-nav__link">
    ▼ Indent関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fmt" class="md-nav__link">
    fmt
  </a>
  
    <nav class="md-nav" aria-label="fmt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_87" class="md-nav__link">
    ▼ 接頭接尾辞無しメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s" class="md-nav__link">
    ▼ 接頭辞Sメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ln" class="md-nav__link">
    ▼ 接尾辞lnメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f" class="md-nav__link">
    ▼ 接尾辞fメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nethttp" class="md-nav__link">
    net/http
  </a>
  
    <nav class="md-nav" aria-label="net/http">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    ▼ httpパッケージとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    ▼ Getメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post" class="md-nav__link">
    ▼ Postメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrequest" class="md-nav__link">
    ▼ NewRequestメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listenandserve" class="md-nav__link">
    ▼ ListenAndServeメソッド
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newservemux" class="md-nav__link">
    ▼ NewServeMuxメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os" class="md-nav__link">
    os
  </a>
  
    <nav class="md-nav" aria-label="os">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#open" class="md-nav__link">
    ▼ Open関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reflect" class="md-nav__link">
    reflect
  </a>
  
    <nav class="md-nav" aria-label="reflect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typeofvalueof" class="md-nav__link">
    ▼ TypeOfメソッド、ValueOfメソッド
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    strings
  </a>
  
    <nav class="md-nav" aria-label="strings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#builder" class="md-nav__link">
    ▼ Builder関数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="go">メソッド/データ@Go<a class="headerlink" href="#go" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/">https://hiroki-it.github.io/tech-notebook/</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="01">01. データ型<a class="headerlink" href="#01" title="Permanent link">&para;</a></h2>
<h3 id="_2">データ型の種類<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<h4 id="_3">▼ データ型の初期値<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>データ型には、値が代入されていない時、初期値が代入されている。</p>
<h4 id="_4">▼ プリミティブ型に所属するデータ型<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>データ型</th>
<th>表記</th>
<th>初期値</th>
</tr>
</thead>
<tbody>
<tr>
<td>数値</td>
<td><code>int</code>、<code>float</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>文字列</td>
<td><code>string</code></td>
<td><code>""</code> (空文字)</td>
</tr>
<tr>
<td>bool値</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h4 id="_5">▼ 合成型に所属するデータ型<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>データ型</th>
<th>表記</th>
<th>初期値</th>
</tr>
</thead>
<tbody>
<tr>
<td>構造体</td>
<td><code>struct</code></td>
<td></td>
</tr>
<tr>
<td>配列</td>
<td><code>[i]</code></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="_6">▼ 参照型に所属するデータ型<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>データ型</th>
<th>表記</th>
<th>初期値</th>
</tr>
</thead>
<tbody>
<tr>
<td>ポインタ</td>
<td><code>*</code></td>
<td><code>nil</code></td>
</tr>
<tr>
<td>スライス</td>
<td><code>[]</code></td>
<td><code>nil</code> (要素数、サイズ：0)</td>
</tr>
<tr>
<td>マップ</td>
<td></td>
<td><code>nil</code></td>
</tr>
<tr>
<td>チャネル</td>
<td></td>
<td><code>nil</code></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_7">プリミティブ型のまとめ<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<h4 id="_8">▼ プリミティブ型とは<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 定義 (初期値として『0』が割り当てられる)</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="kt">int</span>

<span class="c1">// 代入</span>
<span class="nx">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div>
<h4 id="defined-type">▼ Defined Typeによるユーザー定義のプリミティブ型<a class="headerlink" href="#defined-type" title="Permanent link">&para;</a></h4>
<p>Defined Typeを使用して、ユーザー定義のプリミティブ型を定義する。</p>
<p>元のプリミティブ型とは互換性がなくなる。</p>
<p><strong>＊実装例＊</strong></p>
<p>integer型を元に、Age型を定義する。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Age</span><span class="w"> </span><span class="kt">int</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>パッケージの型を元に、MyAppWriter型を定義する。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">MyAppWriter</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span>
</code></pre></div>
<h4 id="_9">▼ プリミティブ型とメモリの関係<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>プリミティブ型の変数を定義すると、データ型のバイト数に応じて、空いているメモリ領域に、変数が割り当てられる。</p>
<p><code>1</code>個のメモリアドレス当たり<code>1</code>バイトに相当する。</p>
<p><img alt="basic-variable_memory" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/basic-variable_memory.png" /></p>
<h4 id="_10">▼ 各データ型のサイズ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>データ型</th>
<th>型名</th>
<th>サイズ(bit)</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>int (符号付き整数)</td>
<td>int8</td>
<td><code>8</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>int16</td>
<td><code>16</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>int32</td>
<td><code>32</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>int64</td>
<td><code>64</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>int</td>
<td><code>32</code> or <code>64</code></td>
<td>実装環境によって異なる。</td>
</tr>
<tr>
<td>uint (符号なし整数)</td>
<td>uint8</td>
<td><code>8</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>uint16</td>
<td><code>16</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>unit32</td>
<td><code>32</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>uint64</td>
<td><code>64</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>uint</td>
<td><code>32</code> or <code>64</code></td>
<td>実装環境によって異なる。</td>
</tr>
<tr>
<td>float (浮動小数点)</td>
<td>float32</td>
<td><code>32</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>float64</td>
<td><code>64</code></td>
<td></td>
</tr>
<tr>
<td>complex (複素数)</td>
<td>complex64</td>
<td><code>64</code></td>
<td>実部：float32、虚部：float32</td>
</tr>
<tr>
<td></td>
<td>complex128</td>
<td><code>128</code></td>
<td>実部：float64、虚部：float64</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_11">構造体<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<h4 id="_12">▼ 構造体とは<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>他の言語でいう『データのみを保持するオブジェクト』に相当する。</p>
<p><strong>＊実装例＊</strong></p>
<p>構造体を定義し、変数に代入する。</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="defined-type_1">▼ Defined Typeによるユーザー定義の構造体<a class="headerlink" href="#defined-type_1" title="Permanent link">&para;</a></h4>
<p>Defined Typeを使用して、ユーザー定義のデータ型の構造体を定義する。</p>
<p>フィールド名の頭文字を大文字にした場合は、パッケージ外からのアクセスをパブリックに、小文字にした場合はプライベートになる。</p>
<p><strong>＊実装例＊</strong></p>
<p>パブリックなフィールドを持つ構造体は以下の通り。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// パブリック</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<p>プライベートなフィールドを持つ構造体は以下の通り。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// プライベート</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_13">▼ 使用不可のフィールド名<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>小文字の『<code>type</code>』は予約語のため使用不可である。</p>
<p>大文字の<code>Type</code>は可能。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 定義不可エラー</span>
<span class="w">    </span><span class="kd">type</span><span class="w"> </span><span class="kt">string</span>

<span class="w">    </span><span class="c1">// 定義可能</span>
<span class="w">    </span><span class="nx">Type</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_14">▼ 初期化<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>すでに値が代入されている構造体を初期化する場合、いくつか記法がある。</p>
<p>その中では、タグ付きリテラルが推奨される。</p>
<p>初期化によって作成する構造体は、ポインタ型または非ポインタ型のいずれでも問題ない。</p>
<p>ただし、多くの関数がポインタ型を引数型としていることから、それに合わせてポインタ型を作成することが多い。</p>
<p><strong>＊実装例＊</strong></p>
<p>まずは、タグ付きリテラル表記。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="c1">// タグ付きリテラル表記</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>2つ目に、タグ無しリテラル表記がある。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="c1">// タグ無しリテラル表記</span>
<span class="w">        </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><code>3</code>個目に、<code>new</code>関数とデータ代入による初期化がある。</p>
<p><code>new</code>関数は、データが代入されていない構造体を作成するため、リテラル表記時でも表現できる。</p>
<p><code>new</code>関数は、構造体以外のデータ型でも使用できる。</p>
<p>ポインタ型の構造体を返却する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 型のコンストラクタ</span>
<span class="cm"> * ※スコープはパッケージ内のみとする。</span>


<span class="cm"> */</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">newPerson</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// new関数を使用する。</span>
<span class="w">    </span><span class="c1">// &amp;Person{} に同じ。</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">new</span><span class="p">(</span><span class="nx">Person</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// ポインタ型の初期化された構造体が返却される。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// &amp;main.Person{Name:&quot;&quot;}</span>

<span class="w">    </span><span class="c1">// フィールドに代入する</span>
<span class="w">    </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">name</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">person</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">newPerson</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="di">▼ DI (依存性注入)<a class="headerlink" href="#di" title="Permanent link">&para;</a></h4>
<p>構造体のフィールドとして構造体を保持することにより、依存関係を構成する。</p>
<p>依存される側をサプライヤー、また依存する側をクライアントという。</p>
<p>構造体間に依存関係を構成するには、クライアントにサプライヤーを注入する。</p>
<p>注入方法には、『コンストラクタインジェクション』『セッターインジェクション』『セッターインジェクション』がある。</p>
<p>詳しくは、以下のリンクを参考にせよ。</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/language/language_php_class_based.html">https://hiroki-it.github.io/tech-notebook/language/language_php_class_based.html</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">//========================</span>
<span class="c1">// サプライヤー側</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">FirstName</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">LastName</span><span class="w">  </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewName</span><span class="p">(</span><span class="nx">firstName</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Name</span><span class="p">{</span>
<span class="w">        </span><span class="nx">FirstName</span><span class="p">:</span><span class="w"> </span><span class="nx">firstName</span><span class="p">,</span>
<span class="w">        </span><span class="nx">LastName</span><span class="p">:</span><span class="w">  </span><span class="nx">lastName</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="nx">fullName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">FirstName</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">LastName</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//========================</span>
<span class="c1">// クライアント側</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">getName</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewName</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hasegawa&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// コンストラクタインジェクションによるDI</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">getName</span><span class="p">().</span><span class="nx">fullName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Hiroki Hasegawa&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_15">▼ 埋め込みによる委譲<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>Goには継承がなく、代わりに委譲がある。</p>
<p>構造体のフィールドとして別の構造体を埋め込むことにより、埋め込まれた構造体に処理を委譲する。</p>
<p>委譲する側の構造体を宣言するのみでなく、フィールドとして渡す必要がある。</p>
<p>この時、実装者が委譲を意識しなくて良くなるように、コンストラクタの中で初期化する。</p>
<p>インターフェースの委譲とは異なり、アップキャストは行えない。</p>
<p>つまり、委譲された構造体は委譲する構造体のデータ型にキャストでき、同じデータ型として扱えない。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">//========================</span>
<span class="c1">// 委譲する側 (埋め込む構造体)</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">FirstName</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">LastName</span><span class="w">  </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="nx">fullName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">FirstName</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">LastName</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//========================</span>
<span class="c1">// 委譲される側 (埋め込まれる構造体)</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">MyName</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">*</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewMyName</span><span class="p">(</span><span class="nx">firstName</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">MyName</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">MyName</span><span class="p">{</span>
<span class="w">        </span><span class="c1">// コンストラクタ内で委譲する構造体を初期化する。</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Name</span><span class="p">{</span>
<span class="w">            </span><span class="nx">FirstName</span><span class="p">:</span><span class="w"> </span><span class="nx">firstName</span><span class="p">,</span>
<span class="w">            </span><span class="nx">LastName</span><span class="p">:</span><span class="w">  </span><span class="nx">lastName</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">//================</span>
<span class="c1">// main</span>
<span class="c1">//================</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myName</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewMyName</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hasegawa&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// myName構造体は、Name構造体のメソッドをコールできる。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myName</span><span class="p">.</span><span class="nx">fullName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Hiroki Hasegawa&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>もし、委譲する側と委譲される側に、同じ名前のメソッド/フィールドが存在する場合は、委譲された側のものが優先してコールされる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">//========================</span>
<span class="c1">// 委譲する側 (埋め込む構造体)</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">FirstName</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">LastName</span><span class="w">  </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="nx">fullName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">FirstName</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">LastName</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//========================</span>
<span class="c1">// 委譲される側 (埋め込まれる構造体)</span>
<span class="c1">//========================</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">MyName</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">*</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewMyName</span><span class="p">(</span><span class="nx">firstName</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">lastName</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">MyName</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">MyName</span><span class="p">{</span>
<span class="w">        </span><span class="c1">// コンストラクタ内で委譲する構造体を初期化する。</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Name</span><span class="p">{</span>
<span class="w">            </span><span class="nx">FirstName</span><span class="p">:</span><span class="w"> </span><span class="nx">firstName</span><span class="p">,</span>
<span class="w">            </span><span class="nx">LastName</span><span class="p">:</span><span class="w">  </span><span class="nx">lastName</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 委譲する側と委譲される側で同じメソッド</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">MyName</span><span class="p">)</span><span class="w"> </span><span class="nx">fullName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;委譲された構造体です&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//================</span>
<span class="c1">// main</span>
<span class="c1">//================</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">myName</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewMyName</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hasegawa&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// 同じメソッドがある場合、委譲された側が優先。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myName</span><span class="p">.</span><span class="nx">fullName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;委譲された構造体です&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_16">▼ 無名構造体<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>構造体の定義と初期化を同時に行う。</p>
<p>構造体に名前がなく、データ型を割り当てられないため、返却値としては使用できないことに注意する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="p">}{</span>
<span class="w">        </span><span class="c1">// タグ付きリテラル表記 (タグ無しリテラル表記も可能)</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="json">JSON<a class="headerlink" href="#json" title="Permanent link">&para;</a></h3>
<h4 id="json_1">▼ JSONと構造体のマッピング<a class="headerlink" href="#json_1" title="Permanent link">&para;</a></h4>
<p>構造体とJSONの間でパースを実行する時、構造体の各フィールドと、JSONのキー名を、マッピングしておける。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;JSONエンコードに失敗しました。&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// エンコード結果を出力</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">))</span><span class="w"> </span><span class="c1">// &quot;{\&quot;Name\&quot;:\&quot;Hiroki\&quot;}&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="omitempty">▼ omitempty<a class="headerlink" href="#omitempty" title="Permanent link">&para;</a></h4>
<p>値が『<code>false</code>、<code>0</code>、<code>nil</code>、空配列、空slice、空map、空文字』の時に、JSONエンコードでこれを除外できる。</p>
<p>構造体を除外したい場合は、nilになりうるポインタ型としておく。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// false、0、nil、空配列、空slice、空map、空文字を除外できる。</span>
<span class="w">    </span><span class="nx">Id</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="s">`json:&quot;id&quot;`</span>

<span class="w">    </span><span class="c1">// 構造体はポインタ型としておく</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="o">*</span><span class="nx">Name</span><span class="w"> </span><span class="s">`json:&quot;name,omitempty&quot;`</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Name</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">FirstName</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;first_name&quot;`</span>
<span class="w">    </span><span class="nx">LastName</span><span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;last_name&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// Name構造体はnilにしておく</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;JSONエンコードに失敗しました。&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// エンコード結果を出力</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">))</span><span class="w"> </span><span class="c1">// &quot;{\&quot;id\&quot;:1}&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_17">配列<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<h4 id="_18">▼ 配列とは<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<p>要素、各要素のメモリアドレス、からなるデータのこと。</p>
<p><img alt="aggregate-type_array" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/aggregate-type_array.png" /></p>
<h4 id="_19">▼ 宣言と代入<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<p>配列を宣言し、変数に代入する。</p>
<p><strong>＊実装例＊</strong></p>
<p>宣言と代入を別々に行う。</p>
<p>また、要素数の定義が必要である。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">z</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">string</span>
<span class="w">    </span><span class="nx">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>
<span class="w">    </span><span class="nx">z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span><span class="w"> </span><span class="c1">// [Hiroki Gopher]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span><span class="w"> </span><span class="c1">// [2]string{&quot;Hiroki&quot;, &quot;Gopher&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<p>宣言と代入を同時に行う。</p>
<p>また、要素数の定義が必要である。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// [Hiroki Gopher]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// [2]string{&quot;Hiroki&quot;, &quot;Gopher&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<p>宣言と代入を同時に行う。</p>
<p>また、型推論と要素数省略を行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [Hiroki Gopher]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [2]string{&quot;Hiroki&quot;, &quot;Gopher&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_20">▼ 配列とメモリの関係<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<p>配列型の変数を定義すると、空いているメモリ領域に、配列がまとまって割り当てられる。</p>
<p><code>1</code>個のメモリアドレス当たり<code>1</code>バイトに相当する。</p>
<p><img alt="array-variable_memory" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/array-variable_memory.png" /></p>
<p><br></p>
<h3 id="_21">ポインタ<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<h4 id="_22">▼ ポインタ型とは<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<p>メモリアドレスを代入できるデータ型のこと。</p>
<h4 id="_23">▼ 参照演算子 (<code>&amp;</code>)<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<p>定義された変数に対して、&amp; (アンパサンド) を宣言すると、メモリアドレスを参照できる。</p>
<p>参照したメモリアドレス値は、ポインタ型の変数に代入する必要があるが、型推論で記述すればこれを意識しなくて良い。</p>
<p>PHPにおけるポインタは、以下のリンクを参考にせよ。</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/language/language_php_class_based_method_data.html">https://hiroki-it.github.io/tech-notebook/language/language_php_class_based_method_data.html</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;a&quot;</span>

<span class="w">    </span><span class="c1">// メモリアドレスを参照する。</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">x</span>
<span class="w">    </span><span class="c1">// p := &amp;x と同じ</span>

<span class="w">    </span><span class="c1">// メモリアドレスを参照する前</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;a&quot;</span>

<span class="w">    </span><span class="c1">// メモリアドレスを参照した後</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="c1">// (*string)(0xc0000841e0)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_24">▼ 間接参照演算子 (<code>*</code>)<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<p>ポインタ型の変数に対してアスタリスクを宣言すると、メモリアドレスに割り当てられているデータの実体を取得できる。</p>
<p>ポインタを使用してデータの実体を取得することを『逆参照 (デリファレンス) 』という。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;a&quot;</span>

<span class="w">    </span><span class="nx">p</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">x</span>

<span class="w">    </span><span class="c1">// メモリアドレスの実体を取得する (デリファレンス) 。</span>
<span class="w">    </span><span class="nx">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">*</span><span class="nx">p</span>

<span class="w">    </span><span class="c1">// メモリアドレスを参照する前</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;a&quot;</span>

<span class="w">    </span><span class="c1">// メモリアドレスを参照した後</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="c1">// (*string)(0xc0000841e0)</span>

<span class="w">    </span><span class="c1">// メモリアドレスに割り当てられたデータ</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;a&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_25">▼ ポインタ型で扱うべきデータ型<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>データ型</th>
<th style="text-align: center;">ポインタ型で扱うべきか</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>構造体</td>
<td style="text-align: center;">⭕️</td>
<td>ポインタ型として扱うと、構造体が持つメモリアドレスを処理するのみでよくなる。ポインタ型としない場合と比べて、少ないメモリ消費で構造体を扱える。</td>
</tr>
<tr>
<td>slice、map、chan、 func</td>
<td style="text-align: center;">△</td>
<td>データサイズの大きさによる。</td>
</tr>
<tr>
<td>プリミティブ型</td>
<td style="text-align: center;">×️</td>
<td>ポインタ型で扱うメリットはない。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_26">スライス<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<h4 id="_27">▼ スライスとは<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<p>参照先の配列に対するポインタ、長さ、サイズを持つデータ型である。</p>
<p><img alt="reference-types_slice" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/reference-types_slice.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Goのコードより</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">slice</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">array</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span>
<span class="w">    </span><span class="nx">len</span><span class="w">   </span><span class="kt">int</span>
<span class="w">    </span><span class="nx">cap</span><span class="w">   </span><span class="kt">int</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://github.com/golang/go/blob/go1.20.7/src/runtime/slice.go#L15-L19">https://github.com/golang/go/blob/go1.20.7/src/runtime/slice.go#L15-L19</a></li>
</ul>
</blockquote>
<h4 id="_28">▼ 宣言と代入<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<p>宣言と代入を同時に行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// [Hiroki Gopher]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;Hiroki&quot;, &quot;Gopher&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<p>文字列の宣言と代入を同時に行う。</p>
<p>また、型推論を行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [Hiroki Gopher]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;Hiroki&quot;, &quot;Gopher&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<p>バイト文字列の宣言と代入を同時に行う。</p>
<p>また、型推論を行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [97 98 99]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// []byte{0x61, 0x62, 0x63}</span>
<span class="p">}</span>
</code></pre></div>
<p>構造体のスライスの宣言と代入を同時に行う。</p>
<p>また、型推論を行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nx">Person</span><span class="p">{{</span><span class="w"> </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="w"> </span><span class="p">}}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// [{Name:Hiroki}]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// []main.Person{main.Person{Name:&quot;Hiroki&quot;}}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_29">▼ 配列の値の参照<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<p>全てのスライスが共通の配列を参照しているため、例えば、<code>xb</code>変数しか上書きしていないのにも関わらず、他のスライスにもその上書きが反映される。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 最後の要素の後にもカンマが必要である。</span>
<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;あ&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;い&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;う&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;え&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;お&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [5]string{&quot;あ&quot;, &quot;い&quot;, &quot;う&quot;, &quot;え&quot;, &quot;お&quot;}</span>

<span class="w">    </span><span class="c1">// 0から3番目を参照する。</span>
<span class="w">    </span><span class="nx">xa</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">xa</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;あ&quot;, &quot;い&quot;, &quot;う&quot;}</span>

<span class="w">    </span><span class="c1">// 2から5番目を参照する。</span>
<span class="w">    </span><span class="nx">xb</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">xb</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;う&quot;, &quot;え&quot;, &quot;お&quot;}</span>

<span class="w">    </span><span class="c1">// xbスライスの0番目 (&quot;う&quot;) を上書きする。</span>
<span class="w">    </span><span class="nx">xb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>

<span class="w">    </span><span class="c1">// xbしか上書きしていないが、他のスライスにも反映される。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">xa</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;あ&quot;, &quot;い&quot;, &quot;Hiroki&quot;}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">xb</span><span class="p">)</span><span class="w"> </span><span class="c1">// []string{&quot;Hiroki&quot;, &quot;え&quot;, &quot;お&quot;}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w">  </span><span class="c1">// [5]string{&quot;あ&quot;, &quot;い&quot;, &quot;Hiroki&quot;, &quot;え&quot;, &quot;お&quot;}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_30">▼ 要素の追加<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<p>渡されたスライスで、後ろから要素を追加する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="c1">// [10 20 30 40]</span>

<span class="w">    </span><span class="c1">// 要素を追加。</span>
<span class="w">    </span><span class="nx">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="c1">// [10 20 30 40 50 60 70 80]</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_31">マップ<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<h4 id="_32">▼ 単一のプリミティブ型を値に持つマップ<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p>マップの定義と代入を同時に行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 『数値:文字列』のマップ</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
<span class="w">        </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroko&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="c1">// map[0:Hiroki 1:Hiroko 2:Hiroshi]</span>
<span class="p">}</span>
</code></pre></div>
<p>定義と代入を別々に行う。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 『数値:文字列』のマップ</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span><span class="p">{}</span>

<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>
<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span>
<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="c1">// map[0:Hiroki 1:Hiroko 2:Hiroshi]</span>
<span class="p">}</span>
</code></pre></div>
<p>または、<code>make</code>関数を使用してマップを作成もできる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 『数値:文字列』のマップ</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span><span class="p">)</span>

<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>
<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span>
<span class="w">    </span><span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="c1">// map[0:Hiroki 1:Hiroko 2:Hiroshi]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_33">▼ スライス型を値に持つマップ<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 『文字列:スライス』のマップ</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;エラーメッセージ0&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;エラーメッセージ1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;エラーメッセージ2&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="c1">// map[errors:[エラーメッセージ0 エラーメッセージ1 エラーメッセージ2]]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_34">▼ 複数のデータ型を持つマップ<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p>マップ型データの値をインターフェース型とすることにより、複数のデータ型を表現できる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 『文字列:複数のプリミティブ型』のマップ</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
<span class="w">        </span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="w">   </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki Hasegawa&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="c1">// map[id:1 name:Hiroki Hasegawa]</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_35">▼ マップ値の抽出<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
<span class="w">        </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroko&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 値の抽出</span>
<span class="w">    </span><span class="nx">v</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// エラーハンドリング</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Value is not found.&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Value is not found.</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span><span class="w"> </span><span class="c1">// Hiroki</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_36">インターフェース<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<h4 id="_37">▼ 埋め込みによる委譲<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<p>構造体のフィールドとして別のインターフェースを埋め込むことにより、埋め込まれた構造体に処理の全てを委譲する。</p>
<p>ただし、構造体に明示的にインターフェースを埋め込む必要はなく、インターフェースを満たす関数を構造体に紐付けると、インターフェースを暗黙的に実装できる。</p>
<p>構造体の委譲とは異なり、アップキャストを行える。</p>
<p>つまり、委譲された構造体は委譲するインターフェースのデータ型にキャストでき、同じデータ型として扱える。</p>
<p><strong>＊実装例＊</strong></p>
<p>InspectImpl構造体にAnimalインターフェースを埋め込み、構造体に<code>Eat</code>メソッド、<code>Sleep</code>メソッド、<code>Mating</code>メソッド、の処理を委譲する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">// インターフェースとそのメソッドを定義する。</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">AnimalInterface</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">Eat</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">Sleep</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">InsectImpl</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">FishImpl</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">MammalImpl</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewInsect</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">InsectImpl</span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>

<span class="c1">// 構造体に関数を紐付ける。インターフェースを暗黙的に実装する。</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">)</span><span class="w"> </span><span class="nx">Eat</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;食べる&quot;</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">)</span><span class="w"> </span><span class="nx">Sleep</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;眠る&quot;</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">insect</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewInsect</span><span class="p">(</span><span class="s">&quot;カブトムシ&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// メソッドを実行する。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">insect</span><span class="p">.</span><span class="nx">Name</span><span class="p">())</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">insect</span><span class="p">.</span><span class="nx">Eat</span><span class="p">())</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">insect</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_38">▼ アップキャストの可否を利用した検証<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<p>もし、構造体に実装されたメソッドに不足があると、委譲が自動的に取り消される。</p>
<p>エラーは発生しないため、実装されたメソッドが十分であることを実装者が知らなければならない。</p>
<p>アップキャストの可否を使用して、意図的にエラーを発生させるテクニックがある。</p>
<blockquote>
<ul>
<li><a href="https://github.com/uber-go/guide/blob/master/style.md#verify-interface-compliance">https://github.com/uber-go/guide/blob/master/style.md#verify-interface-compliance</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">// アップキャストの可否を使用して、構造体がインターフェースを満たしているを検証する。</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="nx">AnimalInterface</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">InsectImpl</span><span class="p">{}</span><span class="w"> </span><span class="c1">// もしくは (*InsectImpl)(nil)</span>

<span class="c1">// インターフェースとそのメソッドを定義する。</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">AnimalInterface</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">Eat</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">InsectImpl</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewInsect</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">InsectImpl</span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>

<span class="c1">// 構造体に関数を紐付ける。インターフェースを暗黙的に実装する。</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">*</span><span class="nx">InsectImpl</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">insect</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewInsect</span><span class="p">(</span><span class="s">&quot;カブトムシ&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// メソッドを実行する。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">insect</span><span class="p">.</span><span class="nx">Name</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Eatメソッドを紐付けていない場合</span>
cannot<span class="w"> </span>use<span class="w"> </span>insect<span class="w"> </span><span class="o">(</span><span class="nb">type</span><span class="w"> </span>Insect<span class="o">)</span><span class="w"> </span>as<span class="w"> </span><span class="nb">type</span><span class="w"> </span>Animal<span class="w"> </span><span class="k">in</span><span class="w"> </span>assignment:
Insect<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>implement<span class="w"> </span>Animal<span class="w"> </span><span class="o">(</span>missing<span class="w"> </span>Eat<span class="w"> </span>method<span class="o">)</span>
</code></pre></div>
<h4 id="_39">▼ 緩い型としてのインターフェース<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<p>様々な値をインターフェース型として定義できる。</p>
<p>また、他の型に変換もできる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// 1</span>

<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// 3.14</span>

<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>

<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">uint8</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// [5]uint8{0x1, 0x2, 0x3, 0x4, 0x5}</span>
<span class="p">}</span>
</code></pre></div>
<p>注意点として、インターフェース型は演算できない。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// インターフェース型</span>
<span class="w">    </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// 1</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="p">)</span><span class="w"> </span><span class="c1">// 2</span>

<span class="w">    </span><span class="c1">// エラーになってしまう。</span>
<span class="w">    </span><span class="c1">// invalid operation: foo + bar (operator + not defined on interface)</span>
<span class="w">    </span><span class="nx">baz</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">bar</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">baz</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_40">▼ 型アサーション<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<p>インターフェース型を他の型に変換する。</p>
<p>インターフェース型の変数で『<code>.(データ型)</code>』を宣言する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// インターフェース型</span>
<span class="w">    </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="c1">// インターフェース型からinteger型に変換 (変換しないと演算できない)</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="p">.(</span><span class="kt">int</span><span class="p">)</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">y</span><span class="p">.(</span><span class="kt">int</span><span class="p">)</span>
<span class="w">    </span><span class="nx">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">b</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="error">▼ errorインターフェース<a class="headerlink" href="#error" title="Permanent link">&para;</a></h4>
<p>Goには、標準搭載されているインターフェースがある。</p>
<p>このインターフェースが強制するメソッドを実装した構造体を定義すると、自動的に委譲が行われる。</p>
<p><strong>＊例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Error</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="string">▼ stringインターフェース<a class="headerlink" href="#string" title="Permanent link">&para;</a></h4>
<p>構造体に<code>String</code>メソッドを定義しておくと、Print系関数に構造体を渡した時に、これが実行される。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">f</span><span class="w"> </span><span class="o">*</span><span class="nx">Foo</span><span class="p">)</span><span class="w"> </span><span class="nx">String</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Stringメソッドを実行しました。&quot;</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">f</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Foo</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="nil">nil<a class="headerlink" href="#nil" title="Permanent link">&para;</a></h3>
<h4 id="nil_1">▼ nilとは<a class="headerlink" href="#nil_1" title="Permanent link">&para;</a></h4>
<p>いくつかのデータ型における初期値のこと。</p>
<h4 id="_41">▼ ポインタの場合<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;x&quot;</span>

<span class="w">    </span><span class="c1">// ポインタ型の定義のみ</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">p1</span><span class="w"> </span><span class="o">*</span><span class="kt">string</span>

<span class="w">    </span><span class="c1">// ポインタ型の変数を定義代入</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">p2</span><span class="w"> </span><span class="o">*</span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">x</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p1</span><span class="p">)</span><span class="w"> </span><span class="c1">// (*string)(nil)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p2</span><span class="p">)</span><span class="w"> </span><span class="c1">// (*string)(0xc0000841e0)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_42">▼ インターフェースの場合<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// &lt;nil&gt;</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="02">02. 関数<a class="headerlink" href="#02" title="Permanent link">&para;</a></h2>
<h3 id="main">main関数<a class="headerlink" href="#main" title="Permanent link">&para;</a></h3>
<h4 id="main_1">▼ <code>main</code>関数とは<a class="headerlink" href="#main_1" title="Permanent link">&para;</a></h4>
<p>goのエントリーポイントとなる。</p>
<p>goのプログラムが起動した時に、各パッケージの<code>init</code>関数が実行された後、<code>main</code>関数が実行される。</p>
<p><code>main</code>関数をビルド対象に指定すると、これを開始点として読み込まれるファイルが枝分かれ状にビルドされていく。</p>
<p>ステータス『0』でプロセスを終了する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>当然、<code>main</code>パッケージや<code>main</code>関数が無いと、goのプログラムの起動時にエラーが発生する。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>go<span class="w"> </span>run<span class="w"> </span>server.go

go<span class="w"> </span>run:<span class="w"> </span>cannot<span class="w"> </span>run<span class="w"> </span>non-main<span class="w"> </span>package
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>go<span class="w"> </span>run<span class="w"> </span>server.go

<span class="c1"># command-line-arguments</span>
runtime.main:<span class="w"> </span>call<span class="w"> </span>to<span class="w"> </span>external<span class="w"> </span><span class="k">function</span><span class="w"> </span>main.main
runtime.main:<span class="w"> </span>main.main:<span class="w"> </span>not<span class="w"> </span>defined
runtime.main:<span class="w"> </span>undefined:<span class="w"> </span>main.main
</code></pre></div>
<p><br></p>
<h3 id="_43">独自関数<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h3>
<h4 id="_44">▼ 関数とは<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<p>構造体に紐付けられていない関数のこと。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">// 頭文字を大文字する</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">Foo</span><span class="p">(</span><span class="nx">foo</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Foo</span><span class="p">(</span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_45">▼ 引数の型<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p>引数の型として、構造体の場合はポインタ型、それ以外のデータの場合はポインタ型以外が推奨される。</p>
<blockquote>
<ul>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments#pass-values">https://github.com/golang/go/wiki/CodeReviewComments#pass-values</a></li>
</ul>
</blockquote>
<h4 id="closure">▼ Closure (無名関数) とは<a class="headerlink" href="#closure" title="Permanent link">&para;</a></h4>
<p>名前のない関数のこと。</p>
<h4 id="_46">▼ 即時関数とは<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p>定義したその場でコールされる無名関数のこと。</p>
<p><strong>＊実装例＊</strong></p>
<p>main関数で即時関数を実行する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Closure is working!&quot;</span>
<span class="w">    </span><span class="p">}()</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>即時関数に引数を設定できる。</p>
<p>その場合、仮引数と引数の両方を設定する必要がある。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 仮引数を設定</span>
<span class="w">    </span><span class="nx">result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span>

<span class="w">    </span><span class="p">}(</span><span class="s">&quot;Closure is working!&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// 引数に値を渡す</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_47">メソッド<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<h4 id="_48">▼ メソッドとは<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<p>データ型や型リテラルに紐付けられている関数のこと。</p>
<p>Goは、言語としてオブジェクトという機能を持っていないが、構造体に関数を紐付けることにより、擬似的にオブジェクトを表現できる。</p>
<h4 id="_49">▼ レシーバによる紐付け<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p>データ型や型リテラルなどを関数のレシーバとして渡すことによって、それに関数を紐付けられる。</p>
<p>紐付け後、関数はメソッドと呼ばれるようになる。</p>
<p>メソッド名とフィールド名に同じ名前は使用できない。</p>
<p><strong>＊実装例＊</strong></p>
<p>integer型を値レシーバとして渡し、構造体に関数を紐付ける。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Age</span><span class="w"> </span><span class="kt">int</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nx">Age</span><span class="p">)</span><span class="w"> </span><span class="nx">PrintAge</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%dです。&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">age</span><span class="w"> </span><span class="nx">Age</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">20</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">age</span><span class="p">.</span><span class="nx">printAge</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>構造体を値レシーバとして渡し、構造体に関数を紐付ける。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="c1">// 構造体を定義</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 構造体に関数を紐付ける。</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">GetName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span>
<span class="p">}</span>

<span class="c1">// 構造体から関数をコール</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 構造体を初期化</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">GetName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_50">▼ 値レシーバ<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<p>構造体の実体と関数を直接的に紐付ける。</p>
<p>紐付け後、関数はメソッドと呼ばれるようになる。</p>
<p>レシーバとして渡された引数をメソッド内でコピーしてから使用する。</p>
<p>値レシーバによって紐付けられると、そのメソッドは構造体の状態を変えられなくなるため、構造体をイミュータブルにしたい場合は、値レシーバを使用すると良い。</p>
<p><strong>＊実装例＊</strong></p>
<p>構造体を値レシーバとして渡し、構造体に関数を紐付ける。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 値レシーバ</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">SetName</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 引数の構造体をコピーしてから使用</span>
<span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">GetName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="s">&quot;Gopher&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">person</span><span class="p">.</span><span class="nx">SetName</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">GetName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Gopher&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_51">▼ ポインタレシーバ<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<p>構造体のポインタを使用して、関数と構造体の実体を紐付ける。</p>
<p>紐付け後、関数はメソッドと呼ばれるようになる。</p>
<p>レシーバとして渡された引数をメソッド内でそのまま使用する。</p>
<p>ポインタレシーバによって紐付けられると、そのメソッドは構造体の状態を変えられるようになるため、構造体をミュータブルにしたい場合は、ポインタレシーバを使用すると良い。</p>
<p>構造体を初期化する処理を持つコンストラクタ関数のみをポインタレシーバとし、他のメソッドを全て値レシーバとすると、最低限にミュータブルなプログラムを実装できる。</p>
<p>また、構造体はポインタ型として扱った方がメモリを節約できる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// ポインタレシーバ</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">SetName</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 引数の構造体をそのまま使用</span>
<span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">GetName</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">Person</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Gopher&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="nx">person</span><span class="p">.</span><span class="nx">SetName</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">.</span><span class="nx">GetName</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Hiroki&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="defer">defer関数<a class="headerlink" href="#defer" title="Permanent link">&para;</a></h3>
<h4 id="defer_1">▼ defer関数とは<a class="headerlink" href="#defer_1" title="Permanent link">&para;</a></h4>
<p>全ての処理の最後に必ず実行される遅延実行関数のこと。</p>
<p>たとえ、ランタイムエラーのように処理が強制的に途中終了しても実行される。</p>
<p><strong>＊実装例＊</strong></p>
<p>即時関数をdefer関数化している。</p>
<p>処理の最後にランタイムエラーが発生したとき、これを<code>recover</code>メソッドで吸収できる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Start&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// あらかじめdefer関数を定義しておく</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">recover</span><span class="p">()</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Recover: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;End&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}()</span>

<span class="w">    </span><span class="c1">// ここで意図的に処理を停止させている。</span>
<span class="w">    </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;Runtime error&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Start</span>
<span class="c1">// Recover: &quot;Runtime error&quot;</span>
<span class="c1">// End</span>
</code></pre></div>
<h4 id="defer_2">▼ 複数のdefer関数<a class="headerlink" href="#defer_2" title="Permanent link">&para;</a></h4>
<p>deferは複数の関数で宣言できる。</p>
<p>複数宣言した場合、後に宣言されたものから実行される。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 3</span>
<span class="c1">// 2</span>
<span class="c1">// 1</span>
</code></pre></div>
<p><br></p>
<h3 id="_52">返却値<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h3>
<h4 id="_53">▼ 複数の返却値<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">division</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 商を計算する。</span>
<span class="w">    </span><span class="nx">quotient</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">y</span>

<span class="w">    </span><span class="c1">// 余りを計算する。</span>
<span class="w">    </span><span class="nx">remainder</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nx">y</span>

<span class="w">    </span><span class="c1">// 商と余りを返却する。</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">quotient</span><span class="p">,</span><span class="w"> </span><span class="nx">remainder</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 10÷3を計算する。</span>
<span class="w">    </span><span class="nx">q</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">division</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;商=%d、余り=%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">q</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_54">▼ 返却値の破棄<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<p>関数から複数の値が返却される時、使用しない値をアンダースコアに代入することにより、これを破棄できる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// errorインターフェースを破棄</span>
<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// エラーキャッチする必要がなくなる</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="04">04. 変数<a class="headerlink" href="#04" title="Permanent link">&para;</a></h2>
<h3 id="_55">定義 (宣言+代入)<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h3>
<h4 id="_56">▼ 明示的な定義<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1個の変数を定義 (宣言と代入が同時でない)</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="kt">int</span>
<span class="nx">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5</span>

<span class="c1">// 1個の変数を定義 (宣言と代入が同時)</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5</span>

<span class="c1">// 複数の変数を定義</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="p">,</span><span class="w"> </span><span class="nx">baz</span><span class="w"> </span><span class="kt">int</span>
<span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="p">,</span><span class="w"> </span><span class="nx">baz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div>
<h4 id="_57">▼ 暗黙的な定義 (型推論)<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// データ型が自動的に認識される</span>
<span class="nx">w</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span>
<span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">true</span>
<span class="nx">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="nx">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;abc&quot;</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">w</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span>

<span class="kd">var</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="nx">y</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">3.14</span>
<span class="w">    </span><span class="nx">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;abc&quot;</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">quotient</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 商を計算する。</span>
<span class="w">    </span><span class="nx">quotient</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">y</span>

<span class="w">    </span><span class="c1">// を返却する。</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">quotient</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">quotient</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_58">▼ 再宣言<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h4>
<p>基本的には、同じスコープ内で既存の変数を再宣言できない。</p>
<p>ただし、複数の変数を宣言する時に、いずれかに新しい変数の宣言が含まれていれば、既存の変数を宣言したとしても、代入のみが実行される。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span>

<span class="w">    </span><span class="c1">// 新しい変数の宣言が含まれている</span>
<span class="w">    </span><span class="nx">foo</span><span class="p">,</span><span class="w"> </span><span class="nx">bar</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="c1">// 2</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="c1">// 3</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_59">定義位置の種類<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h3>
<h4 id="_60">▼ パッケージ変数<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h4>
<p>関数の外部で定義された変数のこと。</p>
<p>スコープとして、宣言されたパッケージ外部でも使用できる。</p>
<p><strong>＊実装例＊</strong></p>
<p>パッケージ変数を宣言し、関数内で値を代入する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="c1">// パッケージ変数</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="kt">string</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">text</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hello World!&quot;</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>変数に対する代入は関数内でしかできないため、宣言と代入を同時に行う型推論を使用するとエラーになってしまう。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="c1">// エラーになってしまう。</span>
<span class="nx">text</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;Hello World!&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_61">▼ ローカル変数<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h4>
<p>関数の内部で定義された変数のこと。</p>
<p>スコープとして、宣言されたパッケージ内部でしか使用できない。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ローカル変数</span>
<span class="w">    </span><span class="nx">text</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;Hello World!&quot;</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="03">03. スコープ<a class="headerlink" href="#03" title="Permanent link">&para;</a></h2>
<h3 id="_62">変数、定数<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<h4 id="_63">▼ パッケージ内外から参照可能<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h4>
<p>変数名または定数名の頭文字を大文字すると、パッケージ内外でこれをコールできるようになる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">foo</span>

<span class="c1">// 定数を定義する。</span>
<span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nx">X</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;X&quot;</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">foo</span><span class="p">)</span><span class="w"> </span><span class="c1">// foo</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_64">▼ パッケージ内のみ参照可能<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h4>
<p>変数名または定数名の頭文字を小文字すると、パッケージ外でこれをコールできなくなる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="c1">// 定数を定義する。</span>
<span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nx">yZ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;yZ&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">yZ</span><span class="p">)</span><span class="w"> </span><span class="c1">// yZ</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="_65">関数<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h3>
<h4 id="_66">▼ パッケージ内外から参照可能<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h4>
<p>関数名の頭文字を大文字すると、パッケージ内外でこれをコールできるようになる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">foo</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">Foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 何らかの処理</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Foo</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_67">▼ パッケージ内のみ参照可能<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h4>
<p>関数名の頭文字を小文字すると、パッケージ外でこれをコールできなくなる。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 何らかの処理</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">foo</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="04_1">04. 制御文<a class="headerlink" href="#04_1" title="Permanent link">&para;</a></h2>
<h3 id="_68">配列またはスライスの走査<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h3>
<h4 id="for-range">▼ <code>for ... range</code><a class="headerlink" href="#for-range" title="Permanent link">&para;</a></h4>
<p>配列またはスライスを走査する。</p>
<p>PHPの<code>foreach</code>に相当する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">slice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">slice</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 0 a</span>
<span class="c1">// 1 b</span>
<span class="c1">// 2 c</span>
</code></pre></div>
<p><br></p>
<h2 id="05">05. 処理の種類<a class="headerlink" href="#05" title="Permanent link">&para;</a></h2>
<h3 id="_69">同期処理<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h3>
<h4 id="_70">▼ 同期処理とは<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h4>
<p>前の処理を待って、次の処理を開始する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 1</span>
<span class="c1">// 2</span>
<span class="c1">// 3</span>
</code></pre></div>
<p><br></p>
<h3 id="_71">非同期処理 (並行処理)<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h3>
<h4 id="_72">▼ 非同期処理 (並行処理) とは<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h4>
<p>前の処理の終了を待たずに次の処理を開始し、それぞれの処理が独立して終了する。</p>
<p>結果、終了する順番は順不同になる。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/sync/">https://golang.org/pkg/sync/</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>
<p><br></p>
<h3 id="_73">並列処理<a class="headerlink" href="#_73" title="Permanent link">&para;</a></h3>
<h4 id="_74">▼ 並列処理<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h4>
<p>指定した処理を同時に開始し、それぞれの処理が独立して完了する。</p>
<p>結果、完了する順番は順不同になる。</p>
<p>関数でGoルーチンを宣言すると、その関数のコールを並列化できる。</p>
<p>ただし、main関数はGoルーチン宣言された関数の完了を待たずに完了してしまうため、この関数の実行完了を待つようにする必要がある。</p>
<p>方法には、以下の<code>3</code>個がある。</p>
<h4 id="channel">▼ channel<a class="headerlink" href="#channel" title="Permanent link">&para;</a></h4>
<p>値を受信できるキューとして動作する。</p>
<p>キューに値を送信し、加えてキューから値を受信できる。</p>
<blockquote>
<ul>
<li><a href="https://dev-yakuza.posstree.com/golang/channel/#%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB">https://dev-yakuza.posstree.com/golang/channel/#%E3%83%81%E3%83%A3%E3%83%8D%E3%83%AB</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// チャンネルを作成</span>
<span class="w">    </span><span class="nx">channel</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span>

<span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// チャンネルに値を送信する。</span>
<span class="w">        </span><span class="nx">channel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;ping&quot;</span>
<span class="w">    </span><span class="p">}()</span>

<span class="w">    </span><span class="c1">// チャンネルから値を受信する。</span>
<span class="w">    </span><span class="nx">value</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">channel</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="waitgroup">▼ WaitGroup<a class="headerlink" href="#waitgroup" title="Permanent link">&para;</a></h4>
<p>1つまたは複数の関数でGoルーチンを宣言したい時に使用する。</p>
<p><strong>＊実装例＊</strong></p>
<p>並列処理により、反復処理を素早く完了できる。</p>
<p>実行完了に一秒かかる関数があると仮定する。</p>
<p>反復処理でこの関数をコールする場合、毎回の走査に一秒かかるため、反復の回数だけ秒数が増える。</p>
<p>しかし、Goルーチンを宣言し並列化することにより、各走査が全て並列に実行されるため、反復回数が何回であっても、一秒で処理が終了する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;sync&quot;</span>
<span class="w">    </span><span class="s">&quot;time&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nb">print</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span>
<span class="w">    </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// 処理完了に一秒かかると仮定する。</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">wg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">{}</span>

<span class="w">    </span><span class="nx">slice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 処理の開始時刻を取得</span>
<span class="w">    </span><span class="nx">start</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">slice</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nx">wg</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// go routineの宣言の数</span>

<span class="w">        </span><span class="c1">// Goルーチンを宣言して並列化</span>
<span class="w">        </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">defer</span><span class="w"> </span><span class="nx">wg</span><span class="p">.</span><span class="nx">Done</span><span class="p">()</span>
<span class="w">            </span><span class="c1">// 時間のかかる関数</span>
<span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span>
<span class="w">        </span><span class="p">}(</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Add関数で指定した数のgo routineが実行されるまで待機</span>
<span class="w">    </span><span class="nx">wg</span><span class="p">.</span><span class="nx">Wait</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// 開始時刻から経過した秒数を取得</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;経過秒数: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Since</span><span class="p">(</span><span class="nx">start</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">// 2 c</span>
<span class="c1">// 0 a</span>
<span class="c1">// 1 b</span>
<span class="c1">// 経過秒数: 1s</span>
</code></pre></div>
<h4 id="errgroup">▼ errgroup<a class="headerlink" href="#errgroup" title="Permanent link">&para;</a></h4>
<p>エラー処理を含む関数でGoルーチンを宣言したい時に使用する。</p>
<h4 id="select">▼ select<a class="headerlink" href="#select" title="Permanent link">&para;</a></h4>
<p>チャンネルに対する格納を非同期で待機する。</p>
<blockquote>
<ul>
<li><a href="https://www.spinute.org/go-by-example/select.html">https://www.spinute.org/go-by-example/select.html</a></li>
<li><a href="https://leben.mobi/go/channel-and-select/go-programming/">https://leben.mobi/go/channel-and-select/go-programming/</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;time&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// チャンネルを作成する。</span>
<span class="w">    </span><span class="nx">c1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span>
<span class="w">    </span><span class="nx">c2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// ここに、完了タイミングのバラバラな処理があるとする。</span>
<span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 完了までに2秒かかるとする。</span>
<span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// 値を送信する。</span>
<span class="w">        </span><span class="nx">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;one&quot;</span>
<span class="w">    </span><span class="p">}()</span>
<span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 完了までに1秒かかるとする。</span>
<span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// 値を送信する。</span>
<span class="w">        </span><span class="nx">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;two&quot;</span>
<span class="w">    </span><span class="p">}()</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">select</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// c1とc2の受信を非同期で待機し、受信した順番で処理する。</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">msg1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">c1</span><span class="p">:</span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;received&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg1</span><span class="p">)</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">msg2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">c2</span><span class="p">:</span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;received&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg2</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// 受信が成功しなければ、defaultで処理する。</span>
<span class="w">        </span><span class="k">default</span><span class="p">:</span>
<span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;default&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="06">06. エラーキャッチ、例外スロー<a class="headerlink" href="#06" title="Permanent link">&para;</a></h2>
<h3 id="go_1">Goにおけるエラーキャッチと例外スロー<a class="headerlink" href="#go_1" title="Permanent link">&para;</a></h3>
<h4 id="_75">▼ 例外スローのある言語の場合<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h4>
<p>例外スローの意義は、以下の参考にせよ。</p>
<blockquote>
<ul>
<li><a href="https://hiroki-it.github.io/tech-notebook/language/language_php_logic_validation.html">https://hiroki-it.github.io/tech-notebook/language/language_php_logic_validation.html</a></li>
</ul>
</blockquote>
<h4 id="go_2">▼ Goには例外が無い<a class="headerlink" href="#go_2" title="Permanent link">&para;</a></h4>
<p>例えばPHPでは、エラーをキャッチし、ソフトウェア開発者にわかる言葉に変換した例外としてスローする。</p>
<p>Goには例外クラスに相当するものが無い。</p>
<p>その代わり、エラーそのものがerrorインターフェースに保持されており、これを<code>1</code>個の値として扱える。</p>
<p>下流で発生したerrorインターフェースを、そのまま上流に返却する。</p>
<p><br></p>
<h3 id="_76">エラーキャッチ<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h3>
<h4 id="nil_2">▼ nilの比較検証<a class="headerlink" href="#nil_2" title="Permanent link">&para;</a></h4>
<p>関数から返却されたerrインターフェースが、<code>nil</code>でなかった場合、エラーであると見なすようにする。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 何らかの処理</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="error_1">errorインターフェース<a class="headerlink" href="#error_1" title="Permanent link">&para;</a></h3>
<h4 id="_77">▼ 標準エラー<a class="headerlink" href="#_77" title="Permanent link">&para;</a></h4>
<p>Goでは複数の値を返却できるため、多くの関数ではデフォルトで、最後にerrorインターフェースが返却されるようになっている。</p>
<p>errorインターフェースは暗黙的に<code>Error</code>メソッドをコールする。</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Error</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>osパッケージの<code>Open</code>メソッドからerrorインターフェースが返却される。</p>
<p>errorインターフェースはErrorメソッドを自動的に実行し、標準エラー出力に出力する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 処理結果とerrorインターフェースが返却される。</span>
<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// エラーの内容を出力する。</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="new">▼ <code>New</code>関数による独自エラー<a class="headerlink" href="#new" title="Permanent link">&para;</a></h4>
<p>errorsパッケージの<code>New</code>メソッドにエラーを設定する。</p>
<p>これにより、ユーザー定義のエラーを保持するerrorインターフェースを定義できる。</p>
<p>errorインターフェースはErrorメソッドを自動的に実行する。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/errors/#New">https://golang.org/pkg/errors/#New</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;errors&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewError</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;&lt;エラーメッセージ&gt;&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 独自エラーメッセージを設定する。</span>
<span class="w">        </span><span class="nx">myErr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewError</span><span class="p">()</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myErr</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="fmterrorf">▼ <code>fmt.Errorf</code>メソッドによる独自エラー<a class="headerlink" href="#fmterrorf" title="Permanent link">&para;</a></h4>
<p>fmtパッケージの<code>Errorf</code>メソッドで独自エラーを作成できる。</p>
<p>事前に定義したフォーマットを元にエラーを設定する。</p>
<p>これにより、ユーザー定義のエラーを保持するerrorインターフェースを定義できる。</p>
<p>errorインターフェースはErrorメソッドを自動的に実行する。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/fmt/#Errorf">https://golang.org/pkg/fmt/#Errorf</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;ERROR: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="_78">▼ 構造体による独自エラー<a class="headerlink" href="#_78" title="Permanent link">&para;</a></h4>
<p>構造体に<code>Error</code>メソッドを定義すると、この構造体にerrorインターフェースが自動的に委譲される。</p>
<p>これにより、ユーザー定義のエラーを保持するerrorインターフェースを定義できる。</p>
<p>errorインターフェースはErrorメソッドを自動的に実行する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Error</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Message</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="kt">error</span><span class="w"> </span><span class="o">*</span><span class="nx">Error</span><span class="p">)</span><span class="w"> </span><span class="nx">Error</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;ERROR: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 構造体に値を設定する。</span>
<span class="w">        </span><span class="nx">myError</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Error</span><span class="p">{</span><span class="nx">Message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;エラーが発生したため、処理を完了しました。&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="c1">// 構造体をコールするのみで、Errorメソッドが実行される。</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myError</span><span class="p">)</span>
<span class="w">        </span><span class="nx">os</span><span class="p">.</span><span class="nx">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="xerrors">xerrorsパッケージ<a class="headerlink" href="#xerrors" title="Permanent link">&para;</a></h3>
<h4 id="xerrors_1">▼ xerrorsパッケージとは<a class="headerlink" href="#xerrors_1" title="Permanent link">&para;</a></h4>
<p>標準のerrorsパッケージには、エラーにスタックトレース情報が含まれていない。</p>
<p>xerrorsパッケージによって作成されるerrorインターフェースには、errorインターフェースが返却された行数がスタックトレースとして含まれている。</p>
<h4 id="new_1">▼ <code>New</code>関数によるトレース付与<a class="headerlink" href="#new_1" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;golang.org/x/xerrors&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewErrorWithTrace</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">xerrors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;&lt;エラーメッセージ&gt;&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// errorインターフェースが返却された行数が付与される。</span>
<span class="w">        </span><span class="nx">errWithStack</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewErrorWithTrace</span><span class="p">()</span>
<span class="w">        </span><span class="c1">// %+v\n を使用する。</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">errWithStack</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="errorf">▼ <code>Errorf</code>メソッドによるトレース付与<a class="headerlink" href="#errorf" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;golang.org/x/xerrors&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// errorインターフェースが返却された行数が付与される。</span>
<span class="w">        </span><span class="nx">errWithStack</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">xerrors</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;ERROR: %w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// %+v\n を使用する。</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %+v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">errWithStack</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">flle</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="06-02">06-02. ロギング<a class="headerlink" href="#06-02" title="Permanent link">&para;</a></h2>
<h3 id="log">logパッケージ<a class="headerlink" href="#log" title="Permanent link">&para;</a></h3>
<h4 id="log_1">▼ logパッケージとは<a class="headerlink" href="#log_1" title="Permanent link">&para;</a></h4>
<p>Goにはデフォルトで、ロギング用パッケージが用意されている。</p>
<p>ただし、機能が乏しいため、外部パッケージ (例：logrus) も推奨である。</p>
<blockquote>
<ul>
<li><a href="https://pkg.go.dev/log">https://pkg.go.dev/log</a></li>
<li><a href="https://github.com/sirupsen/logrus">https://github.com/sirupsen/logrus</a></li>
</ul>
</blockquote>
<h4 id="print">▼ 接尾辞<code>Print</code>メソッド<a class="headerlink" href="#print" title="Permanent link">&para;</a></h4>
<p>渡された値を標準出力に出力する。</p>
<p><strong>＊実装例＊</strong></p>
<p>渡されたerrorインターフェースを標準出力に出力する。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="fatal">▼ 接尾辞<code>Fatal</code>メソッド<a class="headerlink" href="#fatal" title="Permanent link">&para;</a></h4>
<p>渡された値を標準出力に出力し、<code>os.Exit(1)</code>を実行して、ステータス『1』で処理を完了する。</p>
<p><strong>＊実装例＊</strong></p>
<p>渡されたerrorインターフェースを標準出力に出力する。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 内部でos.Exit(1)を実行する。</span>
<span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="panic">▼ 接尾辞<code>Panic</code>メソッド<a class="headerlink" href="#panic" title="Permanent link">&para;</a></h4>
<p>渡された値を標準出力に出力し、予期せぬエラーが起きたと見なして<code>panic</code>メソッドを実行する。</p>
<p>補足として、<code>panic</code>メソッドによって、エラーメッセージ出力、スタックトレース出力、処理停止が行われる。</p>
<p>ただし、<code>panic</code>ではビルドやアーティファクト実行のエラー時に完了ステータスのみを返却することがあり、その場合に何が原因でエラーが発生したのかわからないことがあるため、非推奨である (ビルド失敗の原因がわからずに時間を溶かした経験あり) 。</p>
<blockquote>
<ul>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments#dont-panic">https://github.com/golang/go/wiki/CodeReviewComments#dont-panic</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<p>渡されたerrorインターフェースを標準出力に出力する。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// panicメソッドを実行する。</span>
<span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Panicf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h2 id="07">07. テンプレート<a class="headerlink" href="#07" title="Permanent link">&para;</a></h2>
<h3 id="_79">ロジック<a class="headerlink" href="#_79" title="Permanent link">&para;</a></h3>
<h4 id="_80">▼ コメント<a class="headerlink" href="#_80" title="Permanent link">&para;</a></h4>
<p>Goのコメントの前に不要な改行が挿入されないように、<code>{{-</code>とする方が良い。</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">{{</span><span class="nv">- /* コメント */</span><span class="p p-Indicator">}}</span>
</code></pre></div>
<p>もしコメントの後にも改行が挿入されてしまう場合は、<code>-}}</code>も付ける。</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">{{</span><span class="nv">- /* コメント */-</span><span class="p p-Indicator">}}</span>
</code></pre></div>
<p><code>*/}}</code>にはスペースを含めずに、一繋ぎで定義する。</p>
<h4 id="_81">▼ 条件分岐<a class="headerlink" href="#_81" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">if x==100</span><span class="w"> </span><span class="p p-Indicator">}}</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">{{ else }}</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">{{ end }}</span>
</code></pre></div>
<p><br></p>
<h3 id="_82">テンプレート内のエスケープ<a class="headerlink" href="#_82" title="Permanent link">&para;</a></h3>
<h4 id="_83">▼ テンプレート内のエスケープとは<a class="headerlink" href="#_83" title="Permanent link">&para;</a></h4>
<p>Goのテンプレートでは、『<code>{{</code>』と『<code>}}</code>』の記号がロジックで使用される。</p>
<p>これを文字として使用する場合は、ロジックとして認識されないようにエスケープする必要がある。</p>
<h4 id="_84">▼ {{ "&lt;記号&gt;" }}<a class="headerlink" href="#_84" title="Permanent link">&para;</a></h4>
<p>各記号を<code>{{ "&lt;記号&gt;" }}</code>のように挟み、エスケープする。</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">{{</span><span class="w"> </span><span class="s">&quot;</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">&quot;</span><span class="w"> </span><span class="p p-Indicator">}}</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo {{ &quot; }} &quot; }}</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/a/17642427">https://stackoverflow.com/a/17642427</a></li>
</ul>
</blockquote>
<h4 id="_85">▼ {{ <code>&lt;記号を含む文字&gt;</code> }}<a class="headerlink" href="#_85" title="Permanent link">&para;</a></h4>
<p>記号を含む文字ごと<code>{{ `&lt;記号を含む文字列全体&gt;` }}</code>のように挟み、エスケープする。</p>
<p>多くの場合にこの方法で対処できるが、文字列内にバックスラッシュがある場合は対処できない。</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">{{</span><span class="w"> </span><span class="err">`</span><span class="p p-Indicator">{{</span><span class="w">  </span><span class="nv">foo</span><span class="w">  </span><span class="p p-Indicator">}}</span><span class="err">`</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</code></pre></div>
<blockquote>
<ul>
<li><a href="https://stackoverflow.com/a/38941123">https://stackoverflow.com/a/38941123</a></li>
</ul>
</blockquote>
<p><br></p>
<h2 id="08">08. ビルトインパッケージ<a class="headerlink" href="#08" title="Permanent link">&para;</a></h2>
<h3 id="_86">パッケージのコード<a class="headerlink" href="#_86" title="Permanent link">&para;</a></h3>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/">https://golang.org/pkg/</a></li>
</ul>
</blockquote>
<p><br></p>
<h3 id="bytes">bytes<a class="headerlink" href="#bytes" title="Permanent link">&para;</a></h3>
<h4 id="buffer">▼ <code>Buffer</code>メソッド<a class="headerlink" href="#buffer" title="Permanent link">&para;</a></h4>
<p>渡された文字列を結合し、標準出力に出力する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">buffer</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>

<span class="w">    </span><span class="nx">buffer</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="s">&quot;Hello &quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">buffer</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="s">&quot;world!&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">buffer</span><span class="p">.</span><span class="nx">String</span><span class="p">())</span><span class="w"> </span><span class="c1">// &quot;Hello world!&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="encodingjson">encoding/json<a class="headerlink" href="#encodingjson" title="Permanent link">&para;</a></h3>
<h4 id="marshal">▼ <code>Marshal</code>関数<a class="headerlink" href="#marshal" title="Permanent link">&para;</a></h4>
<p>構造体をJSONに変換する。</p>
<p>変換前に、マッピングを行うようにする。</p>
<p>引数のデータ型は、ポインタ型または非ポインタ型のいずれでも問題ない。</p>
<p>ただし、他の多くの関数がポインタ型を引数型としていることから、それに合わせてポインタ型で渡すことが多い。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/encoding/json/#Marshal">https://golang.org/pkg/encoding/json/#Marshal</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Marshalに渡す構造体のフィールドはパブリックが必須</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ポインタ型と非ポインタ型の両方の引数に対応</span>
<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// エンコード結果を出力</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">))</span><span class="w"> </span><span class="c1">// &quot;{\&quot;Name\&quot;:\&quot;Hiroki\&quot;}&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>この時、構造体のフィールドはパブリックにする必要がある。</p>
<p>しかし、<code>MarshalJSON</code>関数を構造体に定義すると、<code>Marshal</code>関数の代わりにこれがコールされるようになる。</p>
<p>構造体にゲッターを用意して、<code>MarshalJSON</code>関数でパブリックな構造体を作成すると、プライベートな構造体に対しても<code>Marshal</code>関数を使用できるようになる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Person</span><span class="p">)</span><span class="w"> </span><span class="nx">MarshalJSON</span><span class="p">()</span><span class="w"> </span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="o">&amp;</span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ここでjsonタグを定義する。</span>
<span class="w">        </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="w">    </span><span class="p">}{</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">Name</span><span class="p">(),</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewPerson</span><span class="p">(</span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">person</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// エンコード結果を出力</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">))</span><span class="w"> </span><span class="c1">// &quot;{\&quot;Name\&quot;:\&quot;Hiroki\&quot;}&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="unmarshal">▼ <code>Unmarshal</code>関数<a class="headerlink" href="#unmarshal" title="Permanent link">&para;</a></h4>
<p>JSONを構造体に変換する。</p>
<p>リクエストの受信によく使われる。</p>
<p>リクエストのメッセージボディにはバイト型データが割り当てられているため、<code>Unmarshal</code>関数の第一引数はバイト型になる。</p>
<p>また、第二引数として、変換後の構造体のメモリアドレスを渡すことにより、第一引数がその構造体に変換される。</p>
<p>内部的には、そのメモリアドレスに割り当てられている変数を書き換えている。</p>
<p><code>Unmarshal</code>関数に渡す構造体のフィールドはパブリックが必要であるが、<code>Marshal</code>関数と同様にして、<code>UnMarshalJSON</code>関数を構造体に定義すれば、代わりにこれをコールできる。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/encoding/json/#Unmarshal">https://golang.org/pkg/encoding/json/#Unmarshal</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Unmarshalに渡す構造体のフィールドはパブリックが必須</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// リクエストを受信した場合を想定する。</span>
<span class="w">    </span><span class="kt">byte</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">`{&quot;name&quot;:&quot;Hiroki&quot;}`</span><span class="p">)</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">person</span><span class="w"> </span><span class="nx">Person</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// main.Person{Name:&quot;&quot;} (変数はまだ書き換えられていない)</span>

<span class="w">    </span><span class="c1">// person変数を変換後の値に書き換えている。</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Unmarshal</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">person</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// main.Person{Name:&quot;Hiroki&quot;} (変数が書き換えられた)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="rawmessage">▼ <code>RawMessage</code>関数<a class="headerlink" href="#rawmessage" title="Permanent link">&para;</a></h4>
<p>JSONから構造体にパースするために<code>Unmarshal</code>関数を実行した時に、部分的にパースせずにJSONのまま取得できる。</p>
<p><strong>＊実装例＊</strong></p>
<p>CloudWatchは様々なイベントを処理するため、一部のJSON構造が動的に変化する。</p>
<p>そのため、<code>RawMessage</code>関数が使用されている。</p>
<blockquote>
<ul>
<li><a href="https://github.com/aws/aws-lambda-go/blob/master/events/cloudwatch_events.go">https://github.com/aws/aws-lambda-go/blob/master/events/cloudwatch_events.go</a></li>
</ul>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">events</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;time&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">CloudWatchEvent</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Version</span><span class="w">    </span><span class="kt">string</span><span class="w">          </span><span class="s">`json:&quot;version&quot;`</span>

<span class="w">    </span><span class="o">...</span>

<span class="w">    </span><span class="nx">Resources</span><span class="w">  </span><span class="p">[]</span><span class="kt">string</span><span class="w">        </span><span class="s">`json:&quot;resources&quot;`</span>

<span class="w">    </span><span class="c1">// 動的に変化するJSON構造</span>
<span class="w">    </span><span class="nx">Detail</span><span class="w">     </span><span class="nx">json</span><span class="p">.</span><span class="nx">RawMessage</span><span class="w"> </span><span class="s">`json:&quot;detail&quot;`</span>
<span class="p">}</span>
</code></pre></div>
<p>イベントのJSONを文字列のまま取得できる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">handler</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="cm">/**</span>
<span class="cm"> * Lambdaハンドラー関数</span>
<span class="cm"> */</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">HandleRequest</span><span class="p">(</span><span class="nx">event</span><span class="w"> </span><span class="nx">events</span><span class="p">.</span><span class="nx">CloudWatchEvent</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">Detail</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="indent">▼ <code>Indent</code>関数<a class="headerlink" href="#indent" title="Permanent link">&para;</a></h4>
<p>渡されたJSONにインデントを挿入する。</p>
<p>タブを挿入する場合は『<code>\t</code>』、空白2つを挿入する場合は『<code></code>』を設定する。</p>
<p>標準出力に出力すると、整形されたJSONを確認できる。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Objects</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Id</span><span class="w">   </span><span class="kt">int</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">objects</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nx">Objects</span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroko&quot;</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroshi&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">buf</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span>

<span class="w">    </span><span class="c1">// インデント (タブ、空白) を挿入する。</span>
<span class="w">    </span><span class="nx">json</span><span class="p">.</span><span class="nx">Indent</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">buf</span><span class="p">,</span><span class="w"> </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\t&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// json.Indent(&amp;buf, byteJson, &quot;&quot;, &quot;  &quot;)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nx">String</span><span class="p">())</span>
<span class="p">}</span>

<span class="cm">/* 結果</span>
<span class="cm">[</span>
<span class="cm">    {</span>
<span class="cm">        &quot;Id&quot;: 1,</span>
<span class="cm">        &quot;Name&quot;: &quot;Hiroki&quot;</span>
<span class="cm">    },</span>
<span class="cm">    {</span>
<span class="cm">        &quot;Id&quot;: 2,</span>
<span class="cm">        &quot;Name&quot;: &quot;Hiroko&quot;</span>
<span class="cm">    },</span>
<span class="cm">    {</span>
<span class="cm">        &quot;Id&quot;: 3,</span>
<span class="cm">        &quot;Name&quot;: &quot;Hiroshi&quot;</span>
<span class="cm">    }</span>
<span class="cm">]</span>
<span class="cm">*/</span>
</code></pre></div>
<p><br></p>
<h3 id="fmt">fmt<a class="headerlink" href="#fmt" title="Permanent link">&para;</a></h3>
<h4 id="_87">▼ 接頭接尾辞無しメソッド<a class="headerlink" href="#_87" title="Permanent link">&para;</a></h4>
<p>接頭接尾辞の無いメソッド (例：<code>Print</code>メソッド、<code>Sprint</code>メソッド、<code>Fprint</code>メソッド、など) が所属する。</p>
<p>複数の引数をスペースを挟んで繋ぐ。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/fmt/#Print">https://golang.org/pkg/fmt/#Print</a></li>
<li><a href="https://golang.org/pkg/fmt/#Fprint">https://golang.org/pkg/fmt/#Fprint</a></li>
<li><a href="https://golang.org/pkg/fmt/#Sprint">https://golang.org/pkg/fmt/#Sprint</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">mainimport</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Hello world! }</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// 複数の引数をスペースで挟んで繋ぐ</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">// 1 2 3</span>
<span class="p">}</span>
</code></pre></div>
<p>ただし、引数のいずれかがstring値の場合、スペースが挿入されない。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// いずれかが文字列</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">12345</span><span class="p">)</span><span class="w"> </span><span class="c1">// Helloworld!12345</span>
<span class="p">}</span>
</code></pre></div>
<p>また、連続で使用しても、改行が挿入されない。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Hello world!Hello world!</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="s">▼ 接頭辞<code>S</code>メソッド<a class="headerlink" href="#s" title="Permanent link">&para;</a></h4>
<p>接頭辞に<code>S</code>のあるメソッド (例：<code>Sprint</code>メソッド、<code>Sprintf</code>メソッド、<code>Sprintln</code>メソッド、など) が所属する。</p>
<p>接頭辞が<code>F</code>や<code>P</code>のメソッドとは異なり、処理結果を標準出力に出力せずに返却する。</p>
<p>標準出力に出力できる他の関数の引数として渡す必要がある。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/fmt/#Sprint">https://golang.org/pkg/fmt/#Sprint</a></li>
<li><a href="https://golang.org/pkg/fmt/#Sprintf">https://golang.org/pkg/fmt/#Sprintf</a></li>
<li><a href="https://golang.org/pkg/fmt/#Sprintln">https://golang.org/pkg/fmt/#Sprintln</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">mainimport</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">        </span><span class="c1">// Sprintは返却するだけ    fmt.Print(fmt.Sprint(1, 2, 3)) // 1 2 3}</span>
</code></pre></div>
<h4 id="ln">▼ 接尾辞<code>ln</code>メソッド<a class="headerlink" href="#ln" title="Permanent link">&para;</a></h4>
<p>接尾辞に<code>ln</code>のあるメソッド (例：<code>Println</code>メソッド、<code>Fprintln</code>メソッド、<code>Sprintln</code>メソッド、など) が所属する。</p>
<p>複数の引数をスペースを挟んで繋ぎ、最後に改行を挿入して結合する。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/fmt/#Println">https://golang.org/pkg/fmt/#Println</a></li>
<li><a href="https://golang.org/pkg/fmt/#Fprintln">https://golang.org/pkg/fmt/#Fprintln</a></li>
<li><a href="https://golang.org/pkg/fmt/#Sprintln">https://golang.org/pkg/fmt/#Sprintln</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<p>文字を連続で標準出力に出力する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;world!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Hello world!</span>
<span class="w">    </span><span class="c1">// Hello world!</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="f">▼ 接尾辞<code>f</code>メソッド<a class="headerlink" href="#f" title="Permanent link">&para;</a></h4>
<p>渡された引数を、事前に定義したフォーマットにも基づいて結合する。</p>
<table>
<thead>
<tr>
<th>よく使用する識別子</th>
<th>標準出力に出力されるもの</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%s</code></td>
<td>文字列またはスライスとして</td>
<td></td>
</tr>
<tr>
<td><code>%p</code></td>
<td>ポインタとして</td>
<td></td>
</tr>
<tr>
<td><code>%+v</code></td>
<td>フィールドを含む構造体として</td>
<td>データの構造を確認できるため、デバッグに有効である。</td>
</tr>
<tr>
<td><code>%#v</code></td>
<td>Go構文として</td>
<td>データの構造を確認できるため、デバッグに有効である。</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/fmt/#Printf">https://golang.org/pkg/fmt/#Printf</a></li>
<li><a href="https://golang.org/pkg/fmt/#Fprintf">https://golang.org/pkg/fmt/#Fprintf</a></li>
<li><a href="https://golang.org/pkg/fmt/#Sprintf">https://golang.org/pkg/fmt/#Sprintf</a></li>
</ul>
</blockquote>
<p><strong>＊実装例＊</strong></p>
<p>渡された引数を文字列として結合する</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;String is %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>また、連続して使用しても、改行は挿入されない。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;String is %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;String is %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// String is Hello world!String is Hello world!</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>渡された引数をポインタとして結合する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Person</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Name</span><span class="w">     </span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">person</span><span class="o">:=</span><span class="w"> </span><span class="nb">new</span><span class="p">(</span><span class="nx">Person</span><span class="p">)</span>

<span class="w">    </span><span class="nx">person</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Pointer is %p&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">person</span><span class="p">)</span><span class="w"> </span><span class="c1">// 0xc0000821e0</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>＊実装例＊</strong></p>
<p>渡された複数の引数を文字列として結合する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">last</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hasegawa&quot;</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Im %s %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Im Hiroki Hasegawa</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="nethttp">net/http<a class="headerlink" href="#nethttp" title="Permanent link">&para;</a></h3>
<h4 id="http">▼ httpパッケージとは<a class="headerlink" href="#http" title="Permanent link">&para;</a></h4>
<p>HTTPクライアントまたはWebサーバを提供する。</p>
<p>そのため、GoではNginxやApacheが不要である。</p>
<p>ただし、Goによるwebサーバーは機能が不十分である、そのため、NginxやApacheをWebサーバとして、GoをAppサーバとして使用した方が良い。</p>
<blockquote>
<ul>
<li><a href="https://golang.org/pkg/net/http/#pkg-index">https://golang.org/pkg/net/http/#pkg-index</a></li>
<li><a href="https://stackoverflow.com/questions/17776584/what-are-the-benefits-of-using-nginx-in-front-of-a-webserver-for-go">https://stackoverflow.com/questions/17776584/what-are-the-benefits-of-using-nginx-in-front-of-a-webserver-for-go</a></li>
</ul>
</blockquote>
<h4 id="get">▼ <code>Get</code>メソッド<a class="headerlink" href="#get" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Get</span><span class="p">(</span><span class="s">&quot;https://example/api.com&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="post">▼ <code>Post</code>メソッド<a class="headerlink" href="#post" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="w">   </span><span class="kt">int</span><span class="w">    </span><span class="s">`json:&quot;id&quot;`</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="p">:</span><span class="w">   </span><span class="nx">id</span><span class="p">,</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">user</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>

<span class="w">    </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Post</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;http://foo-api.com&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// URL</span>
<span class="w">        </span><span class="s">&quot;application/json&quot;</span><span class="p">,</span><span class="w">        </span><span class="c1">// Content-Type</span>
<span class="w">        </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">),</span><span class="w"> </span><span class="c1">// メッセージボディ</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="newrequest">▼ <code>NewRequest</code>メソッド<a class="headerlink" href="#newrequest" title="Permanent link">&para;</a></h4>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="w">   </span><span class="kt">int</span><span class="w">    </span><span class="s">`json:&quot;id&quot;`</span>
<span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">User</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="p">:</span><span class="w">   </span><span class="nx">id</span><span class="p">,</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">user</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// リクエストを作成する。</span>
<span class="w">    </span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">NewRequest</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;POST&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1">// HTTPメソッド</span>
<span class="w">        </span><span class="s">&quot;https://example.api.com&quot;</span><span class="p">,</span><span class="w">      </span><span class="c1">// URL</span>
<span class="w">        </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">),</span><span class="w"> </span><span class="c1">// メッセージボディ</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="c1">// ヘッダーを作成する。</span>
<span class="w">    </span><span class="nx">request</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// Content-Type</span>

<span class="w">    </span><span class="c1">// クライアントを作成する。</span>
<span class="w">    </span><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">http</span><span class="p">.</span><span class="nx">Client</span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// リクエストを送信する。</span>
<span class="w">    </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">Do</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>

<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">StatusCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// レスポンスのボディを取得する。</span>
<span class="w">    </span><span class="c1">// 代わりに、httputil.DumpResponseを使用しても良い。</span>
<span class="w">    </span><span class="nx">body</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ioutil</span><span class="p">.</span><span class="nx">ReadAll</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>

<span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="listenandserve">▼ <code>ListenAndServe</code>メソッド<a class="headerlink" href="#listenandserve" title="Permanent link">&para;</a></h4>
<p>サーバを起動する。</p>
<p>第一引数にサーバーのURL、第二引数にServeMux関数 (マルチプレクサ関数) を渡す。</p>
<p>第二引数に<code>nil</code>を渡した場合、デフォルト引数として<code>http.DefaultServeMux</code>が渡される。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// 以下でも同じ。</span>
<span class="w">    </span><span class="c1">// http.ListenAndServe(&quot;:8080&quot;, http.DefaultServeMux)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="s">&quot;Error ListenAndServe : &quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="newservemux">▼ <code>NewServeMux</code>メソッド<a class="headerlink" href="#newservemux" title="Permanent link">&para;</a></h4>
<p>サーバーを起動する<code>ListenAndServe</code>メソッドに対して、自身で定義したServeMux関数を渡す場合、<code>NewServeMux</code>メソッドを使用する必要がある。</p>
<p>これの<code>HandleFunc</code>関数に対してルーティングと関数を定義する。</p>
<p><strong>＊実装例＊</strong></p>
<p>HTMLをレスポンスとして返信するサーバ (<code>http://127.0.0.1:8080</code>) を起動する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">myHandler</span><span class="p">(</span><span class="nx">writer</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// HTMLをレスポンスとして返信する。</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintf</span><span class="p">(</span><span class="nx">writer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">mux</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">NewServeMux</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// ルーティングと関数を設定する。</span>
<span class="w">    </span><span class="nx">mux</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myHandler</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// サーバを起動する。</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">mux</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="s">&quot;Error ListenAndServe : &quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>JSONをレスポンスとして返信するサーバ (<code>http://127.0.0.1:8080</code>) を起動する。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Id</span><span class="w">   </span><span class="kt">int</span><span class="w">    </span><span class="s">`json:&quot;id&quot;`</span>
<span class="w">    </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;name&quot;`</span>
<span class="p">}</span>

<span class="c1">// コンストラクタ</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">User</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Id</span><span class="p">:</span><span class="w">   </span><span class="nx">id</span><span class="p">,</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">myHandler</span><span class="p">(</span><span class="nx">writer</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">user</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewUser</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hiroki&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">byteJson</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// JSONをレスポンスとして返信する。</span>
<span class="w">    </span><span class="nx">writer</span><span class="p">.</span><span class="nx">Header</span><span class="p">().</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json; charset=utf-8&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">writer</span><span class="p">.</span><span class="nx">Write</span><span class="p">(</span><span class="nx">byteJson</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">mux</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">NewServeMux</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// ルーティングと関数を設定する。</span>
<span class="w">    </span><span class="nx">mux</span><span class="p">.</span><span class="nx">HandleFunc</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">myHandler</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// サーバを起動する。</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">mux</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="os">os<a class="headerlink" href="#os" title="Permanent link">&para;</a></h3>
<h4 id="open">▼ <code>Open</code>関数<a class="headerlink" href="#open" title="Permanent link">&para;</a></h4>
<p>ファイルをReadOnly状態にする。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;log&quot;</span>
<span class="w">    </span><span class="s">&quot;os&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">&quot;filename.txt&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;ERROR: %#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%#v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><br></p>
<h3 id="reflect">reflect<a class="headerlink" href="#reflect" title="Permanent link">&para;</a></h3>
<h4 id="typeofvalueof">▼ <code>TypeOf</code>メソッド、<code>ValueOf</code>メソッド<a class="headerlink" href="#typeofvalueof" title="Permanent link">&para;</a></h4>
<p>構造体からフィールド情報を取得する。</p>
<p>フィールドが複数ある場合は、要素番号の指定が必要になるため、事前に要素数を取得するようにしておく。</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;reflect&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">bar</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">baz</span><span class="w"> </span><span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">foo</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Foo</span><span class="p">{</span><span class="nx">bar</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;BAR&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">baz</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}</span>

<span class="w">    </span><span class="nx">fields</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">reflect</span><span class="p">.</span><span class="nx">TypeOf</span><span class="p">(</span><span class="o">*</span><span class="nx">foo</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">fields</span><span class="p">)</span>

<span class="w">    </span><span class="nx">values</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">reflect</span><span class="p">.</span><span class="nx">ValueOf</span><span class="p">(</span><span class="o">*</span><span class="nx">foo</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// 再帰的にフィールドと値を取得する</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">fields</span><span class="p">.</span><span class="nx">NumField</span><span class="p">();</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;===&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;===&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// フィールドを取得</span>
<span class="w">        </span><span class="nx">field</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">fields</span><span class="p">.</span><span class="nx">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// 値を取得</span>
<span class="w">        </span><span class="nx">value</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">Type</span><span class="p">)</span>

<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">=== 0 ===</span>
<span class="cm">bar</span>
<span class="cm">string</span>
<span class="cm">BAR</span>
<span class="cm">=== 1 ===</span>
<span class="cm">baz</span>
<span class="cm">int</span>
<span class="cm">1</span>
<span class="cm">*/</span>
</code></pre></div>
<p><br></p>
<h3 id="strings">strings<a class="headerlink" href="#strings" title="Permanent link">&para;</a></h3>
<h4 id="builder">▼ <code>Builder</code>関数<a class="headerlink" href="#builder" title="Permanent link">&para;</a></h4>
<p>渡された文字列を結合し、標準出力に出力する。</p>
<p><strong>＊実装例＊</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;strings&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">builder</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">Builder</span>

<span class="w">    </span><span class="nx">builder</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="s">&quot;Hello &quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">builder</span><span class="p">.</span><span class="nx">WriteString</span><span class="p">(</span><span class="s">&quot;world!&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">builder</span><span class="p">.</span><span class="nx">String</span><span class="p">())</span><span class="w"> </span><span class="c1">// Hello world!</span>
<span class="p">}</span>
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      最終更新日:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-08-28</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            ページトップへ戻る
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/hiroki-it" target="_blank" rel="noopener" title="GitHubアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/Hiroki__IT" target="_blank" rel="noopener" title="Twitterアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.prune", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>