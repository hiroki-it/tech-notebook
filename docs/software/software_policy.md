---
title: 【IT技術の知見】設計ポリシー＠ソフトウェア
description: 設計ポリシー＠ソフトウェアの知見を記録しています。
---
# ソフトウェア

## はじめに

本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。



> ℹ️ 参考：https://hiroki-it.github.io/tech-notebook-mkdocs/

<br>

## このページについて

このノートでは、ソフトウェアに共通するベストプラクティスを整理する。



<br>

## 01. アップグレード

### 作業方針

#### ▼ アップグレードの粒度

メジャーバージョンごとにアップグレードを検証する。



> ℹ️ 参考：https://speakerdeck.com/yoshiakiyamasaki/20181201-mysqlbaziyonatupufalseji-chu-zhi-shi?slide=33

#### ▼ 対応日時の決定

アップグレードの影響が大きい（例：ダウンタイムが発生する）場合、ステークホルダーと対応日時を調整する必要がある。また、対応日時が決まり次第、周知する必要がある。また、本番環境であればユーザーに事前に周知しておき、その時間以内でアップグレードを完了させる必要がある。

**＊例＊**

| 日付    | 時間                | 実行環境 | 補足                                                           |
|-------|---------------------|----------|----------------------------------------------------------------|
| m月/d日 | ```16:00 ~ 19:00``` | tes      |                                                                |
| m月/d日 | ```16:00 ~ 19:00``` | stg      |                                                                |
| m月/d日 | ```02:00 ~ 05:00``` | prd      | ユーザーが実行環境を利用中のため、利用者の少ない```03:00```から実施する必要がある。 |

#### ▼ アップグレード作業中の通信経路の閉塞

アップグレード時、アプリケーションでダウンタイムが必ず発生する場合、通信経路を閉塞する必要がある。閉塞方法として、アプリケーションの前段にロードバランサー（例：AWS ALB）を設置する。アップグレード作業中、ロードバランサーが全てのリクエストに対してメンテナンスページ（例：```503```ステータスの静的ファイル）を返却するように、アップグレード直前にロードバランサーの設定値を変更しておく。

<br>

### アップグレード影響の調査

#### ▼ 想定されるダウンタイム

テスト環境でダウンタイムを計測し、ダウンタイムを想定する。

過去の実績があり、推定できるのであれば、計測する必要はない。



#### ▼ 機能廃止があるかかどうか

ベンダーのリリースノートを確認し、どのような『機能追加』『バグ修正』『機能廃止』『非推奨機能』がマージされるかを調査する。

 機能廃止や非推奨機能があり、これをソフトウェアが使用している場合、ソフトウェアに影響が出る可能性がある。



#### ▼ アップグレードの依存パッケージがあるかどうか

アップグレード要件として、依存パッケージのインストールやアップグレードを必要とするかどうかを調査する。



#### ▼ アップグレード中やアップグレード後に起こる可能性がある既知の問題

アップグレード中やアップグレード後に起こる可能性のある既知の問題が、公式で報告されているかどうかを調査する。



<br>

### アップグレード結果

#### ▼ 想定外の結果

本番環境での対応で想定外の問題が起こった場合に、これを記載しておく。



#### ▼ ブラックボックステストの実施

アップグレード後に必要であればブラックボックステスト（例：ロードテスト、性能テスト、など）を実施する。

<br>
