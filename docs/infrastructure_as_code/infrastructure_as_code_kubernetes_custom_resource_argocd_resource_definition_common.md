---
title: 【IT技術の知見】共通部分＠リソース定義
description: 共通部分＠リソース定義の知見を記録しています。
---

# 共通部分＠リソース定義

## はじめに

本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。

> ↪️：https://hiroki-it.github.io/tech-notebook/

<br>

## 01. ArgoCDの`.metadata.labels`キー

### AppProject、Application、の場合

| キー         | 値の例                                   | 説明                                                                                                                                                                                                                                 |
| ------------ | ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `finalizers` | `resources-finalizer.argocd.argoproj.io` | Applicationのカスケード削除をデフォルトで有効化する。これを有効化していると、マニフェスト管理ツール (例：Helm) でApplicationを削除した場合も、カスケード削除が実行される。削除がスタックすることが多発するため、使用しない方が良い。 |

> ↪️：https://argo-cd.readthedocs.io/en/stable/user-guide/app_deletion/

<br>

### 任意のKubernetesリソースの場合

ArgoCDを使用している場合に、ArgoCDの情報をを設定する。

custom-controller (application-controller) が設定してくれるため、開発者が設定する必要はない。

| キー                          | 値の例            | 説明                                                                                                                                                            |
| ----------------------------- | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `argocd.argoproj.io/instance` | `foo-application` | ArgoCDのApplication名を設定する。もしKubernetesリソースに設定すれば親Applicationが自動的に紐付き、Applicationに設定さればApp-of-Appsでの親Applicationが紐づく。 |

<br>

### ArgoCDの使用するKubernetesリソースの場合

| キー                        | 値の例   | 説明                                                                                   |
| --------------------------- | -------- | -------------------------------------------------------------------------------------- |
| `app.kubernetes.io/part-of` | `argocd` | ArgoCDのコンポーネントが使用するKubernetesリソースを宣言するために、それらに設定する。 |

<br>
