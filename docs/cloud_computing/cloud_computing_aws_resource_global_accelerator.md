---
title: 【IT技術の知見】Global Accelerator＠AWSリソース
description: Global Accelerator＠AWSリソースの知見を記録しています。
---

# Global Accelerator＠AWSリソース

## はじめに

本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。

> - https://hiroki-it.github.io/tech-notebook/

<br>

## 01. Global Acceleratorとは

記入中...

<br>

## 02. セットアップ

### コンソール画面の場合

#### ▼ 基本的設定

| 設定項目           | 説明                                                               | 補足                                                                                                   |
| ------------------ | ------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------ |
| Accelerator タイプ | エンドポイントグループへのルーティング時のアルゴリズムを設定する。 | Standard：ユーザーに最も近いリージョンにあるエンドポイントグループに、リクエストがルーティングされる。 |
| IPアドレスプール   | Global Acceleratorに割り当てる静的IPアドレスを設定する。           |                                                                                                        |

#### ▼ リスナー

| 設定項目        | 説明                                                 | 補足                                                                                                                                                                                                                              |
| --------------- | ---------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ポート          | 宛先とするポート番号を設定する。                     |                                                                                                                                                                                                                                   |
| プロトコル      | ルーティング先のプロトコルを設定する。               |                                                                                                                                                                                                                                   |
| Client affinity | ユーザーごとにルーティング先を固定するかを設定する。 | ・None：複数のルーティング先があった場合、各ユーザーの毎リクエスト時のルーティング先は固定されなくなる。<br>・Source IP：複数のルーティング先があったとしても、各ユーザーの毎リクエスト時のルーティング先を固定できるようになる。 |

#### ▼ エンドポイントグループ

| 設定項目               | 説明                                                                    | 補足                                                                                               |
| ---------------------- | ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| エンドポイントグループ | 特定のリージョンに紐付くエンドポイントのグループを設定する。            | トラフィックダイヤルにて、各エンドポイントグループの重みを設定できる。                             |
| トラフィックダイヤル   | 複数のエンドポイントグループがある場合、それぞれの重み (%) を設定する。 | ・例えば、カナリアリリースのために、新アプリと旧アプリへのルーティングに重みを付ける場合に役立つ。 |
| ヘルスチェック         | ルーティング先に対するヘルスチェックを設定する。                        |                                                                                                    |

#### ▼ エンドポイント

| 設定項目                     | 説明                                                                                        | 補足                                                                |
| ---------------------------- | ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| エンドポイントタイプ         | ルーティング先のAWSリソースを設定する。                                                     | ALB、NLB、EC2、Elastic IPを選択できる。                             |
| 重み                         | 複数のエンドポイントがある場合、それぞれの重みを設定する。                                  | 各エンドポイントの重みの合計値を256とし、1～255で相対値を設定する。 |
| クライアントIPアドレスの保持 | `X-Forwarded-For`ヘッダーにクライアントIPアドレスを含めてルーティングするか否かを設定する。 |                                                                     |

<br>

### 素早いレスポンスの理由

![GlobalAccelerator](https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/GlobalAccelerator.png)

最初、クライアントPCからのリクエストはエッジロケーションで受信される。

プライベートネットワーク内のエッジロケーションを経由して、ルーティング先のリージョンまで届く。

パブリックネットワークを使用しないため、小さなレイテシーでトラフィックをルーティングできる。

![GlobalAccelerator導入後](https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/GlobalAccelerator導入後.png)

Global Acceleratorを使用しない場合、クライアントPCのリージョンから指定したリージョンに至るまで、いくつもパブリックネットワークを経由する必要があり、時間がかかってしまう。

![GlobalAccelerator導入前](https://raw.githubusercontent.com/hiroki-it/tech-notebook-images/master/images/GlobalAccelerator導入前.png)

以下のサイトで、Global Acceleratorを使用した場合としなかった場合のレスポンス速度を比較できる。

> - https://speedtest.globalaccelerator.aws/#/

<br>
