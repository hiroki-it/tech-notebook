---
title: 【IT技術の知見】設計ポリシー＠CircleCI
description: 設計ポリシー＠CircleCIの知見を記録しています。
---

# 設計ポリシー＠CircleCI

## はじめに

本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。

> ℹ️ 参考：https://hiroki-it.github.io/tech-notebook-mkdocs/about.html

<br>

## 01. CI/CDパイプライン自体の脆弱性対策

### CI/CDパイプライン自体の脆弱性対策とは

対象のソースコードの脆弱性ではなく、CI/CDパイプライン自体のそれに対処する。

### 認証/認可の実施

一時的な認証/認可サービス（例：AWS STS、GCP条件付きロールバインディング）を使用して、CircleCIに紐づく実行ユーザーを一時的に認証し、認可スコープを付与する。一時的な認証/認可としないと、認証情報が漏洩した場合、認証情報の所有者が常にデプロイできるようになってしまう。

| 方法                            | 説明                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| 恒久的なユーザーによる認証/認可 | 非推奨である。                                               |
| 一時的なユーザーによる認証/認可 | 推奨である。AWSの場合、AWS STSで一時的に認証されたIAMユーザー/SAMLユーザー/OIDCユーザーに、AssumeRoleで認可スコープを付与する。GCPの場合、IAMユーザーに、条件付きロールバインディングで認可スコープを付与する。 |

<br>

### 機密な変数やファイルの管理

CircleCIの実行環境に出力する変数やファイルは、```base64```形式や暗号化キーであらかじめエンコードしておき、使用時にデコードまたは復号化する。

<br>

## 02. 事後処理

### 通知

CIパイプラインとCDパイプライン上で実行しているステップの結果が通知されるようにする。

<br>



