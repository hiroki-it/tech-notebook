
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS：Amazon Web Serviceの知見を記録しています。">
      
      
        <meta name="author" content="Hiroki Hasegawa">
      
      
        <link rel="canonical" href="https://hiroki-it.github.io/tech-notebook-mkdocs/cloud_computing/cloud_computing_aws_2.html">
      
      <link rel="icon" href="../assets/images/logo_v2.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>【IT技術の知見】AWS：Amazon Web Service - 俺の技術ノート</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Japanese:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans Japanese";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-HPJGWKTH9W"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-HPJGWKTH9W",{page_path:e.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HPJGWKTH9W"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dark" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#awsamazon-web-servicee" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="https://hiroki-it.github.io/tech-notebook-mkdocs/" title="俺の技術ノート" class="md-header__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            俺の技術ノート
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              【IT技術の知見】AWS：Amazon Web Service
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="クリア" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../index.html" class="md-tabs__link">
      目次
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../about.html" class="md-tabs__link">
      当サイトについて
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../self_introduction.html" class="md-tabs__link">
      自己紹介
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../system/system.html" class="md-tabs__link">
        🌳 システム
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../software/software.html" class="md-tabs__link">
        🧬 ソフトウェア
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../testing/testing_whitebox.html" class="md-tabs__link">
        🧪 テスト
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../hardware/hardware.html" class="md-tabs__link">
        💻 ハードウェア
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../network/network.html" class="md-tabs__link">
        🌏 ネットワーク
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../security/security_cyber_attacks.html" class="md-tabs__link">
        🔐 セキュリティ
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="cloud_computing.html" class="md-tabs__link md-tabs__link--active">
        ⛅️ クラウドコンピューティング
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../virtualization/virtualization.html" class="md-tabs__link">
        📦 仮想化
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../infrastructure_as_code/infrastructure_as_code.html" class="md-tabs__link">
        ⚙️ Infrastructure as Code
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../devops/devops.html" class="md-tabs__link">
        ♾️ DevOps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../observability/observability.html" class="md-tabs__link">
        🔎 可観測性
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../software_development_methodology/software_development_methodology.html" class="md-tabs__link">
        👥 ソフトウェア開発手法論/SRE
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../statistic_analysis/statistic_analysis_r.html" class="md-tabs__link">
        📊 統計分析
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../presentation.html" class="md-tabs__link">
        📢 過去の技術系プレゼン
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://hiroki-it.github.io/tech-notebook-mkdocs/" title="俺の技術ノート" class="md-nav__button md-logo" aria-label="俺の技術ノート" data-md-component="logo">
      
  <img src="../assets/images/logo_v2.png" alt="logo">

    </a>
    俺の技術ノート
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hiroki-it/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHubアカウントはこちら
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        目次
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about.html" class="md-nav__link">
        当サイトについて
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../self_introduction.html" class="md-nav__link">
        自己紹介
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          🌳 システム
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🌳 システム" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          🌳 システム
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../system/system.html" class="md-nav__link">
        システム
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          🧬 ソフトウェア
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🧬 ソフトウェア" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          🧬 ソフトウェア
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software.html" class="md-nav__link">
        ソフトウェア
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          ■ 基本ソフトウェア（OS）
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 基本ソフトウェア（OS）" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          ■ 基本ソフトウェア（OS）
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2_1" type="checkbox" id="__nav_5_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_1">
          ■ カーネル
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ カーネル" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ カーネル
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_kernel.html" class="md-nav__link">
        カーネル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_kernel_memory_management.html" class="md-nav__link">
        メモリ管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_kernel_file_share_system.html" class="md-nav__link">
        ファイル共有システム
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2_2" type="checkbox" id="__nav_5_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_2">
          ■ ユーティリティ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ユーティリティ" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ ユーティリティ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_utility.html" class="md-nav__link">
        ユーティリティ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_utility_package.html" class="md-nav__link">
        パッケージ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_utility_package_management.html" class="md-nav__link">
        パッケージ管理ユーティリティ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_utility_shell.html" class="md-nav__link">
        シェル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_utility_script.html" class="md-nav__link">
        スクリプト
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2_3" type="checkbox" id="__nav_5_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2_3">
          ■ 言語プロセッサ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 言語プロセッサ" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_3">
          <span class="md-nav__icon md-icon"></span>
          ■ 言語プロセッサ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_language_processor.html" class="md-nav__link">
        言語プロセッサ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_basic_language_processor_machine_language_and_radix.html" class="md-nav__link">
        機械語と進数
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          ■ ミドルウェア
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ミドルウェア" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          ■ ミドルウェア
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_linux.html" class="md-nav__link">
        Linux系
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_2" type="checkbox" id="__nav_5_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_2">
          ■ Web系
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Web系" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Web系
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_2_1" type="checkbox" id="__nav_5_3_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_2_1">
          ■ Nginx
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Nginx" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Nginx
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_web_nginx_conf.html" class="md-nav__link">
        nginx.conf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_web_nginx_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_2_2" type="checkbox" id="__nav_5_3_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_2_2">
          ■ Apache
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Apache" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Apache
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_web_apache_conf.html" class="md-nav__link">
        apache.conf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_web_apache_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_3" type="checkbox" id="__nav_5_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_3">
          ■ アプリケーション系
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ アプリケーション系" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_3_3">
          <span class="md-nav__icon md-icon"></span>
          ■ アプリケーション系
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_application_gi.html" class="md-nav__link">
        GI
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_3_2" type="checkbox" id="__nav_5_3_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_3_2">
          ■ FastCGI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ FastCGI" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ FastCGI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_application_gi_fastcgi_php_fpm.html" class="md-nav__link">
        PHP-FPM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_3_3" type="checkbox" id="__nav_5_3_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_3_3">
          ■ WSGI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ WSGI" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_3_3">
          <span class="md-nav__icon md-icon"></span>
          ■ WSGI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_application_gi_wsgi_uwsgi.html" class="md-nav__link">
        uWSGI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_3_4" type="checkbox" id="__nav_5_3_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_3_4">
          ■ ASGI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ASGI" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_3_4">
          <span class="md-nav__icon md-icon"></span>
          ■ ASGI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_application_gi_asgi_uvicorn.html" class="md-nav__link">
        Uvicorn
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_4" type="checkbox" id="__nav_5_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_4">
          ■ データベース系
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ データベース系" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_3_4">
          <span class="md-nav__icon md-icon"></span>
          ■ データベース系
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_4_1" type="checkbox" id="__nav_5_3_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_4_1">
          ■ RDBMS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ RDBMS" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_4_1">
          <span class="md-nav__icon md-icon"></span>
          ■ RDBMS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_database_rdbms.html" class="md-nav__link">
        RDBMS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_database_rdbms_acid.html" class="md-nav__link">
        ACID
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_4_1_3" type="checkbox" id="__nav_5_3_4_1_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_4_1_3">
          ■ My︎SQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ My︎SQL" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_3_4_1_3">
          <span class="md-nav__icon md-icon"></span>
          ■ My︎SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_database_rdbms_mysql.html" class="md-nav__link">
        MySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_database_rdbms_mysql_query.html" class="md-nav__link">
        クエリロジック
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_5" type="checkbox" id="__nav_5_3_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_5">
          ■ サービスメッシュ系
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ サービスメッシュ系" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_3_5">
          <span class="md-nav__icon md-icon"></span>
          ■ サービスメッシュ系
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3_5_1" type="checkbox" id="__nav_5_3_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3_5_1">
          ■ Envoy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Envoy" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Envoy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_middleware_service_mesh_envoy_envoy_yaml.html" class="md-nav__link">
        envoy.yaml
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          ■ アプリケーションソフトウェア
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ アプリケーションソフトウェア" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          ■ アプリケーションソフトウェア
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_1" type="checkbox" id="__nav_5_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_1">
          ■ アーキテクチャ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ アーキテクチャ" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_1">
          <span class="md-nav__icon md-icon"></span>
          ■ アーキテクチャ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_analysis_and_design.html" class="md-nav__link">
        オブジェクト指向分析設計
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_1_2" type="checkbox" id="__nav_5_4_1_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_1_2">
          ■ バックエンド
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ バックエンド" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_1_2">
          <span class="md-nav__icon md-icon"></span>
          ■ バックエンド
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_backend_microservices.html" class="md-nav__link">
        マイクロサービスアーキテクチャ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_backend_domain_driven_design.html" class="md-nav__link">
        ドメイン駆動設計
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_backend_domain_driven_design_clean_architecture.html" class="md-nav__link">
        クリーンアーキテクチャ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_backend_cqrs.html" class="md-nav__link">
        CQRS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_1_3" type="checkbox" id="__nav_5_4_1_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_1_3">
          ■ フロントエンド
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ フロントエンド" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_1_3">
          <span class="md-nav__icon md-icon"></span>
          ■ フロントエンド
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_architecture_frontend.html" class="md-nav__link">
        フロントエンドアーキテクチャ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_2" type="checkbox" id="__nav_5_4_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2">
          ■ アプリケーション間連携
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ アプリケーション間連携" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_2">
          <span class="md-nav__icon md-icon"></span>
          ■ アプリケーション間連携
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_collaboration_communication.html" class="md-nav__link">
        アプリケーション間通信
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_2_2" type="checkbox" id="__nav_5_4_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_2_2">
          ■ RESTful-API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ RESTful-API" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ RESTful-API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_collaboration_api_restful.html" class="md-nav__link">
        RESTful-API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_collaboration_api_restful_api_specification.html" class="md-nav__link">
        API仕様書
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_collaboration_grpc.html" class="md-nav__link">
        gRPC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3" type="checkbox" id="__nav_5_4_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3">
          ■ 言語
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 言語" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_3">
          <span class="md-nav__icon md-icon"></span>
          ■ 言語
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_type.html" class="md-nav__link">
        言語の種類
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_process_mode.html" class="md-nav__link">
        言語別の処理方式
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_3" type="checkbox" id="__nav_5_4_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_3">
          ■ データ記述言語
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ データ記述言語" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_3_3">
          <span class="md-nav__icon md-icon"></span>
          ■ データ記述言語
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_data_description_language.html" class="md-nav__link">
        データ記述言語
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_3_2" type="checkbox" id="__nav_5_4_3_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_3_2">
          ■ クエリロジック
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ クエリロジック" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ クエリロジック
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_data_description_language_query_json.html" class="md-nav__link">
        JSONクエリ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4" type="checkbox" id="__nav_5_4_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4">
          ■ PHP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ PHP" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_3_4">
          <span class="md-nav__icon md-icon"></span>
          ■ PHP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php.html" class="md-nav__link">
        PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_3" type="checkbox" id="__nav_5_4_3_4_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_3">
          ■ クラスベース
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ クラスベース" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_4_3">
          <span class="md-nav__icon md-icon"></span>
          ■ クラスベース
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_class_based.html" class="md-nav__link">
        クラス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_class_based_method_data.html" class="md-nav__link">
        メソッド/データ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_class_based_data_structure.html" class="md-nav__link">
        データ構造
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_4" type="checkbox" id="__nav_5_4_3_4_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_4">
          ■ ロジック
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ロジック" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_4_4">
          <span class="md-nav__icon md-icon"></span>
          ■ ロジック
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_logic_validation.html" class="md-nav__link">
        検証ロジック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_logic_error_and_error_handling.html" class="md-nav__link">
        エラーとエラーハンドリング
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_logic_iteration.html" class="md-nav__link">
        反復ロジック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_logic_algorithm.html" class="md-nav__link">
        アルゴリズム
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_logic_debug.html" class="md-nav__link">
        デバッグ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_5" type="checkbox" id="__nav_5_4_3_4_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_5">
          ■ フレームワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ フレームワーク" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_4_5">
          <span class="md-nav__icon md-icon"></span>
          ■ フレームワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_5_1" type="checkbox" id="__nav_5_4_3_4_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_5_1">
          ■ Laravel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Laravel" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_3_4_5_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Laravel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_laravel_component.html" class="md-nav__link">
        コンポーネント
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_laravel_eloquent_orm.html" class="md-nav__link">
        ︎Eloquent ORM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_laravel_package.html" class="md-nav__link">
        専用パッケージ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_laravel_package_auth.html" class="md-nav__link">
        認証/認可系パッケージ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_laravel_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_5_2" type="checkbox" id="__nav_5_4_3_4_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_5_2">
          ■ Symfony
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Symfony" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_3_4_5_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Symfony
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_symfony_component.html" class="md-nav__link">
        コンポーネント
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_framework_symfony_doctrine_orm.html" class="md-nav__link">
        Doctrine ORM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_4_6" type="checkbox" id="__nav_5_4_3_4_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_4_6">
          ■ パッケージ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ パッケージ" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_4_6">
          <span class="md-nav__icon md-icon"></span>
          ■ パッケージ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_package_management.html" class="md-nav__link">
        パッケージ管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_package_sql.html" class="md-nav__link">
        SQLパッケージ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_php_package_others.html" class="md-nav__link">
        その他パッケージ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5" type="checkbox" id="__nav_5_4_3_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5">
          ■ JavaScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ JavaScript" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_3_5">
          <span class="md-nav__icon md-icon"></span>
          ■ JavaScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5_1" type="checkbox" id="__nav_5_4_3_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5_1">
          ■ プロトタイプベース
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ プロトタイプベース" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          ■ プロトタイプベース
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_prototype_based.html" class="md-nav__link">
        プロトタイプ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_prototype_based_method_data.html" class="md-nav__link">
        メソッド/データ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5_2" type="checkbox" id="__nav_5_4_3_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5_2">
          ■ ロジック
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ロジック" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_5_2">
          <span class="md-nav__icon md-icon"></span>
          ■ ロジック
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_logic_validation.html" class="md-nav__link">
        検証ロジック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_logic_asynchronous_process.html" class="md-nav__link">
        非同期処理ロジック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_logic_debug.html" class="md-nav__link">
        デバッグ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5_3" type="checkbox" id="__nav_5_4_3_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5_3">
          ■ フレームワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ フレームワーク" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_5_3">
          <span class="md-nav__icon md-icon"></span>
          ■ フレームワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_framework_vuejs.html" class="md-nav__link">
        Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_framework_nuxtjs.html" class="md-nav__link">
        Nuxt.js
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5_4" type="checkbox" id="__nav_5_4_3_5_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5_4">
          ■ パッケージ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ パッケージ" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_5_4">
          <span class="md-nav__icon md-icon"></span>
          ■ パッケージ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_package_management.html" class="md-nav__link">
        パッケージ管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_5_5" type="checkbox" id="__nav_5_4_3_5_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_5_5">
          ■ ブラウザ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ブラウザ" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_5_5">
          <span class="md-nav__icon md-icon"></span>
          ■ ブラウザ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_js_browser_rendering.html" class="md-nav__link">
        ブラウザレンダリング
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_6" type="checkbox" id="__nav_5_4_3_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_6">
          ■ Go
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Go" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_3_6">
          <span class="md-nav__icon md-icon"></span>
          ■ Go
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_go.html" class="md-nav__link">
        Go
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_go_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_6_3" type="checkbox" id="__nav_5_4_3_6_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_6_3">
          ■ ロジック
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ロジック" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_6_3">
          <span class="md-nav__icon md-icon"></span>
          ■ ロジック
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_go_logic_method_data.html" class="md-nav__link">
        メソッド/データ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_6_4" type="checkbox" id="__nav_5_4_3_6_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_6_4">
          ■ フレームワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ フレームワーク" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_6_4">
          <span class="md-nav__icon md-icon"></span>
          ■ フレームワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_go_framework_gin.html" class="md-nav__link">
        Gin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_6_5" type="checkbox" id="__nav_5_4_3_6_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_6_5">
          ■ パッケージ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ パッケージ" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_6_5">
          <span class="md-nav__icon md-icon"></span>
          ■ パッケージ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_go_package.html" class="md-nav__link">
        パッケージ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_7" type="checkbox" id="__nav_5_4_3_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_7">
          ■ Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Python" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_4_3_7">
          <span class="md-nav__icon md-icon"></span>
          ■ Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_7_2" type="checkbox" id="__nav_5_4_3_7_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_7_2">
          ■ フレームワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ フレームワーク" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_7_2">
          <span class="md-nav__icon md-icon"></span>
          ■ フレームワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_7_2_1" type="checkbox" id="__nav_5_4_3_7_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_7_2_1">
          ■ Flask
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Flask" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_4_3_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Flask
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_python_framework_flask_component.html" class="md-nav__link">
        コンポーネント
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_python_framework_flask_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4_3_7_3" type="checkbox" id="__nav_5_4_3_7_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4_3_7_3">
          ■ パッケージ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ パッケージ" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_4_3_7_3">
          <span class="md-nav__icon md-icon"></span>
          ■ パッケージ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/software_application_language_python_package_management.html" class="md-nav__link">
        パッケージ管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          🧪 テスト
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🧪 テスト" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          🧪 テスト
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          ■ ホワイトボックステスト
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ホワイトボックステスト" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          ■ ホワイトボックステスト
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_whitebox.html" class="md-nav__link">
        ホワイトボックステスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_whitebox_php.html" class="md-nav__link">
        PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_whitebox_go.html" class="md-nav__link">
        Go
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          ■ ブラックボックステスト
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ブラックボックステスト" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          ■ ブラックボックステスト
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_blackbox.html" class="md-nav__link">
        ブラックボックステスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_2_2" type="checkbox" id="__nav_6_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2_2">
          ■ システムテスト
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ システムテスト" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ システムテスト
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_blackbox_system_test.html" class="md-nav__link">
        システムテスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/testing_blackbox_system_test_jmeter.html" class="md-nav__link">
        JMeter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          💻 ハードウェア
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="💻 ハードウェア" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          💻 ハードウェア
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware.html" class="md-nav__link">
        ハードウェア
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/hardware_embedded_system.html" class="md-nav__link">
        組み込み機器
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          🌏 ネットワーク
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🌏 ネットワーク" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          🌏 ネットワーク
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/network.html" class="md-nav__link">
        ネットワーク
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/network_model_tcp.html" class="md-nav__link">
        TCP階層モデル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/network_model_osi.html" class="md-nav__link">
        OSI参照モデル
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          🔐 セキュリティ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🔐 セキュリティ" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          🔐 セキュリティ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/security_cyber_attacks.html" class="md-nav__link">
        サイバー攻撃
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/security_encryption_technology.html" class="md-nav__link">
        通信データの暗号化技術
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/security_authentication_authorization.html" class="md-nav__link">
        認証/認可
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          ⛅️ クラウドコンピューティング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="⛅️ クラウドコンピューティング" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          ⛅️ クラウドコンピューティング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing.html" class="md-nav__link">
        クラウドコンピューティング
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          ■ AWS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ AWS" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          ■ AWS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws.html" class="md-nav__link">
        目次
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_1.html" class="md-nav__link">
        A〜D
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          E
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="cloud_computing_aws_2.html" class="md-nav__link md-nav__link--active">
        E
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-ec2elastic-computer-cloud" class="md-nav__link">
    01. EC2：Elastic Computer Cloud
  </a>
  
    <nav class="md-nav" aria-label="01. EC2：Elastic Computer Cloud">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2" class="md-nav__link">
    EC2とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="ダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ ダウンタイムの発生条件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    インスタンスタイプ
  </a>
  
    <nav class="md-nav" aria-label="インスタンスタイプ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ▼ 世代と大きさ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    ▼ CPUバーストモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ルートデバイスボリューム
  </a>
  
    <nav class="md-nav" aria-label="ルートデバイスボリューム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ ルートデバイスボリュームとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs" class="md-nav__link">
    ▼ EBSボリューム
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ インスタンスストアボリューム
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    キーペア
  </a>
  
    <nav class="md-nav" aria-label="キーペア">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ▼ フィンガープリント値
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_1" class="md-nav__link">
    EC2インスタンスへの接続
  </a>
  
    <nav class="md-nav" aria-label="EC2インスタンスへの接続">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    ▼ キーペアを使用したSSH接続
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-manager" class="md-nav__link">
    ▼ Session Managerを使用したログインシェル起動
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-02-ec2-based-on-amiamazon-machine-image" class="md-nav__link">
    01-02. EC2 based on AMI：Amazon Machine Image
  </a>
  
    <nav class="md-nav" aria-label="01-02. EC2 based on AMI：Amazon Machine Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ami" class="md-nav__link">
    AMIとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ami_1" class="md-nav__link">
    AMIタイプ
  </a>
  
    <nav class="md-nav" aria-label="AMIタイプ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs-backed-ami" class="md-nav__link">
    ▼ EBS-backed AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-store-backed-ami" class="md-nav__link">
    ▼ instance store-backed AMI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ami-os" class="md-nav__link">
    AMI OS
  </a>
  
    <nav class="md-nav" aria-label="AMI OS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amazon-linux" class="md-nav__link">
    ▼ Amazon Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centos" class="md-nav__link">
    ▼ CentOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-03-ec2-with-ebselastic-block-storage" class="md-nav__link">
    01-03. EC2 with EBS：Elastic Block Storage
  </a>
  
    <nav class="md-nav" aria-label="01-03. EC2 with EBS：Elastic Block Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_1" class="md-nav__link">
    EBSとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs_2" class="md-nav__link">
    EBSボリュームタイプとサイズ
  </a>
  
    <nav class="md-nav" aria-label="EBSボリュームタイプとサイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_3" class="md-nav__link">
    ▼ EBSボリュームの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 下限のサイズ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ サイズの拡張
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ext4" class="md-nav__link">
    ▼ ext4タイプの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xsf" class="md-nav__link">
    ▼ xsfタイプの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs_4" class="md-nav__link">
    EBSボリュームの永続化
  </a>
  
    <nav class="md-nav" aria-label="EBSボリュームの永続化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_5" class="md-nav__link">
    ▼ EBSボリュームの永続化とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_2" class="md-nav__link">
    ▼ EC2インスタンスの作成後に永続化する
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ▼ 注意点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    スナップショット
  </a>
  
    <nav class="md-nav" aria-label="スナップショット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    ▼ スナップショットとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-ecr" class="md-nav__link">
    02. ECR
  </a>
  
    <nav class="md-nav" aria-label="02. ECR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecr" class="md-nav__link">
    ECRとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    イメージのプッシュ
  </a>
  
    <nav class="md-nav" aria-label="イメージのプッシュ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    ▼ コンテナイメージの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    ▼ helmチャートの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    ライフサイクル
  </a>
  
    <nav class="md-nav" aria-label="ライフサイクル">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    ▼ ライフサイクルポリシー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    バージョンタグ
  </a>
  
    <nav class="md-nav" aria-label="バージョンタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    ▼ タグ名のベストプラクティス
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-ecsekselastic-containerkubernetes-service" class="md-nav__link">
    03. ECS、EKS：Elastic Container/Kubernetes Service
  </a>
  
    <nav class="md-nav" aria-label="03. ECS、EKS：Elastic Container/Kubernetes Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    コントロールプレーンとデータプレーンの対応関係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    コントロールプレーン
  </a>
  
    <nav class="md-nav" aria-label="コントロールプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    ▼ コントロールプレーンとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs" class="md-nav__link">
    ▼ ECSの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks" class="md-nav__link">
    ▼ EKSの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    データプレーン
  </a>
  
    <nav class="md-nav" aria-label="データプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    ▼ データプレーンとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_3" class="md-nav__link">
    ▼ EC2の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate" class="md-nav__link">
    ▼ Fargateの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-ecs" class="md-nav__link">
    03-02. ECSデータプレーン
  </a>
  
    <nav class="md-nav" aria-label="03-02. ECSデータプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_1" class="md-nav__link">
    ECSクラスター
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_2" class="md-nav__link">
    ECSサービス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_3" class="md-nav__link">
    ECSタスク
  </a>
  
    <nav class="md-nav" aria-label="ECSタスク">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_4" class="md-nav__link">
    ▼ ECSタスク
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_5" class="md-nav__link">
    ▼ ECSコンテナエージェント
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_6" class="md-nav__link">
    ▼ ECSタスク定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_7" class="md-nav__link">
    ▼ ECSタスクのライフサイクル
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    ロール
  </a>
  
    <nav class="md-nav" aria-label="ロール">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    ▼ サービスロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    ▼ コンテナインスタンスロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    ▼ タスクロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    ▼ タスク実行ロール
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    ネットワークモードとコンテナ間通信
  </a>
  
    <nav class="md-nav" aria-label="ネットワークモードとコンテナ間通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#none" class="md-nav__link">
    ▼ noneモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#host" class="md-nav__link">
    ▼ hostモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge" class="md-nav__link">
    ▼ bridgeモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsvpc" class="md-nav__link">
    ▼ awsvpcモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_8" class="md-nav__link">
    マルチECSサービス
  </a>
  
    <nav class="md-nav" aria-label="マルチECSサービス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_9" class="md-nav__link">
    ▼ マルチECSサービスとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_10" class="md-nav__link">
    ▼ ECSサービスディスカバリー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    プライベートサブネット内からのアウトバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内からのアウトバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    ▼ プライベートサブネット内へのデータプレーンの配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    ▼ パブリックネットワークに対する通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpcaws" class="md-nav__link">
    ▼ VPC外のAWSリソースに対する通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    ログ転送
  </a>
  
    <nav class="md-nav" aria-label="ログ転送">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awslogs" class="md-nav__link">
    ▼ awslogsドライバー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firelens" class="md-nav__link">
    ▼ FireLensコンテナ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-02-on-ec2" class="md-nav__link">
    03-02-02. on EC2
  </a>
  
    <nav class="md-nav" aria-label="03-02-02. on EC2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2ami" class="md-nav__link">
    EC2インスタンスのAMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    タスク配置戦略
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-03-on-fargate" class="md-nav__link">
    03-02-03. on Fargate
  </a>
  
    <nav class="md-nav" aria-label="03-02-03. on Fargate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_11" class="md-nav__link">
    ▼ ECSサービス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_12" class="md-nav__link">
    ▼ ECSタスク定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    ▼ コンテナ定義
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    IPアドレス
  </a>
  
    <nav class="md-nav" aria-label="IPアドレス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecsip" class="md-nav__link">
    ▼ ECSタスクのIPアドレス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargateip" class="md-nav__link">
    ▼ FargateのIPアドレス
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_13" class="md-nav__link">
    ECSタスクの一時起動
  </a>
  
    <nav class="md-nav" aria-label="ECSタスクの一時起動">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    ▼ マイグレーション
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_14" class="md-nav__link">
    ECSタスクのデプロイ手法
  </a>
  
    <nav class="md-nav" aria-label="ECSタスクのデプロイ手法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    ▼ ローリングアップデート
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    ▼ ブルー/グリーンデプロイメント
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargatevpcaws" class="md-nav__link">
    プライベートサブネット内のFargateからVPC外のAWSリソースへのアクセス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate_1" class="md-nav__link">
    Fargate上のコンテナへの接続
  </a>
  
    <nav class="md-nav" aria-label="Fargate上のコンテナへの接続">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session-managerecs-exec" class="md-nav__link">
    ▼ Session Managerを使用したECS Exec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-eks" class="md-nav__link">
    03-03. EKSデータプレーン
  </a>
  
    <nav class="md-nav" aria-label="03-03. EKSデータプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks-cluster" class="md-nav__link">
    ▼ EKS Cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc" class="md-nav__link">
    ▼ VPC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks_1" class="md-nav__link">
    EKSの仕組み
  </a>
  
    <nav class="md-nav" aria-label="EKSの仕組み">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ekskubernetes" class="md-nav__link">
    ▼ EKSとKubernetesの対応
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks-cluster_1" class="md-nav__link">
    EKS Cluster
  </a>
  
    <nav class="md-nav" aria-label="EKS Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks-cluster_2" class="md-nav__link">
    ▼ EKS Clusterとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc_1" class="md-nav__link">
    プライベートサブネット内のデータプレーンへのVPC外からのインバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内のデータプレーンへのVPC外からのインバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod" class="md-nav__link">
    ▼ Podへのインバウンド通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    ▼ コントロールプレーンへのインバウンド通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    プライベートサブネット内のデータプレーンからのアウトバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内のデータプレーンからのアウトバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vpcaws_1" class="md-nav__link">
    ▼ VPC外の他のAWSリソースへのアウトバウンド通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc_2" class="md-nav__link">
    ▼ VPC外のコントロールプレーンへのアウトバウンド通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    マルチNode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-lb-controller" class="md-nav__link">
    AWS LB Controller
  </a>
  
    <nav class="md-nav" aria-label="AWS LB Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingressalb" class="md-nav__link">
    ▼ IngressとALBの紐付け
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    デバッグ
  </a>
  
    <nav class="md-nav" aria-label="デバッグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    ▼ ダッシュボード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-02-on-fargate" class="md-nav__link">
    03-03-02. on Fargate
  </a>
  
    <nav class="md-nav" aria-label="03-03-02. on Fargate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    ▼ 制約
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    ▼ メトリクス収集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    ▼ ログルーティング
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate-node" class="md-nav__link">
    Fargate Node
  </a>
  
    <nav class="md-nav" aria-label="Fargate Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fargate-node_1" class="md-nav__link">
    ▼ Fargate Nodeとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate_2" class="md-nav__link">
    ▼ Fargateプロファイル
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-03-on-ec2" class="md-nav__link">
    03-03-03. on EC2
  </a>
  
    <nav class="md-nav" aria-label="03-03-03. on EC2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2-node" class="md-nav__link">
    EC2 Node
  </a>
  
    <nav class="md-nav" aria-label="EC2 Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2-node_1" class="md-nav__link">
    ▼ EC2 Nodeとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-efselastic-file-system" class="md-nav__link">
    04. EFS：Elastic File System
  </a>
  
    <nav class="md-nav" aria-label="04. EFS：Elastic File System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#efs" class="md-nav__link">
    EFSとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    スペック
  </a>
  
    <nav class="md-nav" aria-label="スペック">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    ▼ バーストモードの仕組み
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    ▼ プロビジョニングモードの仕組み
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    コマンド
  </a>
  
    <nav class="md-nav" aria-label="コマンド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    ▼ マウント
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-elasticache" class="md-nav__link">
    05. ElastiCache
  </a>
  
    <nav class="md-nav" aria-label="05. ElastiCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elasticcache" class="md-nav__link">
    ElasticCacheとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-02-elasticache-for-redis" class="md-nav__link">
    05-02. ElastiCache for Redis
  </a>
  
    <nav class="md-nav" aria-label="05-02. ElastiCache for Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    Redisクラスター
  </a>
  
    <nav class="md-nav" aria-label="Redisクラスター">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_1" class="md-nav__link">
    ▼ Redisクラスターとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    ▼ クラスターモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_2" class="md-nav__link">
    Redisシャード
  </a>
  
    <nav class="md-nav" aria-label="Redisシャード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_3" class="md-nav__link">
    ▼ Redisシャードとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_4" class="md-nav__link">
    Redisノード
  </a>
  
    <nav class="md-nav" aria-label="Redisノード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_5" class="md-nav__link">
    ▼ Redisノードとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    セッション管理機能
  </a>
  
    <nav class="md-nav" aria-label="セッション管理機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    ▼ セッション管理機能とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    クエリキャッシュ管理機能
  </a>
  
    <nav class="md-nav" aria-label="クエリキャッシュ管理機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    ▼ クエリキャッシュ管理機能とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    ▼ クエリキャッシュの操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    障害対策
  </a>
  
    <nav class="md-nav" aria-label="障害対策">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    ▼ フェイルオーバー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_6" class="md-nav__link">
    Redisクラスターのダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="Redisクラスターのダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    ▼ ダウンタイムの発生条件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    計画的なダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="計画的なダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    ▼ 計画的なダウンタイムとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    ▼ バックアップとインポートによるダウンタイムの最小化
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-eventbridgecloudwatch" class="md-nav__link">
    05. EventBridge（CloudWatchイベント）
  </a>
  
    <nav class="md-nav" aria-label="05. EventBridge（CloudWatchイベント）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eventbridgecloudwatch" class="md-nav__link">
    EventBridge（CloudWatchイベント）とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    パターン
  </a>
  
    <nav class="md-nav" aria-label="パターン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    ▼ イベントパターン
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    ▼ スケジュール
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    ターゲット
  </a>
  
    <nav class="md-nav" aria-label="ターゲット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    ▼ ターゲットの一覧
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    ▼ デバッグ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    入力
  </a>
  
    <nav class="md-nav" aria-label="入力">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    ▼ 入力トランスフォーマー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_3.html" class="md-nav__link">
        F〜K
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_4.html" class="md-nav__link">
        L〜R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_5.html" class="md-nav__link">
        S〜U
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_6.html" class="md-nav__link">
        V〜Z
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_10_2_8" type="checkbox" id="__nav_10_2_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_8">
          ■ その他
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ その他" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_8">
          <span class="md-nav__icon md-icon"></span>
          ■ その他
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_cli.html" class="md-nav__link">
        AWS CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_api_gateway_import.html" class="md-nav__link">
        API Gatewayへのymlインポート
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_lambda_function.html" class="md-nav__link">
        Lambda関数の実装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_aws_cost_management.html" class="md-nav__link">
        コスト管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10_3">
          ■ GCP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ GCP" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          ■ GCP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud_computing_gcp_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          📦 仮想化
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="📦 仮想化" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          📦 仮想化
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization.html" class="md-nav__link">
        仮想化
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          ■ コンテナ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ コンテナ" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          ■ コンテナ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization_container_docker.html" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_11_3" type="checkbox" id="__nav_11_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          ■ コンテナオーケストレーション
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ コンテナオーケストレーション" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          ■ コンテナオーケストレーション
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization_container_orchestration.html" class="md-nav__link">
        コンテナオーケストレーション
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_11_3_2" type="checkbox" id="__nav_11_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3_2">
          ■ Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Kubernetes" data-md-level="3">
        <label class="md-nav__title" for="__nav_11_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization_container_orchestration_kubernetes.html" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization_container_orchestration_kubernetes_istio.html" class="md-nav__link">
        Istio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../virtualization/virtualization_container_orchestration_kubernetes_minikube.html" class="md-nav__link">
        Minikube
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          ⚙️ Infrastructure as Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="⚙️ Infrastructure as Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          ⚙️ Infrastructure as Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code.html" class="md-nav__link">
        Infrastructure as Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_2" type="checkbox" id="__nav_12_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2">
          ■ 手続き型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 手続き型" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_2">
          <span class="md-nav__icon md-icon"></span>
          ■ 手続き型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_2_1" type="checkbox" id="__nav_12_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2_1">
          ■ サーバープロビジョニング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ サーバープロビジョニング" data-md-level="3">
        <label class="md-nav__title" for="__nav_12_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ サーバープロビジョニング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_2_1_1" type="checkbox" id="__nav_12_2_1_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2_1_1">
          ■ Ansible
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Ansible" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Ansible
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_server_ansible_conf.html" class="md-nav__link">
        設定ファイル
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_2_2" type="checkbox" id="__nav_12_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2_2">
          ■ コンテナプロビジョニング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ コンテナプロビジョニング" data-md-level="3">
        <label class="md-nav__title" for="__nav_12_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ コンテナプロビジョニング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_2_2_1" type="checkbox" id="__nav_12_2_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2_2_1">
          ■ Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Docker" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_docker_dockerfile.html" class="md-nav__link">
        Dockerfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_docker_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_docker_policy.html" class="md-nav__link">
        設計ポリシー
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3" type="checkbox" id="__nav_12_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3">
          ■ 宣言型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 宣言型" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          ■ 宣言型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_1" type="checkbox" id="__nav_12_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_1">
          ■ サーバープロビジョニング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ サーバープロビジョニング" data-md-level="3">
        <label class="md-nav__title" for="__nav_12_3_1">
          <span class="md-nav__icon md-icon"></span>
          ■ サーバープロビジョニング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_1_1" type="checkbox" id="__nav_12_3_1_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_1_1">
          ■ Vagrant
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Vagrant" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Vagrant
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_server_vagrant_vagrantfile.html" class="md-nav__link">
        Vagrantfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_server_vagrant_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_1_2" type="checkbox" id="__nav_12_3_1_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_1_2">
          ■ Packer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Packer" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Packer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_server_packer_template_json.html" class="md-nav__link">
        template.json
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2" type="checkbox" id="__nav_12_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2">
          ■ コンテナプロビジョニング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ コンテナプロビジョニング" data-md-level="3">
        <label class="md-nav__title" for="__nav_12_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ コンテナプロビジョニング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_1" type="checkbox" id="__nav_12_3_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_1">
          ■ Docker Compose
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Docker Compose" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_2_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Docker Compose
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_docker_compose_yml.html" class="md-nav__link">
        docker-compose.yml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_docker_compose_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_2" type="checkbox" id="__nav_12_3_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_2">
          ■ Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Kubernetes" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_manifest_file.html" class="md-nav__link">
        マニフェストファイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_policy.html" class="md-nav__link">
        設計ポリシー
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_2_4" type="checkbox" id="__nav_12_3_2_2_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_2_4">
          ■ カスタムリソース
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ カスタムリソース" data-md-level="5">
        <label class="md-nav__title" for="__nav_12_3_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          ■ カスタムリソース
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource.html" class="md-nav__link">
        カスタムリソース
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_secret_provider_service_manifest_file.html" class="md-nav__link">
        SecretProviderClass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_grafana_manifest_file.html" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_2_4_4" type="checkbox" id="__nav_12_3_2_2_4_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_2_4_4">
          ■ ArgoCD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ArgoCD" data-md-level="6">
        <label class="md-nav__title" for="__nav_12_3_2_2_4_4">
          <span class="md-nav__icon md-icon"></span>
          ■ ArgoCD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_argocd_manifest_file.html" class="md-nav__link">
        マニフェストファイル
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_2_4_5" type="checkbox" id="__nav_12_3_2_2_4_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_2_4_5">
          ■ Istio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Istio" data-md-level="6">
        <label class="md-nav__title" for="__nav_12_3_2_2_4_5">
          <span class="md-nav__icon md-icon"></span>
          ■ Istio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_istio_manifest_file.html" class="md-nav__link">
        マニフェストファイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_istio_operator_manifest_file.html" class="md-nav__link">
        IstioOperator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_istio_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_2_4_6" type="checkbox" id="__nav_12_3_2_2_4_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_2_4_6">
          ■ Prometheus
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Prometheus" data-md-level="6">
        <label class="md-nav__title" for="__nav_12_3_2_2_4_6">
          <span class="md-nav__icon md-icon"></span>
          ■ Prometheus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_prometheus_manifest_file.html" class="md-nav__link">
        マニフェストファイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_kubernetes_custom_resource_prometheus_operator_manifest_file.html" class="md-nav__link">
        PrometheusOperator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_2_3" type="checkbox" id="__nav_12_3_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_2_3">
          ■ Helm
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Helm" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          ■ Helm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_helm_chart.html" class="md-nav__link">
        チャート
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_helm_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_helm_policy.html" class="md-nav__link">
        設計ポリシー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_container_helm_helmfile.html" class="md-nav__link">
        Helmfile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_3" type="checkbox" id="__nav_12_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_3">
          ■ クラウドインフラプロビジョニング
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ クラウドインフラプロビジョニング" data-md-level="3">
        <label class="md-nav__title" for="__nav_12_3_3">
          <span class="md-nav__icon md-icon"></span>
          ■ クラウドインフラプロビジョニング
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_3_1" type="checkbox" id="__nav_12_3_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_3_1">
          ■ Terraform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Terraform" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_3_1">
          <span class="md-nav__icon md-icon"></span>
          ■ Terraform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_terraform_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_terraform_policy.html" class="md-nav__link">
        設計ポリシー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_terraform_ci_cd.html" class="md-nav__link">
        CI/CD
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_3_1_4" type="checkbox" id="__nav_12_3_3_1_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_3_1_4">
          ■ tfファイル
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ tfファイル" data-md-level="5">
        <label class="md-nav__title" for="__nav_12_3_3_1_4">
          <span class="md-nav__icon md-icon"></span>
          ■ tfファイル
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_terraform_tf.html" class="md-nav__link">
        tfファイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_terraform_tf_aws_provider.html" class="md-nav__link">
        AWSプロバイダー
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_12_3_3_2" type="checkbox" id="__nav_12_3_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3_3_2">
          ■ Serverless Framework
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Serverless Framework" data-md-level="4">
        <label class="md-nav__title" for="__nav_12_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          ■ Serverless Framework
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_serverless_framework_serverless_yml.html" class="md-nav__link">
        serverless.yml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../infrastructure_as_code/infrastructure_as_code_cloud_serverless_framework_serverless_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          ♾️ DevOps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="♾️ DevOps" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          ♾️ DevOps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops.html" class="md-nav__link">
        DevOps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_github_actions.html" class="md-nav__link">
        GitHub Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_gitlab_ci.html" class="md-nav__link">
        GitLab CI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_capistrano.html" class="md-nav__link">
        Capistrano
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13_5" type="checkbox" id="__nav_13_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_5">
          ■ CircleCI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ CircleCI" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_5">
          <span class="md-nav__icon md-icon"></span>
          ■ CircleCI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_circleci_config_yml.html" class="md-nav__link">
        config.yml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_circleci_orbs.html" class="md-nav__link">
        orbs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13_6" type="checkbox" id="__nav_13_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_6">
          ■ ArgoCD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ ArgoCD" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_6">
          <span class="md-nav__icon md-icon"></span>
          ■ ArgoCD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_argocd_manifest_file.html" class="md-nav__link">
        マニフェストファイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_argocd_policy.html" class="md-nav__link">
        設計ポリシー
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_13_7" type="checkbox" id="__nav_13_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_13_7">
          ■ Skaffold
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Skaffold" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_7">
          <span class="md-nav__icon md-icon"></span>
          ■ Skaffold
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_skaffold_yaml.html" class="md-nav__link">
        skaffold.yaml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devops/devops_skaffold_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          🔎 可観測性
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="🔎 可観測性" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          🔎 可観測性
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability.html" class="md-nav__link">
        可観測性
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14_2" type="checkbox" id="__nav_14_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14_2">
          ■ 監視
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ 監視" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_2">
          <span class="md-nav__icon md-icon"></span>
          ■ 監視
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_monitoring.html" class="md-nav__link">
        監視
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_monitoring_incident_management.html" class="md-nav__link">
        インシデント管理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14_3" type="checkbox" id="__nav_14_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14_3">
          ■ テレメトリー収集ツール
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ テレメトリー収集ツール" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_3">
          <span class="md-nav__icon md-icon"></span>
          ■ テレメトリー収集ツール
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry.html" class="md-nav__link">
        テレメトリー収集ツール
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_prometheus.html" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_victoria_metrics.html" class="md-nav__link">
        VictoriaMetrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14_3_4" type="checkbox" id="__nav_14_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14_3_4">
          ■ Googleアプリ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Googleアプリ" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_4">
          <span class="md-nav__icon md-icon"></span>
          ■ Googleアプリ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_google_analytics.html" class="md-nav__link">
        Googleアナリティクス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_google_search_console.html" class="md-nav__link">
        Googleサーチコンソール
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14_3_5" type="checkbox" id="__nav_14_3_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14_3_5">
          ■ FluentBit/Fluentd
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ FluentBit/Fluentd" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_5">
          <span class="md-nav__icon md-icon"></span>
          ■ FluentBit/Fluentd
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_fluentbit_vs_fluentd.html" class="md-nav__link">
        FluentBit vs. Fluentd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_fluentbit.html" class="md-nav__link">
        FluentBit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_fluentbit_firelens.html" class="md-nav__link">
        FireLensコンテナ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_14_3_6" type="checkbox" id="__nav_14_3_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_14_3_6">
          ■ Datadog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Datadog" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_6">
          <span class="md-nav__icon md-icon"></span>
          ■ Datadog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_agent_conf.html" class="md-nav__link">
        datadogエージェントの設定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_metrics.html" class="md-nav__link">
        メトリクス収集
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_log.html" class="md-nav__link">
        ログ収集
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_distributed_trace.html" class="md-nav__link">
        分散トレース収集
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_telemetry_association.html" class="md-nav__link">
        テレメトリー間の紐づけ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_monitoring.html" class="md-nav__link">
        監視
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../observability/observability_telemetry_datadog_integration.html" class="md-nav__link">
        インテグレーション
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          👥 ソフトウェア開発手法論/SRE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="👥 ソフトウェア開発手法論/SRE" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          👥 ソフトウェア開発手法論/SRE
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology.html" class="md-nav__link">
        ソフトウェア開発手法論
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology_site_reliability_engineering.html" class="md-nav__link">
        SRE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology_project_management.html" class="md-nav__link">
        プロジェクト管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_15_4" type="checkbox" id="__nav_15_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_15_4">
          ■ Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="■ Git" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_4">
          <span class="md-nav__icon md-icon"></span>
          ■ Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology_git_github.html" class="md-nav__link">
        GitHub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software_development_methodology/software_development_methodology_git_command.html" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          📊 統計分析
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="📊 統計分析" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          📊 統計分析
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../statistic_analysis/statistic_analysis_r.html" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          📢 過去の技術系プレゼン
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="📢 過去の技術系プレゼン" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          📢 過去の技術系プレゼン
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../presentation.html" class="md-nav__link">
        一覧
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    はじめに
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-ec2elastic-computer-cloud" class="md-nav__link">
    01. EC2：Elastic Computer Cloud
  </a>
  
    <nav class="md-nav" aria-label="01. EC2：Elastic Computer Cloud">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2" class="md-nav__link">
    EC2とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="ダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ▼ ダウンタイムの発生条件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    インスタンスタイプ
  </a>
  
    <nav class="md-nav" aria-label="インスタンスタイプ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ▼ 世代と大きさ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    ▼ CPUバーストモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ルートデバイスボリューム
  </a>
  
    <nav class="md-nav" aria-label="ルートデバイスボリューム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    ▼ ルートデバイスボリュームとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs" class="md-nav__link">
    ▼ EBSボリューム
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ▼ インスタンスストアボリューム
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    キーペア
  </a>
  
    <nav class="md-nav" aria-label="キーペア">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ▼ フィンガープリント値
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_1" class="md-nav__link">
    EC2インスタンスへの接続
  </a>
  
    <nav class="md-nav" aria-label="EC2インスタンスへの接続">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    ▼ キーペアを使用したSSH接続
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-manager" class="md-nav__link">
    ▼ Session Managerを使用したログインシェル起動
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-02-ec2-based-on-amiamazon-machine-image" class="md-nav__link">
    01-02. EC2 based on AMI：Amazon Machine Image
  </a>
  
    <nav class="md-nav" aria-label="01-02. EC2 based on AMI：Amazon Machine Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ami" class="md-nav__link">
    AMIとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ami_1" class="md-nav__link">
    AMIタイプ
  </a>
  
    <nav class="md-nav" aria-label="AMIタイプ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs-backed-ami" class="md-nav__link">
    ▼ EBS-backed AMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-store-backed-ami" class="md-nav__link">
    ▼ instance store-backed AMI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ami-os" class="md-nav__link">
    AMI OS
  </a>
  
    <nav class="md-nav" aria-label="AMI OS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amazon-linux" class="md-nav__link">
    ▼ Amazon Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centos" class="md-nav__link">
    ▼ CentOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#01-03-ec2-with-ebselastic-block-storage" class="md-nav__link">
    01-03. EC2 with EBS：Elastic Block Storage
  </a>
  
    <nav class="md-nav" aria-label="01-03. EC2 with EBS：Elastic Block Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_1" class="md-nav__link">
    EBSとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs_2" class="md-nav__link">
    EBSボリュームタイプとサイズ
  </a>
  
    <nav class="md-nav" aria-label="EBSボリュームタイプとサイズ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_3" class="md-nav__link">
    ▼ EBSボリュームの種類
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ▼ 下限のサイズ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ▼ サイズの拡張
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ext4" class="md-nav__link">
    ▼ ext4タイプの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xsf" class="md-nav__link">
    ▼ xsfタイプの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebs_4" class="md-nav__link">
    EBSボリュームの永続化
  </a>
  
    <nav class="md-nav" aria-label="EBSボリュームの永続化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ebs_5" class="md-nav__link">
    ▼ EBSボリュームの永続化とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_2" class="md-nav__link">
    ▼ EC2インスタンスの作成後に永続化する
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ▼ 注意点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    スナップショット
  </a>
  
    <nav class="md-nav" aria-label="スナップショット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    ▼ スナップショットとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-ecr" class="md-nav__link">
    02. ECR
  </a>
  
    <nav class="md-nav" aria-label="02. ECR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecr" class="md-nav__link">
    ECRとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    イメージのプッシュ
  </a>
  
    <nav class="md-nav" aria-label="イメージのプッシュ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    ▼ コンテナイメージの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    ▼ helmチャートの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    ライフサイクル
  </a>
  
    <nav class="md-nav" aria-label="ライフサイクル">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    ▼ ライフサイクルポリシー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    バージョンタグ
  </a>
  
    <nav class="md-nav" aria-label="バージョンタグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    ▼ タグ名のベストプラクティス
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-ecsekselastic-containerkubernetes-service" class="md-nav__link">
    03. ECS、EKS：Elastic Container/Kubernetes Service
  </a>
  
    <nav class="md-nav" aria-label="03. ECS、EKS：Elastic Container/Kubernetes Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    コントロールプレーンとデータプレーンの対応関係
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    コントロールプレーン
  </a>
  
    <nav class="md-nav" aria-label="コントロールプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    ▼ コントロールプレーンとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs" class="md-nav__link">
    ▼ ECSの場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks" class="md-nav__link">
    ▼ EKSの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    データプレーン
  </a>
  
    <nav class="md-nav" aria-label="データプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    ▼ データプレーンとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ec2_3" class="md-nav__link">
    ▼ EC2の場合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate" class="md-nav__link">
    ▼ Fargateの場合
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-ecs" class="md-nav__link">
    03-02. ECSデータプレーン
  </a>
  
    <nav class="md-nav" aria-label="03-02. ECSデータプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_1" class="md-nav__link">
    ECSクラスター
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_2" class="md-nav__link">
    ECSサービス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_3" class="md-nav__link">
    ECSタスク
  </a>
  
    <nav class="md-nav" aria-label="ECSタスク">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_4" class="md-nav__link">
    ▼ ECSタスク
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_5" class="md-nav__link">
    ▼ ECSコンテナエージェント
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_6" class="md-nav__link">
    ▼ ECSタスク定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_7" class="md-nav__link">
    ▼ ECSタスクのライフサイクル
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    ロール
  </a>
  
    <nav class="md-nav" aria-label="ロール">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    ▼ サービスロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    ▼ コンテナインスタンスロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    ▼ タスクロール
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    ▼ タスク実行ロール
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    ネットワークモードとコンテナ間通信
  </a>
  
    <nav class="md-nav" aria-label="ネットワークモードとコンテナ間通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#none" class="md-nav__link">
    ▼ noneモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#host" class="md-nav__link">
    ▼ hostモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge" class="md-nav__link">
    ▼ bridgeモード
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#awsvpc" class="md-nav__link">
    ▼ awsvpcモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_8" class="md-nav__link">
    マルチECSサービス
  </a>
  
    <nav class="md-nav" aria-label="マルチECSサービス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_9" class="md-nav__link">
    ▼ マルチECSサービスとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_10" class="md-nav__link">
    ▼ ECSサービスディスカバリー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    プライベートサブネット内からのアウトバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内からのアウトバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    ▼ プライベートサブネット内へのデータプレーンの配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    ▼ パブリックネットワークに対する通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpcaws" class="md-nav__link">
    ▼ VPC外のAWSリソースに対する通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    ログ転送
  </a>
  
    <nav class="md-nav" aria-label="ログ転送">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awslogs" class="md-nav__link">
    ▼ awslogsドライバー
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firelens" class="md-nav__link">
    ▼ FireLensコンテナ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-02-on-ec2" class="md-nav__link">
    03-02-02. on EC2
  </a>
  
    <nav class="md-nav" aria-label="03-02-02. on EC2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2ami" class="md-nav__link">
    EC2インスタンスのAMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    タスク配置戦略
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-02-03-on-fargate" class="md-nav__link">
    03-02-03. on Fargate
  </a>
  
    <nav class="md-nav" aria-label="03-02-03. on Fargate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecs_11" class="md-nav__link">
    ▼ ECSサービス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_12" class="md-nav__link">
    ▼ ECSタスク定義
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    ▼ コンテナ定義
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    IPアドレス
  </a>
  
    <nav class="md-nav" aria-label="IPアドレス">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecsip" class="md-nav__link">
    ▼ ECSタスクのIPアドレス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargateip" class="md-nav__link">
    ▼ FargateのIPアドレス
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_13" class="md-nav__link">
    ECSタスクの一時起動
  </a>
  
    <nav class="md-nav" aria-label="ECSタスクの一時起動">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    ▼ マイグレーション
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs_14" class="md-nav__link">
    ECSタスクのデプロイ手法
  </a>
  
    <nav class="md-nav" aria-label="ECSタスクのデプロイ手法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    ▼ ローリングアップデート
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    ▼ ブルー/グリーンデプロイメント
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargatevpcaws" class="md-nav__link">
    プライベートサブネット内のFargateからVPC外のAWSリソースへのアクセス
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate_1" class="md-nav__link">
    Fargate上のコンテナへの接続
  </a>
  
    <nav class="md-nav" aria-label="Fargate上のコンテナへの接続">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session-managerecs-exec" class="md-nav__link">
    ▼ Session Managerを使用したECS Exec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-eks" class="md-nav__link">
    03-03. EKSデータプレーン
  </a>
  
    <nav class="md-nav" aria-label="03-03. EKSデータプレーン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks-cluster" class="md-nav__link">
    ▼ EKS Cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc" class="md-nav__link">
    ▼ VPC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks_1" class="md-nav__link">
    EKSの仕組み
  </a>
  
    <nav class="md-nav" aria-label="EKSの仕組み">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ekskubernetes" class="md-nav__link">
    ▼ EKSとKubernetesの対応
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eks-cluster_1" class="md-nav__link">
    EKS Cluster
  </a>
  
    <nav class="md-nav" aria-label="EKS Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks-cluster_2" class="md-nav__link">
    ▼ EKS Clusterとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc_1" class="md-nav__link">
    プライベートサブネット内のデータプレーンへのVPC外からのインバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内のデータプレーンへのVPC外からのインバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod" class="md-nav__link">
    ▼ Podへのインバウンド通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    ▼ コントロールプレーンへのインバウンド通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    プライベートサブネット内のデータプレーンからのアウトバウンド通信
  </a>
  
    <nav class="md-nav" aria-label="プライベートサブネット内のデータプレーンからのアウトバウンド通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vpcaws_1" class="md-nav__link">
    ▼ VPC外の他のAWSリソースへのアウトバウンド通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc_2" class="md-nav__link">
    ▼ VPC外のコントロールプレーンへのアウトバウンド通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    マルチNode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-lb-controller" class="md-nav__link">
    AWS LB Controller
  </a>
  
    <nav class="md-nav" aria-label="AWS LB Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    ▼ セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingressalb" class="md-nav__link">
    ▼ IngressとALBの紐付け
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    デバッグ
  </a>
  
    <nav class="md-nav" aria-label="デバッグ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    ▼ ダッシュボード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-02-on-fargate" class="md-nav__link">
    03-03-02. on Fargate
  </a>
  
    <nav class="md-nav" aria-label="03-03-02. on Fargate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    セットアップ
  </a>
  
    <nav class="md-nav" aria-label="セットアップ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    ▼ 制約
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    ▼ メトリクス収集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    ▼ ログルーティング
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate-node" class="md-nav__link">
    Fargate Node
  </a>
  
    <nav class="md-nav" aria-label="Fargate Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fargate-node_1" class="md-nav__link">
    ▼ Fargate Nodeとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fargate_2" class="md-nav__link">
    ▼ Fargateプロファイル
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-03-03-on-ec2" class="md-nav__link">
    03-03-03. on EC2
  </a>
  
    <nav class="md-nav" aria-label="03-03-03. on EC2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2-node" class="md-nav__link">
    EC2 Node
  </a>
  
    <nav class="md-nav" aria-label="EC2 Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ec2-node_1" class="md-nav__link">
    ▼ EC2 Nodeとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-efselastic-file-system" class="md-nav__link">
    04. EFS：Elastic File System
  </a>
  
    <nav class="md-nav" aria-label="04. EFS：Elastic File System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#efs" class="md-nav__link">
    EFSとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    スペック
  </a>
  
    <nav class="md-nav" aria-label="スペック">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    ▼ バーストモードの仕組み
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    ▼ プロビジョニングモードの仕組み
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    コマンド
  </a>
  
    <nav class="md-nav" aria-label="コマンド">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    ▼ マウント
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-elasticache" class="md-nav__link">
    05. ElastiCache
  </a>
  
    <nav class="md-nav" aria-label="05. ElastiCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elasticcache" class="md-nav__link">
    ElasticCacheとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-02-elasticache-for-redis" class="md-nav__link">
    05-02. ElastiCache for Redis
  </a>
  
    <nav class="md-nav" aria-label="05-02. ElastiCache for Redis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    セットアップ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    Redisクラスター
  </a>
  
    <nav class="md-nav" aria-label="Redisクラスター">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_1" class="md-nav__link">
    ▼ Redisクラスターとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    ▼ クラスターモード
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_2" class="md-nav__link">
    Redisシャード
  </a>
  
    <nav class="md-nav" aria-label="Redisシャード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_3" class="md-nav__link">
    ▼ Redisシャードとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_4" class="md-nav__link">
    Redisノード
  </a>
  
    <nav class="md-nav" aria-label="Redisノード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis_5" class="md-nav__link">
    ▼ Redisノードとは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    セッション管理機能
  </a>
  
    <nav class="md-nav" aria-label="セッション管理機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    ▼ セッション管理機能とは
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    クエリキャッシュ管理機能
  </a>
  
    <nav class="md-nav" aria-label="クエリキャッシュ管理機能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    ▼ クエリキャッシュ管理機能とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    ▼ クエリキャッシュの操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    障害対策
  </a>
  
    <nav class="md-nav" aria-label="障害対策">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    ▼ フェイルオーバー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis_6" class="md-nav__link">
    Redisクラスターのダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="Redisクラスターのダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    ▼ ダウンタイムの発生条件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    計画的なダウンタイム
  </a>
  
    <nav class="md-nav" aria-label="計画的なダウンタイム">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    ▼ 計画的なダウンタイムとは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    ▼ バックアップとインポートによるダウンタイムの最小化
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-eventbridgecloudwatch" class="md-nav__link">
    05. EventBridge（CloudWatchイベント）
  </a>
  
    <nav class="md-nav" aria-label="05. EventBridge（CloudWatchイベント）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eventbridgecloudwatch" class="md-nav__link">
    EventBridge（CloudWatchイベント）とは
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    パターン
  </a>
  
    <nav class="md-nav" aria-label="パターン">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    ▼ イベントパターン
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    ▼ スケジュール
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    ターゲット
  </a>
  
    <nav class="md-nav" aria-label="ターゲット">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    ▼ ターゲットの一覧
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    ▼ デバッグ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    入力
  </a>
  
    <nav class="md-nav" aria-label="入力">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    ▼ 入力トランスフォーマー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/hiroki-it/edit/master/docs/cloud_computing/cloud_computing_aws_2.md" title="編集" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="awsamazon-web-servicee">AWS：Amazon Web Service（E）<a class="headerlink" href="#awsamazon-web-servicee" title="Permanent link">&para;</a></h1>
<h2 id="_1">はじめに<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本サイトにつきまして、以下をご認識のほど宜しくお願いいたします。</p>
<p><a href="https://hiroki-it.github.io/tech-notebook-mkdocs/about.html">https://hiroki-it.github.io/tech-notebook-mkdocs/about.html</a></p>
<p><br></p>
<h2 id="01-ec2elastic-computer-cloud">01. EC2：Elastic Computer Cloud<a class="headerlink" href="#01-ec2elastic-computer-cloud" title="Permanent link">&para;</a></h2>
<h3 id="ec2">EC2とは<a class="headerlink" href="#ec2" title="Permanent link">&para;</a></h3>
<p>クラウドサーバーとして働く。注意点があるものだけまとめる。ベストプラクティスについては、以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-best-practices.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-best-practices.html</a></p>
<p><br></p>
<h3 id="_2">セットアップ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMI：Amazonマシンイメージ</td>
<td>AMIを選択する。</td>
<td></td>
</tr>
<tr>
<td>インスタンスタイプ</td>
<td></td>
<td></td>
</tr>
<tr>
<td>EC2インスタンス数</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ネットワーク</td>
<td></td>
<td></td>
</tr>
<tr>
<td>サブネット</td>
<td>EC2を配置するサブネットを設定する。</td>
<td></td>
</tr>
<tr>
<td>自動割り当てIPアドレス</td>
<td>EC2へのパブリックIPアドレスの割り当てを有効化する。</td>
<td>EC2インスタンス作成後に有効にできない。</td>
</tr>
<tr>
<td>キャパシティの予約</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ドメイン結合ディレクトリ</td>
<td></td>
<td></td>
</tr>
<tr>
<td>IAMロール</td>
<td>EC2に付与するIAMロールを設定する。</td>
<td></td>
</tr>
<tr>
<td>シャットダウン動作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>終了保護</td>
<td>EC2インスタンスの削除を防ぐ。</td>
<td>必ず有効にすること。</td>
</tr>
<tr>
<td>モニタリング</td>
<td></td>
<td></td>
</tr>
<tr>
<td>テナンシー</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Elastic Inference</td>
<td></td>
<td></td>
</tr>
<tr>
<td>クレジット仕様</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ストレージ</td>
<td>EC2インスタンスのストレージを設定する。</td>
<td></td>
</tr>
<tr>
<td>キーペア</td>
<td>SSH接続のため、EC2インスタンスの秘密鍵に対応した公開鍵をインストールできる。</td>
<td>・Session Managerを使用してEC2インスタンスに接続する場合は、キーペアの作成は不要である。<br>・キーペアは、EC2の最初の作成時しか作成できず、後から作成できない。<br>・キーペアに割り当てられるフィンガープリント値を調べることで、公開鍵と秘密鍵の対応関係を調べられる。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_3">ダウンタイム<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<h4 id="_4">▼ ダウンタイムの発生条件<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>以下の条件の時にEC2にダウンタイムが発生する。EC2を冗長化している場合は、ユーザーに影響を与えずに対処できる。ダウンタイムが発生する方のインスタンスを事前にALBのターゲットグループから解除しておき、停止したインスタンスが起動した後に、ターゲットグループに再登録する。</p>
<table>
<thead>
<tr>
<th>変更する項目</th>
<th>ダウンタイムの有無</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>インスタンスタイプ</td>
<td>あり</td>
<td>インスタンスタイプを変更するためにはEC2を停止する必要がある。そのため、ダウンタイムが発生する。</td>
</tr>
<tr>
<td>ホスト物理サーバーのリタイアメント</td>
<td>あり</td>
<td>AWSから定期的にリタイアメントに関する警告メールが届く。ルートデバイスタイプが『EBS』の場合、ホスト物理サーバーの引っ越しを行うためにEC2の停止と起動が必要である。そのため、ダウンタイムが発生する。なお、再起動では引っ越しできない。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_5">インスタンスタイプ<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<h4 id="_6">▼ 世代と大きさ<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>『世代』と『大きさ』からなる名前で構成される。世代の数字が上がるにつれて、より小さな世代と同じ大きさであっても、パフォーマンスと低コストになる。AMIのOSのバージョンによっては、新しく登場したインスタンスタイプを適用できないことがあるため注意する。例えば、CentOS 6系のAMIでは、<code>t3.small</code>を選択できない。</p>
<p>参考：<a href="https://aws.amazon.com/marketplace/pp/prodview-gkh3rqhqbgzme?ref=cns_srchrow">https://aws.amazon.com/marketplace/pp/prodview-gkh3rqhqbgzme?ref=cns_srchrow</a></p>
<table>
<thead>
<tr>
<th></th>
<th>機能名</th>
</tr>
</thead>
<tbody>
<tr>
<td>世代</td>
<td><code>t2</code>、<code>t3</code>、<code>t3a</code>、<code>t4g</code>、<code>a1</code></td>
</tr>
<tr>
<td>大きさ</td>
<td><code>nano</code>、<code>small</code>、<code>medium</code>、<code>large</code>、<code>xlarge</code>、<code>2xlarge</code></td>
</tr>
</tbody>
</table>
<h4 id="cpu">▼ CPUバーストモード<a class="headerlink" href="#cpu" title="Permanent link">&para;</a></h4>
<p>バーストモードのインスタンスタイプの場合、一定水準のベースラインCPU使用率を提供しつつ、これを超過できる。CPU使用率がベースラインを超えたとき、超過した分だけEC2はCPUクレジットを消費する。CPUクレジットは一定の割合で回復する。蓄積できる最大CPUクレジット、クレジットの回復率、ベースラインCPU使用率は、インスタンスタイプによって異なる。詳しくは以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances.html</a></p>
<p><br></p>
<h3 id="_7">ルートデバイスボリューム<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<h4 id="_8">▼ ルートデバイスボリュームとは<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>EC2インスタンスでは、ブロックデバイスにルートデバイスボリュームが紐づいている。複数のブロックデバイスを用意し、それぞれを異なるルートデバイスボリュームから紐づけることもできる。さらに、このブロックデバイスが、マウントポイントtになるディレクトリ紐づいている。つまりEC2インスタンスが作成されると、ボリューム内に保管されたファイルは、ブロックデバイスを経由して、マウントポイントのディレクトリ内に生成される。また反対に、マウント先ディレクトリ内に保存されたファイルは、ルートデバイスボリューム内に保管される。複数のルートボリュームを紐づける場合は、最大サイズの大きなルートボリュームに紐づくルートデバイスを、サイズが大きくなり得るディレクトリにマウントするようにしておく。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html</a></li>
<li><a href="https://atmarkit.itmedia.co.jp/ait/articles/1802/23/news024.html">https://atmarkit.itmedia.co.jp/ait/articles/1802/23/news024.html</a></li>
</ul>
<h4 id="ebs">▼ EBSボリューム<a class="headerlink" href="#ebs" title="Permanent link">&para;</a></h4>
<p><img alt="ec2_ebs-backed-instance" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ec2_ebs-backed-instance.png" /></p>
<p>EBSで保管されているルートデバイスボリュームで、推奨の方法である。インスタンスストアボリュームとは異なり、コンピューティングとして機能するEC2インスタンスと、ストレージとして機能するルートデバイスボリュームが分離されている。そのため、EC2インスタンスが誤って削除されてしまったとしても、ボリュームは削除されずに、データを守れる。また、両者が分離されていないインスタンスボリュームと比較して、再起動が早いため、再起動に伴うダウンタイムが短い。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#RootDeviceStorageConcepts">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#RootDeviceStorageConcepts</a></li>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device</a></li>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#Using_RootDeviceStorage">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#Using_RootDeviceStorage</a></li>
</ul>
<h4 id="_9">▼ インスタンスストアボリューム<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p><img alt="ec2_instance-store-backed-instance" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ec2_instance-store-backed-instance.png" /></p>
<p>インスタンスストアで保管されているルートデバイスボリュームで、非推奨の方法である。EBSボリュームとは異なり、コンピューティングとして機能するEC2インスタンス内にルートデバイスボリュームが存在している。そのため、インスタンスストアボリュームは、EC2インスタンスが終了すると一緒に削除されてしまう。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#RootDeviceStorageConcepts">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#RootDeviceStorageConcepts</a></li>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device</a></li>
</ul>
<p><br></p>
<h3 id="_10">キーペア<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<h4 id="_11">▼ フィンガープリント値<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>ローカルマシンに配置されている秘密鍵が、該当するEC2に配置されている公開鍵とペアなのかどうか、フィンガープリント値を照合して確認する方法</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>$ openssl pkcs8 <span class="se">\</span>
    -in &lt;秘密鍵名&gt;.pem <span class="se">\</span>
    -inform PEM <span class="se">\</span>
    -outform DER <span class="se">\</span>
    -topk8 <span class="se">\</span>
    -nocrypt <span class="se">\</span>
      <span class="p">|</span> openssl sha1 -c
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="ec2_1">EC2インスタンスへの接続<a class="headerlink" href="#ec2_1" title="Permanent link">&para;</a></h3>
<h4 id="ssh">▼ キーペアを使用したSSH接続<a class="headerlink" href="#ssh" title="Permanent link">&para;</a></h4>
<p>キーペアのうちの秘密鍵を使用して、対応する公開鍵を持つEC2インスタンスにSSH接続でアクセスできる。クライアントのSSHプロトコルのパケットは、まずインターネットを経由して、Internet Gatewayを通過する。その後、Route53、ALBを経由せず、そのままEC2へ向かう。</p>
<p><img alt="ssh-port-forward" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ssh-port-forward.png" /></p>
<h4 id="session-manager">▼ Session Managerを使用したログインシェル起動<a class="headerlink" href="#session-manager" title="Permanent link">&para;</a></h4>
<p><img alt="ec2_session-manager" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ec2_session-manager.png" /></p>
<table>
<thead>
<tr>
<th>VPCエンドポイントの接続先</th>
<th>プライベートDNS名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>EC2</td>
<td><code>ec2messages.ap-northeast-1.amazonaws.com</code></td>
<td>ローカルマシンからEC2インスタンスにコマンドを送信するため。</td>
</tr>
<tr>
<td>Parameter Store</td>
<td><code>ssm.ap-northeast-1.amazonaws.com</code></td>
<td>Parameter StoreにGETリクエストを送信するため。</td>
</tr>
<tr>
<td>Secrets Manager</td>
<td><code>ssmmessage.ap-northeast-1.amazonaws.com</code></td>
<td>Secrets Managerの機能を使用するため。</td>
</tr>
</tbody>
</table>
<p>Session Managerを使用してEC2インスタンスに接続し、ログインシェルを起動する。System Managerを使用してEC2インスタンスに接続する場合、EC2インスタンス自体にsystems-managerエージェントをインストールしておく必要がある。</p>
<p>参考：</p>
<ul>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/ec2-systems-manager-vpc-endpoints/">https://aws.amazon.com/jp/premiumsupport/knowledge-center/ec2-systems-manager-vpc-endpoints/</a></li>
<li><a href="https://garafu.blogspot.com/2020/08/connect-private-ec2-with-ssm.html">https://garafu.blogspot.com/2020/08/connect-private-ec2-with-ssm.html</a></li>
<li><a href="https://dev.classmethod.jp/articles/ssh-through-session-manager/">https://dev.classmethod.jp/articles/ssh-through-session-manager/</a></li>
</ul>
<p><br></p>
<h2 id="01-02-ec2-based-on-amiamazon-machine-image">01-02. EC2 based on AMI：Amazon Machine Image<a class="headerlink" href="#01-02-ec2-based-on-amiamazon-machine-image" title="Permanent link">&para;</a></h2>
<h3 id="ami">AMIとは<a class="headerlink" href="#ami" title="Permanent link">&para;</a></h3>
<p>EC2インスタンスのマシンイメージであり、EC2インスタンス上でアプリケーションソフトウェアを稼働させるために必要なソフトウェア（OS、ミドルウェア）とEBSボリュームのコピーが内蔵されたテンプレートである。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html</a></li>
<li><a href="https://aws.typepad.com/sajp/2014/04/trainingfaqbest10.html">https://aws.typepad.com/sajp/2014/04/trainingfaqbest10.html</a></li>
</ul>
<p><br></p>
<h3 id="ami_1">AMIタイプ<a class="headerlink" href="#ami_1" title="Permanent link">&para;</a></h3>
<h4 id="ebs-backed-ami">▼ EBS-backed AMI<a class="headerlink" href="#ebs-backed-ami" title="Permanent link">&para;</a></h4>
<p>EBSボリュームを持つEC2インスタンスを作成するAMIのこと。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device</a></p>
<h4 id="instance-store-backed-ami">▼ instance store-backed AMI<a class="headerlink" href="#instance-store-backed-ami" title="Permanent link">&para;</a></h4>
<p>インスタンスストアボリュームを持つEC2インスタンスを作成するAMIのこと。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html#storage-for-the-root-device</a></p>
<p><br></p>
<h3 id="ami-os">AMI OS<a class="headerlink" href="#ami-os" title="Permanent link">&para;</a></h3>
<h4 id="amazon-linux">▼ Amazon Linux<a class="headerlink" href="#amazon-linux" title="Permanent link">&para;</a></h4>
<h4 id="centos">▼ CentOS<a class="headerlink" href="#centos" title="Permanent link">&para;</a></h4>
<p>ベンダー公式あるいは非公式が提供しているAMIが区別しにくいので、確実に公式ベンダーが提供しているもの選択すること。</p>
<p>参考： <a href="https://wiki.centos.org/Cloud/AWS">https://wiki.centos.org/Cloud/AWS</a></p>
<p><br></p>
<h2 id="01-03-ec2-with-ebselastic-block-storage">01-03. EC2 with EBS：Elastic Block Storage<a class="headerlink" href="#01-03-ec2-with-ebselastic-block-storage" title="Permanent link">&para;</a></h2>
<h3 id="ebs_1">EBSとは<a class="headerlink" href="#ebs_1" title="Permanent link">&para;</a></h3>
<p>EC2インスタンスのクラウド内蔵ストレージとして働く。</p>
<p><br></p>
<h3 id="_12">セットアップ<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>ボリュームタイプ</td>
<td>EBSボリュームの種類を設定する。</td>
<td></td>
</tr>
<tr>
<td>サイズ</td>
<td>選択したボリュームタイプでのサイズを設定する。</td>
<td></td>
</tr>
<tr>
<td>IOPS</td>
<td>EC2インスタンスとEBSボリューム間のI/O処理のリクエスト数（個/秒）を設定する。</td>
<td></td>
</tr>
<tr>
<td>AZ</td>
<td>EBSボリュームを作成するAZ。</td>
<td>EC2インスタンスは、同じAZにあるEBSボリュームしか選択できないので注意する。</td>
</tr>
<tr>
<td>暗号化</td>
<td>EC2インスタンスとEBSボリューム間のI/O処理を暗号化するかどうかを設定する。</td>
<td>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="ebs_2">EBSボリュームタイプとサイズ<a class="headerlink" href="#ebs_2" title="Permanent link">&para;</a></h3>
<h4 id="ebs_3">▼ EBSボリュームの種類<a class="headerlink" href="#ebs_3" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>EBSボリュームタイプ</th>
<th>対応する物理ストレージ</th>
<th>IOPS</th>
<th>スループット</th>
</tr>
</thead>
<tbody>
<tr>
<td>汎用SSD（<code>gp2</code>）</td>
<td>SSD</td>
<td>サイズに応じて、自動的に設定される。</td>
<td>設定できない。</td>
</tr>
<tr>
<td>汎用SSD（<code>gp3</code>）</td>
<td>同上</td>
<td>サイズに関係なく、設定できる。</td>
<td>サイズに関係なく、設定できる。</td>
</tr>
<tr>
<td>プロビジョンド IOPS SSD（<code>io1</code>）</td>
<td>同上</td>
<td>サイズに関係なく、設定できる。</td>
<td>設定できない。</td>
</tr>
<tr>
<td>プロビジョンド IOPS SSD（<code>io2</code>）</td>
<td>同上</td>
<td>サイズに関係なく、設定できる。</td>
<td>設定できない。</td>
</tr>
<tr>
<td>Cold HDD</td>
<td>HDD</td>
<td>サイズに応じて、自動的に設定される。</td>
<td>サイズに応じて、自動的に設定される。</td>
</tr>
<tr>
<td>スループット最適化 HDD</td>
<td>同上</td>
<td>設定できない。</td>
<td>サイズに応じて、自動的に設定される。</td>
</tr>
<tr>
<td>マグネティック</td>
<td>同上</td>
<td>設定できない。</td>
<td>設定できない。</td>
</tr>
</tbody>
</table>
<h4 id="_13">▼ 下限のサイズ<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>一般的なアプリケーションであれば、最低限<code>20</code>～<code>30</code>GiBのサイズがあると良い。しかし、踏み台サーバーの場合、プライベートサブネットに接続するための足場としての用途しかなく、大きなサイズのEBSボリュームを組み込む必要がない。そこでできるだけ最小限のボリュームを選択し、ストレージ合計を抑える必要がある。OSによって下限ボリュームサイズが異なることに注意する。</p>
<table>
<thead>
<tr>
<th>OS</th>
<th>仮想メモリ</th>
<th>下限EBSボリュームサイズ</th>
</tr>
</thead>
<tbody>
<tr>
<td>Amazon Linux</td>
<td><code>t2.micro</code></td>
<td><code>8</code></td>
</tr>
<tr>
<td>CentOS</td>
<td><code>t2.micro</code></td>
<td><code>10</code></td>
</tr>
</tbody>
</table>
<h4 id="_14">▼ サイズの拡張<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>サイズを拡張するためには、実際のEBSボリューム、EBSボリューム内のパーティション、EC2内のファイルシステム、に関して対応する必要がある。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html#extend-file-system">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html#extend-file-system</a></p>
<p><strong>＊例＊</strong></p>
<p>（１）任意で、バックアップのために拡張対象のEC2インスタンスのAMIを作成しておく。</p>
<p>（２）EC2インスタンスのEBSボリュームを<code>8</code>GiBから<code>16</code>GiBに拡張する例を考える。lsblkコマンドで現在のボリュームのサイズを確認すると、EBSボリュームが<code>8</code>GiBである。この時、EBSボリューム内にパーティションがある。また、<code>df</code>コマンドでボリュームに紐づくデバイスファイルのサイズを確認すると、同じく<code>8</code>GiBである。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>$ lsblk

NAME    MAJ:MIN   RM   SIZE   RO   TYPE   MOUNTPOINT
xvda      <span class="m">202</span>:0    <span class="m">0</span>     8G    <span class="m">0</span>   disk              <span class="c1"># EBSボリューム</span>
└─xvda1   <span class="m">202</span>:1    <span class="m">0</span>     8G    <span class="m">0</span>   part   /          <span class="c1"># パーティション</span>
nvme1n1   <span class="m">259</span>:1    <span class="m">0</span>   200G    <span class="m">0</span>   disk   /var/lib

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>$ df -h

Filesystem     Size   Used  Avail  Use%   Mounted on
/dev/xvda1       8G   <span class="m">1</span>.9G    14G   <span class="m">12</span>%   /           <span class="c1"># パーティションに紐づくデバイスファイル</span>
/dev/nvme1n1   200G   161G    40G   <span class="m">81</span>%   /var/lib

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<p>（３）コンソール画面から、EBSボリュームを<code>16</code>GiBに拡張する。この時、ダウンタイムは発生しない。改めて<code>lsblk</code>コマンドを実行すると、該当のEBSボリュームが拡張されたことを確認できる。ただ<code>df</code>コマンドでは、デバイスファイルが拡張されたことをまだ確認できない。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>$ lsblk

NAME          MAJ:MIN RM   SIZE  RO  TYPE  MOUNTPOINT
xvda          <span class="m">202</span>:0    <span class="m">0</span>    16G   <span class="m">0</span>  disk             <span class="c1"># EBSボリュームに紐づくデバイスファイル</span>
└─xvda1       <span class="m">202</span>:1    <span class="m">0</span>     8G   <span class="m">0</span>  part  /          <span class="c1"># パーティションに紐づくデバイスファイル</span>
nvme1n1       <span class="m">259</span>:1    <span class="m">0</span>   200G   <span class="m">0</span>  disk  /var/lib

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>$ df -h

Filesystem     Size   Used  Avail  Use%   Mounted on
/dev/xvda1       8G   <span class="m">1</span>.9G    14G   <span class="m">12</span>%   /           <span class="c1"># パーティションに紐づくデバイスファイル</span>
/dev/nvme1n1   200G   161G    40G   <span class="m">81</span>%   /var/lib
<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<p>（４）EBSボリュームに紐づくデバイスファイルのタイプを確認する。今回は<code>ext4</code>タイプである。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>$ df -hT

Filesystem     Type  Size  Used  Avail  Use%  Mounted on
/dev/xvda1     ext4    8G  <span class="m">1</span>.9G    14G   <span class="m">12</span>%  /           <span class="c1"># ext4タイプ</span>
/dev/nvme1n1   xfs    20G  <span class="m">8</span>.0G    13G   <span class="m">40</span>%  /var/lib

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<p>（５）今回、EBSボリューム内にパーティションがあるため、<code>growpart</code>コマンドを実行し、デバイスファイルに紐づくパーティションを拡張する。パーティションがなければ、この手順は不要である。改めて<code>lsblk</code>コマンドを実行すると、パーティションのサイズが拡張されている。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ growpart /dev/xvda <span class="m">1</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>$ lsblk

NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
xvda    <span class="m">202</span>:0    <span class="m">0</span>  16G  <span class="m">0</span> disk            <span class="c1"># EBSボリューム</span>
└─xvda1 <span class="m">202</span>:1    <span class="m">0</span>  16G  <span class="m">0</span> part /          <span class="c1"># パーティション</span>

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<h4 id="ext4">▼ <code>ext4</code>タイプの場合<a class="headerlink" href="#ext4" title="Permanent link">&para;</a></h4>
<p>（６）もし<code>ext4</code>タイプであった場合、<code>resize2fs</code>コマンドでデバイスファイルを指定し、EBSボリュームに紐づくデバイスファイルのサイズを拡張する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ sudo resize2fs &lt;デバイスファイル名&gt;
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ sudo resize2fs /dev/xvda1
</code></pre></div></td></tr></table></div>
<p>（７）改めて<code>df</code>コマンドを実行すると、EBSボリュームに紐づくデバイスファイルのサイズが拡張されたことを確認できる。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>$ df -hT

Filesystem  Type  Size  Used  Avail  Use%  Mounted on
/dev/xvda1  ext4   16G  <span class="m">1</span>.9G    14G   <span class="m">12</span>%  /var/lib     <span class="c1"># パーティションに紐づくデバイスファイル</span>

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<h4 id="xsf">▼ <code>xsf</code>タイプの場合<a class="headerlink" href="#xsf" title="Permanent link">&para;</a></h4>
<p>（６）もし<code>xsf</code>タイプであった場合、<code>xfs_growfs</code>コマンドでマウントポイントを指定し、EBSボリュームに紐づくデバイスファイルのサイズを拡張する。もし、<code>xfs_growfs</code>コマンドがない場合は、インストールする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>$ xfs_growfs -d &lt;マウントポイント名&gt;

<span class="c1"># もし、xfs_growfsコマンドがない場合は、インストールする。</span>
<span class="c1"># yum install xfsprogs</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ xfs_growfs -d /var/lib
</code></pre></div></td></tr></table></div>
<p>（７）改めて<code>df</code>コマンドを実行すると、EBSボリュームに紐づくデバイスファイルのサイズが拡張されたことを確認できる。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>$ df -hT

Filesystem     Type  Size  Used  Avail  Use%  Mounted on
/dev/nvme1n1   xfs    20G  <span class="m">8</span>.0G    13G   <span class="m">40</span>%  /var/lib      <span class="c1"># ボリュームに紐づくデバイスファイル</span>

<span class="c1"># ～ 中略 ～</span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="ebs_4">EBSボリュームの永続化<a class="headerlink" href="#ebs_4" title="Permanent link">&para;</a></h3>
<h4 id="ebs_5">▼ EBSボリュームの永続化とは<a class="headerlink" href="#ebs_5" title="Permanent link">&para;</a></h4>
<p>EC2インスタンスの初期作成時に、ストレージの追加の項目で『終了時に削除』の設定を無効化しておく。これにより、EC2インスタンスが削除されても、EBSボリュームを削除しないようにできる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#Using_RootDeviceStorage">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#Using_RootDeviceStorage</a></p>
<h4 id="ec2_2">▼ EC2インスタンスの作成後に永続化する<a class="headerlink" href="#ec2_2" title="Permanent link">&para;</a></h4>
<p>EC2インスタンスの作成後に、EBSボリュームを永続化したい場合は、CLIを実行する必要がある。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws ec2 modify-instance-attribute <span class="se">\</span>
    --instance-id &lt;インスタンスID&gt; 
    --block-device-mappings <span class="se">\</span>
    file://example.json
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># example.jsonファイル</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;DeviceName&quot;</span>: <span class="s2">&quot;/dev/sda1&quot;</span>,
    <span class="s2">&quot;Ebs&quot;</span>: <span class="o">{</span>
      <span class="s2">&quot;DeleteOnTermination&quot;</span>: <span class="nb">false</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre></div></td></tr></table></div>
<h4 id="_15">▼ 注意点<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>EC2インスタンスにオートスケーリングを適用している場合は、EBSボリュームを永続化しない方が良いかもしれない。オートスケーリングのスケールイン時に、削除されたEC2インスタンスのEBSボリュームが削除されないため、未使用のEBSボリュームがどんどん溜まっていく問題が起こる。</p>
<p>参考：<a href="https://qiita.com/YujiHamada3/items/c890a3de8937ea20bbb2">https://qiita.com/YujiHamada3/items/c890a3de8937ea20bbb2</a></p>
<p><br></p>
<h3 id="_16">スナップショット<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<h4 id="_17">▼ スナップショットとは<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p>バックアップとしてのEBSボリュームのコピーのこと。ソフトウェアとEBSボリュームのコピーの両方が内蔵されたAMIとは区別すること。</p>
<p>参考：<a href="https://aws.typepad.com/sajp/2014/04/trainingfaqbest10.html">https://aws.typepad.com/sajp/2014/04/trainingfaqbest10.html</a></p>
<h4 id="_18">▼ セットアップ<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>リソースタイプ</td>
<td>単一のボリュームのスナップショット、複数のボリュームを含むスナップショット、のいずれを作成するか、を設定する。</td>
</tr>
<tr>
<td>ボリュームID/インスタンスID</td>
<td>スナップショットの元になるボリューム/EC2インスタンスを設定する。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="02-ecr">02. ECR<a class="headerlink" href="#02-ecr" title="Permanent link">&para;</a></h2>
<h3 id="ecr">ECRとは<a class="headerlink" href="#ecr" title="Permanent link">&para;</a></h3>
<p>コンテナイメージやhelmチャートを管理できる。</p>
<p><br></p>
<h3 id="_19">セットアップ<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>可視性</td>
<td>イメージリポジトリをパブリックあるいはプライベートにするかを設定する。</td>
<td>様々なベンダーがパブリックリポジトリでECRイメージを提供している。<br>参考：<a href="https://gallery.ecr.aws/">https://gallery.ecr.aws/</a></td>
</tr>
<tr>
<td>タグのイミュータビリティ</td>
<td>同じタグ名でイメージがプッシュされた場合、バージョンタグを上書きできる/できないかを設定できる。</td>
<td>-</td>
</tr>
<tr>
<td>プッシュ時にスキャン</td>
<td>イメージがプッシュされた時に、コンテナイメージにインストールされているパッケージの脆弱性を検証し、一覧表示する。</td>
<td>参考：<a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/image-scanning.html">https://docs.aws.amazon.com/AmazonECR/latest/userguide/image-scanning.html</a></td>
</tr>
<tr>
<td>暗号化設定</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_20">イメージのプッシュ<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<h4 id="_21">▼ コンテナイメージの場合<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html">https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html</a></p>
<p>（１）ECRにログインする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws ecr get-login-password --region ap-northeast-1 <span class="p">|</span> docker login <span class="se">\</span>
    --username AWS <span class="se">\</span>
    --password-stdin &lt;イメージリポジトリURL&gt;

Login Succeeded
</code></pre></div></td></tr></table></div>
<p>（２）イメージにタグを付与する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># docker tag foo:latest &lt;アカウントID&gt;.dkr.ecr.ap-northeast-1.amazonaws.com/foo-repository:latest</span>
$ docker tag &lt;イメージID&gt; &lt;イメージリポジトリURL&gt;:&lt;バージョンタグ&gt;
</code></pre></div></td></tr></table></div>
<p>（３）ECRにコンテナイメージをプッシュする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># docker push &lt;アカウントID&gt;.dkr.ecr.ap-northeast-1.amazonaws.com/foo-repository:latest</span>
$ docker push &lt;イメージリポジトリURL&gt;:&lt;バージョンタグ&gt;
</code></pre></div></td></tr></table></div>
<h4 id="helm">▼ helmチャートの場合<a class="headerlink" href="#helm" title="Permanent link">&para;</a></h4>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/push-oci-artifact.html">https://docs.aws.amazon.com/AmazonECR/latest/userguide/push-oci-artifact.html</a></p>
<p><br></p>
<h3 id="_22">ライフサイクル<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<h4 id="_23">▼ ライフサイクルポリシー<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<p>ECRのコンテナイメージの有効期間を定義できる。</p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>ルールの優先順位</td>
<td>数字で、ルールの優先度を設定できる。</td>
<td>数字が小さいほど、優先度は高くなる。数字は連続している必要はなく、例えば、<code>10</code>、<code>20</code>、<code>90</code>、のように設定しても良い。</td>
</tr>
<tr>
<td>イメージのステータス</td>
<td>ルールを適用するイメージの条件として、タグの有無や文字列を設定できる。</td>
<td></td>
</tr>
<tr>
<td>一致条件</td>
<td>イメージの有効期間として、同条件に当てはまるイメージが削除される閾値を設定できる。</td>
<td>個数、プッシュされてからの期間、などを閾値として設定できる。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_24">バージョンタグ<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<h4 id="_25">▼ タグ名のベストプラクティス<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<p>Dockerのベストプラクティスに則り、タグ名にlatestを使用しないようにする。その代わりに、コンテナイメージのバージョンごとに異なるタグ名になるようハッシュ値（例：GitHubのコミットID）を使用する。</p>
<p>参考：<a href="https://matsuand.github.io/docs.docker.jp.onthefly/develop/dev-best-practices/">https://matsuand.github.io/docs.docker.jp.onthefly/develop/dev-best-practices/</a></p>
<p><br></p>
<h2 id="03-ecsekselastic-containerkubernetes-service">03. ECS、EKS：Elastic Container/Kubernetes Service<a class="headerlink" href="#03-ecsekselastic-containerkubernetes-service" title="Permanent link">&para;</a></h2>
<h3 id="_26">コントロールプレーンとデータプレーンの対応関係<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>コントロールプレーン（コンテナオーケストレーション環境）</th>
<th>データプレーン（コンテナ実行環境）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECS</td>
<td>EC2、Fargate</td>
<td>単一のOS上でコンテナオーケストレーションを実行する。</td>
</tr>
<tr>
<td>EKS</td>
<td>EC2、Fargate</td>
<td>複数のOS上それぞれでコンテナオーケストレーションを実行する。<br>参考：<a href="https://www.sunnycloud.jp/column/20210315-01/">https://www.sunnycloud.jp/column/20210315-01/</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_27">コントロールプレーン<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<h4 id="_28">▼ コントロールプレーンとは<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<p>コンテナオーケストレーションを実行する環境を提供する。データプレーンのVPC外に存在している。</p>
<h4 id="ecs">▼ ECSの場合<a class="headerlink" href="#ecs" title="Permanent link">&para;</a></h4>
<p>開発者や他のAWSリソースからのアクセスを待ち受けるAPI、データプレーンを管理するコンポーネント、からなる。</p>
<p>参考：<a href="https://aws.amazon.com/jp/blogs/news/under-the-hood-amazon-elastic-container-service-and-aws-fargate-increase-task-launch-rates/">https://aws.amazon.com/jp/blogs/news/under-the-hood-amazon-elastic-container-service-and-aws-fargate-increase-task-launch-rates/</a></p>
<p><img alt="ecs_control-plane" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_control-plane.png" /></p>
<h4 id="eks">▼ EKSの場合<a class="headerlink" href="#eks" title="Permanent link">&para;</a></h4>
<p>開発者や他のAWSリソースからのアクセスを待ち受けるAPI、アクセスをAPIにルーティングするNLB、データプレーンを管理するコンポーネント、からなる。</p>
<p>参考：<a href="https://aws.github.io/aws-eks-best-practices/reliability/docs/controlplane/">https://aws.github.io/aws-eks-best-practices/reliability/docs/controlplane/</a></p>
<p><img alt="eks_control-plane" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks_control-plane.png" /></p>
<p><br></p>
<h3 id="_29">データプレーン<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<h4 id="_30">▼ データプレーンとは<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<p>コンテナの実行環境のこと。『<code>on EC2</code>』『<code>on Fargate</code>』という呼び方は、データプレーンがECSの実行環境（<code>execution environment</code>）の意味合いを持つからである。</p>
<h4 id="ec2_3">▼ EC2の場合<a class="headerlink" href="#ec2_3" title="Permanent link">&para;</a></h4>
<p>EC2インスタンスをホストとして、コンテナを作成する。</p>
<h4 id="fargate">▼ Fargateの場合<a class="headerlink" href="#fargate" title="Permanent link">&para;</a></h4>
<p>マネージドなサーバーをホストとして、コンテナを作成する。実体は、EC2インスタンスをホストとして、コンテナを稼働させている（ドキュメントに記載がないが、AWSサポートに確認済み）。</p>
<p>参考：<a href="https://aws.amazon.com/jp/blogs/news/under-the-hood-fargate-data-plane/">https://aws.amazon.com/jp/blogs/news/under-the-hood-fargate-data-plane/</a></p>
<p><img alt="fargate_data-plane" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/fargate_data-plane.png" /></p>
<p><br></p>
<h2 id="03-02-ecs">03-02. ECSデータプレーン<a class="headerlink" href="#03-02-ecs" title="Permanent link">&para;</a></h2>
<h3 id="ecs_1">ECSクラスター<a class="headerlink" href="#ecs_1" title="Permanent link">&para;</a></h3>
<p>ECSサービスの管理グループ単位のこと。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/clusters.html">https://docs.aws.amazon.com/AmazonECS/latest/userguide/clusters.html</a></p>
<p><img alt="ecs_cluster" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_cluster.png" /></p>
<p><br></p>
<h3 id="ecs_2">ECSサービス<a class="headerlink" href="#ecs_2" title="Permanent link">&para;</a></h3>
<p>ECSタスクの管理グループ単位のこと。ECSタスクへのロードバランシング、タスクの数の維持管理や、リリースの成否の管理を行う。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/service_definition_parameters.html">https://docs.aws.amazon.com/AmazonECS/latest/userguide/service_definition_parameters.html</a></p>
<p><br></p>
<h3 id="ecs_3">ECSタスク<a class="headerlink" href="#ecs_3" title="Permanent link">&para;</a></h3>
<h4 id="ecs_4">▼ ECSタスク<a class="headerlink" href="#ecs_4" title="Permanent link">&para;</a></h4>
<p>コンテナインスタンスの管理グループ単位のこと。ECSタスク定義を基に作成される。</p>
<p><img alt="ecs_task" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_task.png" /></p>
<h4 id="ecs_5">▼ ECSコンテナエージェント<a class="headerlink" href="#ecs_5" title="Permanent link">&para;</a></h4>
<p><img alt="ecs_task-execution-role" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_task-execution-role.png" /></p>
<p>ECSタスク実行ロールを使用して、ECSタスクのライフサイクルを管理する。Fargateの場合、ECSコンテナエージェントがプリインストールされている。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/ecs_ec2_iamrole/">https://dev.classmethod.jp/articles/ecs_ec2_iamrole/</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/under-the-hood-task-networking-for-amazon-ecs/">https://aws.amazon.com/jp/blogs/news/under-the-hood-task-networking-for-amazon-ecs/</a></li>
</ul>
<h4 id="ecs_6">▼ ECSタスク定義<a class="headerlink" href="#ecs_6" title="Permanent link">&para;</a></h4>
<p>ECSタスクをどのような設定値を基に作成するかを設定できる。ECSタスク定義は、バージョンを示す『リビジョンナンバー』で番号づけされる。ECSタスク定義を削除するには、全てのリビジョン番号のECSタスク定義を登録解除する必要がある。</p>
<h4 id="ecs_7">▼ ECSタスクのライフサイクル<a class="headerlink" href="#ecs_7" title="Permanent link">&para;</a></h4>
<p><img alt="ecs_task_life-cycle" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_task_life-cycle.png" /></p>
<p>ECSタスクは、必須コンテナ異常停止時、デプロイ、自動スケーリング、手動操作、の時にライフサイクルを持つ。AWS側の操作が終了した時点でRunningステータスになるが、コンテナの起動に時間がかかるようなアプリケーション（例：SSR）の場合は、Runningステータスであっても使用できる状態ではないことに注意する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-lifecycle.html#lifecycle-states">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-lifecycle.html#lifecycle-states</a></p>
<p>正常停止と異常停止に関わらず、停止理由を確認できる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/stopped-task-errors.html">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/stopped-task-errors.html</a></p>
<p><br></p>
<h3 id="_31">ロール<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<h4 id="_32">▼ サービスロール<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p>ECSサービスがECSタスクを操作するために必要なロールである。サービスリンクロールに含まれ、ECSの作成時に自動的にアタッチされる。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/ecs_fargate_iamrole/">https://dev.classmethod.jp/articles/ecs_fargate_iamrole/</a></li>
<li><a href="https://dev.classmethod.jp/articles/ecs_ec2_iamrole/">https://dev.classmethod.jp/articles/ecs_ec2_iamrole/</a></li>
</ul>
<h4 id="_33">▼ コンテナインスタンスロール<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<p><img alt="ecs_container-instance-role" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_container-instance-role.png" /></p>
<p>コンテナのホストが他のAWSリソースにアクセスするために必要なロールである。Fargateの場合、不要である。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/ecs_fargate_iamrole/">https://dev.classmethod.jp/articles/ecs_fargate_iamrole/</a></li>
<li><a href="https://dev.classmethod.jp/articles/ecs_ec2_iamrole/">https://dev.classmethod.jp/articles/ecs_ec2_iamrole/</a></li>
</ul>
<h4 id="_34">▼ タスクロール<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p><img alt="ecs_task-role" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_task-role.png" /></p>
<p>ECSタスク内のコンテナのアプリケーションが、他のAWSリソースにアクセスするために必要なロールである。アプリケーションにS3やSystems Managerへのアクセス権限を与えたい場合は、タスク実行ロールではなくタスクロールに権限をアタッチする。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/ecs_fargate_iamrole/">https://dev.classmethod.jp/articles/ecs_fargate_iamrole/</a></li>
<li><a href="https://dev.classmethod.jp/articles/ecs_ec2_iamrole/">https://dev.classmethod.jp/articles/ecs_ec2_iamrole/</a></li>
</ul>
<p><strong>＊実装例＊</strong></p>
<p>アプリケーションからCloudWatchログにログを送信するために、ECSタスクロールにカスタマー管理ポリシーをアタッチする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;logs:CreateLogStream&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;logs:PutLogEvents&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;arn:aws:logs:*:*:*&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><strong>＊実装例＊</strong></p>
<p>Parameter Storeから変数を取得するために、ECSタスクロールにインラインポリシーをアタッチする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ssm:GetParameters&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h4 id="_35">▼ タスク実行ロール<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p><img alt="ecs_task-execution-role" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_task-execution-role.png" /></p>
<p>ECSタスク内のECSコンテナエージェントが、他のAWSリソースにアクセスするために必要なロールのこと。AWS管理ポリシーである『<code>AmazonECSTaskExecutionRolePolicy</code>』がアタッチされたロールを、タスクにアタッチする必要がある。このポリシーには、ECRへのアクセス権限の他、CloudWatchログにログを生成するための権限が設定されている。ECSタスク内のコンテナがリソースにアクセスするために必要なタスクロールとは区別すること。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/ecs_fargate_iamrole/">https://dev.classmethod.jp/articles/ecs_fargate_iamrole/</a></li>
<li><a href="https://dev.classmethod.jp/articles/ecs_ec2_iamrole/">https://dev.classmethod.jp/articles/ecs_ec2_iamrole/</a></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ecr:GetAuthorizationToken&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ecr:BatchCheckLayerAvailability&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ecr:GetDownloadUrlForLayer&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ecr:BatchGetImage&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;logs:CreateLogStream&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;logs:PutLogEvents&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><strong>＊実装例＊</strong></p>
<p>datadogエージェントがECSクラスターやコンテナにアクセスできるように、ECSタスク実行ロールにカスタマー管理ポリシーをアタッチする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:ListClusters&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:ListContainerInstances&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:DescribeContainerInstances&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="_36">ネットワークモードとコンテナ間通信<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h3>
<h4 id="none">▼ noneモード<a class="headerlink" href="#none" title="Permanent link">&para;</a></h4>
<p>外部ネットワークが無く、タスクと外と通信できない。</p>
<h4 id="host">▼ hostモード<a class="headerlink" href="#host" title="Permanent link">&para;</a></h4>
<p>EC2でのみ使用できる。Dockerのhostネットワークに相当する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-host">https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-host</a></p>
<p><img alt="network-mode_host-mode" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/network-mode_host-mode.png" /></p>
<h4 id="bridge">▼ bridgeモード<a class="headerlink" href="#bridge" title="Permanent link">&para;</a></h4>
<p>EC2でのみ使用できる。Dockerのbridgeネットワークに相当する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-bridge">https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-bridge</a></p>
<p><img alt="network-mode_host-mode" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/network-mode_host-mode.png" /></p>
<h4 id="awsvpc">▼ awsvpcモード<a class="headerlink" href="#awsvpc" title="Permanent link">&para;</a></h4>
<p>FargateとEC2の両方で使用できる。awsの独自ネットワークモード。タスクはElastic Networkインターフェースと紐付けられ、コンテナではなくタスク単位でプライベートIPアドレスが割り当てられる。Fargateの場合、同じタスクに属するコンテナ間は、localhostインターフェイスというENI経由で通信できるようになる（推測ではあるが、FargateとしてのEC2インスタンスにlocalhostインターフェースが紐付けられる）。これにより、コンテナからコンテナに通信するとき（例：NginxコンテナからPHP-FPMコンテナへのルーティング）は、通信元コンテナにて、通信先のアドレスを『localhost（<code>127.0.0.1</code>）』で指定すれば良い。また、awsvpcモードの独自の仕組みとして、同じECSタスク内であれば、互いにコンテナポートを開放せずとも、インバウンド通信を待ち受けるポートを指定するだけで、コンテナ間で通信できる。例えば、NginxコンテナからPHP-FPMコンテナにリクエストをルーティングするためには、PHP-FPMプロセスが<code>9000</code>番ポートでインバウンド通信を受信し、さらにコンテナが<code>9000</code>番ポートを開放する必要がある。しかし、awsvpcモードではコンテナポートを開放する必要はない。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-awsvpc">https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-networkmode.html#networking-networkmode-awsvpc</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/fargate-task-networking.html">https://docs.aws.amazon.com/AmazonECS/latest/userguide/fargate-task-networking.html</a></li>
</ul>
<p><img alt="network-mode_awsvpc" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/network-mode_awsvpc.png" /></p>
<p><br></p>
<h3 id="ecs_8">マルチECSサービス<a class="headerlink" href="#ecs_8" title="Permanent link">&para;</a></h3>
<h4 id="ecs_9">▼ マルチECSサービスとは<a class="headerlink" href="#ecs_9" title="Permanent link">&para;</a></h4>
<p>ECSクラスターが複数のECSサービスから構成される。マイクロサービスアーキテクチャのアプリケーション群を稼働させる時、Kubernetesを使用するのが基本である。ただし、ECSクラスター内に複数のECSサービスを作成することで、Kubernetesのような構成を実現できる。</p>
<p>参考：<a href="https://tangocode.com/2018/11/when-to-use-lambdas-vs-ecs-docker-containers/">https://tangocode.com/2018/11/when-to-use-lambdas-vs-ecs-docker-containers/</a></p>
<p><img alt="ecs-fargate_microservices" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs-fargate_microservices.png" /></p>
<h4 id="ecs_10">▼ ECSサービスディスカバリー<a class="headerlink" href="#ecs_10" title="Permanent link">&para;</a></h4>
<p>Istioと同様にして、マイクロサービスが他のマイクロサービスにリクエストを送信する時に、Route53を使用してIPアドレスの名前解決を行う。オートスケーリングなどでマイクロサービスのIPアドレスが変更されても、動的にレコードを変更する。</p>
<p>参考：</p>
<ul>
<li><a href="https://practical-aws.dev/p/ecs-service-discovery/">https://practical-aws.dev/p/ecs-service-discovery/</a></li>
<li><a href="https://medium.com/@toddrosner/ecs-service-discovery-1366b8a75ad6">https://medium.com/@toddrosner/ecs-service-discovery-1366b8a75ad6</a></li>
<li><a href="https://dev.classmethod.jp/articles/ecs-service-discovery/">https://dev.classmethod.jp/articles/ecs-service-discovery/</a></li>
</ul>
<p><img alt="ecs_service-discovery" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_service-discovery.png" /></p>
<p><br></p>
<h3 id="_37">プライベートサブネット内からのアウトバウンド通信<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<h4 id="_38">▼ プライベートサブネット内へのデータプレーンの配置<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<p>プライベートサブネット内にデータプレーンを配置した場合、パブリックネットワークやVCP外のAWSリソースにアクセスするために、NAT GatewayやVPCエンドポイントが必要になる。パブリックサブネットに配置すればこれらは不要となるが、パブリックサブネットよりもプライベートサブネットにデータプレーンを配置する方が望ましい。</p>
<h4 id="_39">▼ パブリックネットワークに対する通信<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<p>データプレーンをプライベートサブネットに配置した場合、パブリックネットワークに対してアウトバウンド通信を送信するためには、NAT Gatewayを配置する必要がある。</p>
<h4 id="vpcaws">▼ VPC外のAWSリソースに対する通信<a class="headerlink" href="#vpcaws" title="Permanent link">&para;</a></h4>
<p>データプレーンをプライベートサブネットに配置した場合、VPC外にあるAWSリソース（コントロールプレーン、ECR、S3、Systems Manager、CloudWatch、DynamoDB、など）に対してアウトバウンド通信を送信するためには、NAT GatewayあるいはVPCエンドポイントを配置する必要がある。もしNAT Gatewayを設置したとする。この場合、VPCエンドポイントよりもNAT Gatewayの方が高く、AWSリソースに対する通信でもNAT Gatewayを通過するため、高額料金を請求されてしまう。</p>
<p>参考：<a href="https://zenn.dev/yoshinori_satoh/articles/ecs-fargate-vpc-endpoint">https://zenn.dev/yoshinori_satoh/articles/ecs-fargate-vpc-endpoint</a></p>
<p><img alt="ecs_nat-gateway" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_nat-gateway.png" /></p>
<p>代わりに、VPCエンドポイントを設置する。より低額でデータプレーンがVPC外のAWSリソースのアクセスできるようになる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-connecting-vpc.html#networking-connecting-privatelink">https://docs.aws.amazon.com/AmazonECS/latest/bestpracticesguide/networking-connecting-vpc.html#networking-connecting-privatelink</a></p>
<p><img alt="ecs_control-plane_vpc-endpoint" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_control-plane_vpc-endpoint.png" /></p>
<p><br></p>
<h3 id="_40">ログ転送<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<h4 id="awslogs">▼ awslogsドライバー<a class="headerlink" href="#awslogs" title="Permanent link">&para;</a></h4>
<p>標準出力/標準エラー出力に出力されたログをCloudWatch-APIに送信する。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.docker.com/config/containers/logging/awslogs/">https://docs.docker.com/config/containers/logging/awslogs/</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html#create_awslogs_logdriver_options">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html#create_awslogs_logdriver_options</a></li>
</ul>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>awslogs-group</code></td>
<td>ログ送信先のCloudWatchログのロググループを設定する。</td>
<td></td>
</tr>
<tr>
<td><code>awslogs-datetime-format</code></td>
<td>日時フォーマットを定義し、またこれをログの区切り単位としてログストリームに出力する。</td>
<td>正規表現で設定する必要があり、さらにJSONでは『<code>\</code>』を『<code>\\</code>』にエスケープしなければならない。例えば『<code>\\[%Y-%m-%d %H:%M:%S\\]</code>』となる。<br>参考：<a href="https://docs.docker.com/config/containers/logging/awslogs/#awslogs-datetime-format">https://docs.docker.com/config/containers/logging/awslogs/#awslogs-datetime-format</a></td>
</tr>
<tr>
<td><code>awslogs-region</code></td>
<td>ログ送信先のCloudWatchログのリージョンを設定する。</td>
<td></td>
</tr>
<tr>
<td><code>awslogs-stream-prefix</code></td>
<td>ログ送信先のCloudWatchログのログストリームのプレフィックス名を設定する。</td>
<td>ログストリームには、『<code>&lt;プレフィックス名&gt;/&lt;コンテナ名&gt;/&lt;タスクID&gt;</code>』の形式で送信される。</td>
</tr>
</tbody>
</table>
<h4 id="firelens">▼ FireLensコンテナ<a class="headerlink" href="#firelens" title="Permanent link">&para;</a></h4>
<p>以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://hiroki-it.github.io/tech-notebook-mkdocs/observability/observability_telemetry_fluentbit_firelens.html">https://hiroki-it.github.io/tech-notebook-mkdocs/observability/observability_telemetry_fluentbit_firelens.html</a></p>
<p><br></p>
<h2 id="03-02-02-on-ec2">03-02-02. on EC2<a class="headerlink" href="#03-02-02-on-ec2" title="Permanent link">&para;</a></h2>
<h3 id="ec2ami">EC2インスタンスのAMI<a class="headerlink" href="#ec2ami" title="Permanent link">&para;</a></h3>
<p>任意のEC2インスタンスを使用できるが、AWSが用意している最適化AMIを選んだ方が良い。このAMIには、EC2がECSと連携するために必要なソフトウェアがプリインストールされており、EC2インスタンスをセットアップする手間が省ける。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html</a> </p>
<table>
<thead>
<tr>
<th>AMI名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECS最適化Amazon Linux 2</td>
<td>標準的なEC2インスタンスを作成できる。最も推奨。</td>
</tr>
<tr>
<td>ECS最適化Amazon Linux 2022</td>
<td>Amazon Linux 2よりも先進的な機能を持つEC2インスタンスを作成できる。<br>参考：<a href="https://docs.aws.amazon.com/linux/al2022/ug/compare-al2-to-AL2022.html">https://docs.aws.amazon.com/linux/al2022/ug/compare-al2-to-AL2022.html</a></td>
</tr>
<tr>
<td>ECS最適化Amazon Linux</td>
<td>標準的なEC2インスタンスを作成できる。非推奨であり、Amazon Linux 2を使用した方が良い。</td>
</tr>
<tr>
<td>ECS最適化Amazon Linux 2 arm64</td>
<td>arm64ベースのGravitonプロセッサーが搭載されたEC2インスタンスを作成できる。</td>
</tr>
<tr>
<td>ECS最適化Amazon Linux 2 GPU</td>
<td>GPUが搭載されたEC2インスタンスを作成できる。</td>
</tr>
<tr>
<td>ECS最適化Amazon Linux 2 推定</td>
<td>Amazon EC2 Inf1インスタンスを作成できる。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_41">タスク配置戦略<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h3>
<p>ECSタスクをECSクラスターに配置する時のアルゴリズムを選択できる。</p>
<table>
<thead>
<tr>
<th>戦略</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Spread</td>
<td>ECSタスクを各場所にバランスよく配置する</td>
</tr>
<tr>
<td>Binpack</td>
<td>ECSタスクを<code>1</code>個の場所にできるだけ多く配置する。</td>
</tr>
<tr>
<td>Random</td>
<td>ECSタスクをランダムに配置する。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="03-02-03-on-fargate">03-02-03. on Fargate<a class="headerlink" href="#03-02-03-on-fargate" title="Permanent link">&para;</a></h2>
<h3 id="_42">セットアップ<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h3>
<h4 id="ecs_11">▼ ECSサービス<a class="headerlink" href="#ecs_11" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECSタスク定義</td>
<td>ECSサービスで維持管理するタスクの定義ファミリー名とリビジョン番号を設定する。</td>
<td></td>
</tr>
<tr>
<td>起動タイプ</td>
<td>ECSタスク内のコンテナの起動タイプを設定する。</td>
<td></td>
</tr>
<tr>
<td>プラットフォームのバージョン</td>
<td>ECSコントロールプレーンのバージョンを設定する。</td>
<td>バージョンによって、連携できるAWSリソースが異なる。</td>
</tr>
<tr>
<td>サービスタイプ</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ECSタスクの必要数</td>
<td>非スケーリング時またはデプロイ時のタスク数を設定する。</td>
<td>最小ヘルス率と最大率の設定値に影響する。</td>
</tr>
<tr>
<td>最小ヘルス率</td>
<td>ECSタスクの必要数の設定を<code>100</code>%とし、新しいタスクのデプロイ時に、稼働中タスクの最低合計数を割合で設定する。</td>
<td>例として、タスク必要数が4個だと仮定する。タスクヘルス最小率を50%とすれば、稼働中タスクの最低合計数は2個となる。デプロイ時の既存タスク停止と新タスク起動では、稼働中の既存タスク/新タスクの数が最低合計数未満にならないように制御される。<br>参考：<a href="https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments">https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments</a></td>
</tr>
<tr>
<td>最大率</td>
<td>ECSタスクの必要数の設定を<code>100</code>%とし、新しいタスクのデプロイ時に、稼働中/停止中タスクの最高合計数を割合で設定する。</td>
<td>例として、タスク必要数が4個だと仮定する。タスク最大率を200%とすれば、稼働中/停止中タスクの最高合計数は８個となる。デプロイ時の既存タスク停止と新タスク起動では、稼働中/停止中の既存タスク/新タスクの数が最高合計数を超過しないように制御される。<br>参考：<a href="https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments">https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments</a></td>
</tr>
<tr>
<td>ヘルスチェックの猶予期間</td>
<td>デプロイ時のALB/NLBのヘルスチェックの状態を確認するまでの待機時間を設定する。猶予期間を過ぎても、ALB/NLBのヘルスチェックが失敗していれば、サービスはタスクを停止し、新しいタスクを再起動する。</td>
<td>ALB/NLBではターゲットを登録し、ヘルスチェックを実行するプロセスがある。特にNLBでは、これに時間がかかる。またアプリケーションによっては、コンテナの作成に時間がかかる。そのため、NLBのヘルスチェックが完了する前に、ECSサービスがNLBのヘルスチェックの結果を確認してしまうことがある。例えば、NLBとLaravelを使用する場合は、ターゲット登録とLaravelコンテナの築の時間を加味して、<code>330</code>秒以上を目安とする。例えば、ALBとNuxt.js（SSRモード）を使用する場合は、<code>600</code>秒以上を目安とする。なお、アプリケーションのコンテナ作成にかかる時間は、開発環境での所要時間を参考にする。</td>
</tr>
<tr>
<td>タスクの最小数</td>
<td>スケーリング時のタスク数の最小数を設定する。</td>
<td></td>
</tr>
<tr>
<td>タスクの最大数</td>
<td>スケーリング時のタスク数の最大数を設定する。</td>
<td></td>
</tr>
<tr>
<td>ロードバランシング</td>
<td>ALBでルーティングするコンテナを設定する。</td>
<td></td>
</tr>
<tr>
<td>タスク数</td>
<td>ECSタスクの作成数をいくつに維持するかを設定する。</td>
<td>タスクが何らかの原因で停止した場合、空いているAWSサービスを使用して、タスクが自動的に補填される。</td>
</tr>
<tr>
<td>デプロイメント</td>
<td>ローリングアップデート、ブルー/グリーンデプロイがある。</td>
<td></td>
</tr>
<tr>
<td>サービスロール</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="ecs_12">▼ ECSタスク定義<a class="headerlink" href="#ecs_12" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECSタスク定義名</td>
<td>ECSタスク定義の名前を設定する。</td>
<td></td>
</tr>
<tr>
<td>ネットワークモード</td>
<td>ホストとコンテナ間を接続するネットワーク様式を設定する。</td>
<td></td>
</tr>
<tr>
<td>互換性</td>
<td></td>
<td></td>
</tr>
<tr>
<td>オペレーティングシステムファミリー</td>
<td></td>
<td></td>
</tr>
<tr>
<td>タスクロール</td>
<td>ECSタスク内のコンテナのアプリケーションが、他のAWSリソースにアクセスするために必要なロールを設定する。</td>
<td></td>
</tr>
<tr>
<td>タスク実行ロール</td>
<td>ECSタスク内のECSコンテナエージェントが、他のAWSリソースにアクセスするために必要なロールを設定する。</td>
<td></td>
</tr>
<tr>
<td>タスクメモリ</td>
<td>ECSタスク当たりのコンテナの合計メモリサイズを設定する。</td>
<td>ECSタスク内のコンテナに割り振ることを想定し、やや多めにメモリを設定した方が良い。</td>
</tr>
<tr>
<td>タスクCPU</td>
<td>ECSタスク当たりのコンテナの合計CPUサイズを設定する。</td>
<td>・ECSタスク内のコンテナに割り振ることを想定し、やや多めにメモリを設定した方が良い。<br>・CPUごとに使用できるメモリサイズに違いがあり、大きなCPUほど小さなメモリを使用できない。</td>
</tr>
<tr>
<td>コンテナ定義</td>
<td>ECSタスク内のコンテナを設定する。</td>
<td>JSONをインポートしても設定できる。</td>
</tr>
<tr>
<td>サービス統合</td>
<td></td>
<td></td>
</tr>
<tr>
<td>プロキシ</td>
<td></td>
<td></td>
</tr>
<tr>
<td>FireLens統合</td>
<td>FireLensコンテナを使用する場合に有効化する。</td>
<td></td>
</tr>
<tr>
<td>ボリューム</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="_43">▼ コンテナ定義<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<p>ECSタスク内のコンテナ1つに対して、環境を設定する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/task_definition_parameters.html">https://docs.aws.amazon.com/AmazonECS/latest/userguide/task_definition_parameters.html</a></p>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>対応するdockerコマンドオプション</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpu</td>
<td><code>--cpus</code></td>
<td>タスク全体に割り当てられたメモリ（タスクメモリ）のうち、該当のコンテナに最低限割り当てるCPUユニット数を設定する。cpuReservationという名前になっていないことに注意する。 CPUユニット数の比率に基づいて、タスク全体のCPUが各コンテナに割り当てられる。『ソフト制限』ともいう。</td>
<td>参考：<br>・<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_environment">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_environment</a><br>・<a href="https://qiita.com/_akiyama_/items/e9760dd61d94b8031247">https://qiita.com/_akiyama_/items/e9760dd61d94b8031247</a></td>
</tr>
<tr>
<td>dnsServers</td>
<td><code>--dns</code></td>
<td>コンテナが名前解決に使用するDNSサーバーのIPアドレスを設定する。</td>
<td></td>
</tr>
<tr>
<td>essential</td>
<td></td>
<td>コンテナが必須か否かを設定する。</td>
<td>・<code>true</code>の場合、コンテナが停止すると、タスクに含まれる全コンテナが停止する。<br><code>false</code>の場合、コンテナが停止しても、その他のコンテナは停止しない。</td>
</tr>
<tr>
<td>healthCheck<br>(command)</td>
<td><code>--health-cmd</code></td>
<td>ホストからFargateに対して、<code>curl</code>コマンドによるリクエストを送信し、レスポンス内容を確認。</td>
<td></td>
</tr>
<tr>
<td>healthCheck<br>(interval)</td>
<td><code>--health-interval</code></td>
<td>ヘルスチェックの間隔を設定する。</td>
<td></td>
</tr>
<tr>
<td>healthCheck<br>(retries)</td>
<td><code>--health-retries</code></td>
<td>ヘルスチェックを成功と見なす回数を設定する。</td>
<td></td>
</tr>
<tr>
<td>hostName</td>
<td><code>--hostname</code></td>
<td>コンテナにホスト名を設定する。</td>
<td></td>
</tr>
<tr>
<td>image</td>
<td></td>
<td>ECRのURLを設定する。</td>
<td>指定できるURLの記法は、Dockerfileの<code>FROM</code>と同じである。<br>参考：<a href="https://hiroki-it.github.io/tech-notebook-mkdocs/infrastructure_as_code/infrastructure_as_code_container_docker_dockerfile.html">https://hiroki-it.github.io/tech-notebook-mkdocs/infrastructure_as_code/infrastructure_as_code_container_docker_dockerfile.html</a></td>
</tr>
<tr>
<td>logConfiguration<br>(logDriver)</td>
<td><code>--log-driver</code></td>
<td>ログドライバーを指定することにより、ログの出力先を設定する。</td>
<td>Dockerのログドライバーにおおよそ対応しており、Fargateであれば『awslogs、awsfirelens、splunk』に設定できる。EC2であれば『awslogs、json-file、syslog、journald、fluentd、gelf、logentries』を設定できる。</td>
</tr>
<tr>
<td>logConfiguration<br>(options)</td>
<td><code>--log-opt</code></td>
<td>ログドライバーに応じて、詳細な設定を行う。</td>
<td></td>
</tr>
<tr>
<td>portMapping</td>
<td><code>--publish</code><br><code>--expose</code></td>
<td>ホストとFargateのアプリケーションのポート番号をマッピングし、ポートフォワーディングを行う。</td>
<td><code>containerPort</code>のみを設定し、<code>hostPort</code>は設定しなければ、EXPOSEとして定義できる。<br>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_PortMapping.html">https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_PortMapping.html</a></td>
</tr>
<tr>
<td>secrets<br>(volumesFrom)</td>
<td></td>
<td>Parameter Storeから出力する環境変数を設定する。</td>
<td></td>
</tr>
<tr>
<td>memory</td>
<td><code>--memory</code></td>
<td>コンテナのメモリサイズの閾値を設定し、これを超えた場合にコンテナを停止する『ハード制限』ともいう。</td>
<td>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_memory">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_memory</a></td>
</tr>
<tr>
<td>memoryReservation</td>
<td><code>--memory-reservation</code></td>
<td>タスク全体に割り当てられたメモリ（タスクメモリ）のうち、該当のコンテナに最低限割り当てるメモリ分を設定する。『ソフト制限』ともいう。</td>
<td>参考：<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_memory">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_memory</a></td>
</tr>
<tr>
<td>mountPoints</td>
<td></td>
<td>隠蔽されたホストとコンテナの間でボリュームマウントを実行する。Fargateは、脆弱性とパフォーマンスの観点で、バインドマウントに対応していない。</td>
<td>参考：<a href="https://hiroki-it.github.io/tech-notebook-mkdocs/virtualization/virtualization_container_docker.html">https://hiroki-it.github.io/tech-notebook-mkdocs/virtualization/virtualization_container_docker.html</a></td>
</tr>
<tr>
<td>ulimit</td>
<td>Linuxコマンドの<br><code>--ulimit</code>に相当</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="ip">IPアドレス<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h3>
<h4 id="ecsip">▼ ECSタスクのIPアドレス<a class="headerlink" href="#ecsip" title="Permanent link">&para;</a></h4>
<p>ECSタスクごとに異なるプライベートIPが割り当てられる。このIPアドレスに対して、ALBはルーティングを行う。</p>
<h4 id="fargateip">▼ FargateのIPアドレス<a class="headerlink" href="#fargateip" title="Permanent link">&para;</a></h4>
<p><img alt="NatGatewayを介したFargateから外部サービスへのアウトバウンド通信" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/NatGatewayを介したFargateから外部サービスへのアウトバウンド通信.png" /></p>
<p>Fargateは動的パブリックIPアドレス（Fargateの再作成後に変化するIPアドレス）を持ち、固定パブリックIPアドレスであるElastic IPアドレスを設定できない。アウトバウンド通信の先にある外部サービスが、セキュリティ上で静的なIPアドレスを要求する場合、アウトバウンド通信（パブリックネットワーク向き通信）時に送信元パケットに付加されるIPアドレスが動的になり、リクエストできなくなってしまう。そこで、Fargateのアウトバウンド通信が、Elastic IPアドレスを持つNAT Gatewayを経由する（Fargateは、パブリックサブネットとプライベートサブネットのどちらに置いても良い）。これによって、NAT GatewayのElastic IPアドレスが送信元パケットに付加されるため、Fargateの送信元IPアドレスを見かけ上静的に扱えるようになる。</p>
<p>参考：<a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/ecs-fargate-static-elastic-ip-address/">https://aws.amazon.com/jp/premiumsupport/knowledge-center/ecs-fargate-static-elastic-ip-address/</a></p>
<p><br></p>
<h3 id="ecs_13">ECSタスクの一時起動<a class="headerlink" href="#ecs_13" title="Permanent link">&para;</a></h3>
<h4 id="_44">▼ マイグレーション<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<p>現在起動中のECSタスクとは別に、新しいタスクを一時的に起動する。CI/CDツールで実行する以外に、ローカルマシンから手動で実行する場合もある。起動時に、<code>overrides</code>オプションを使用して、指定したECSタスク定義のコンテナ設定を上書きできる。正規表現で設定する必要があり、さらにJSONでは『<code>\</code>』を『<code>\\</code>』にエスケープしなければならない。コマンドが実行された後に、タスクは自動的にStopped状態になる。</p>
<p><strong>＊実装例＊</strong></p>
<p>LaravelのSeederコマンドやロールバックコマンドを、ローカルマシンから実行する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">set</span> -x

<span class="nb">echo</span> <span class="s2">&quot;Set Variables&quot;</span>
<span class="nv">SERVICE_NAME</span><span class="o">=</span><span class="s2">&quot;prd-foo-ecs-service&quot;</span>
<span class="nv">CLUSTER_NAME</span><span class="o">=</span><span class="s2">&quot;prd-foo-ecs-cluster&quot;</span>
<span class="nv">TASK_NAME</span><span class="o">=</span><span class="s2">&quot;prd-foo-ecs-task-definition&quot;</span>
<span class="nv">SUBNETS_CONFIG</span><span class="o">=</span><span class="k">$(</span>aws ecs describe-services <span class="se">\</span>
  --cluster <span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span> <span class="se">\</span>
  --services <span class="si">${</span><span class="nv">SERVICE_NAME</span><span class="si">}</span> <span class="se">\</span>
  --query <span class="s2">&quot;services[].deployments[].networkConfiguration[].awsvpcConfiguration[].subnets[]&quot;</span><span class="k">)</span>
<span class="nv">SGS_CONFIG</span><span class="o">=</span><span class="k">$(</span>aws ecs describe-services <span class="se">\</span>
  --cluster <span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span> <span class="se">\</span>
  --services <span class="si">${</span><span class="nv">SERVICE_NAME</span><span class="si">}</span> <span class="se">\</span>
  --query <span class="s2">&quot;services[].deployments[].networkConfiguration[].awsvpcConfiguration[].securityGroups[]&quot;</span><span class="k">)</span>

<span class="c1"># 実行したいコマンドをoverridesに設定する。</span>
<span class="nb">echo</span> <span class="s2">&quot;Run Task&quot;</span>
<span class="nv">TASK_ARN</span><span class="o">=</span><span class="k">$(</span>aws ecs run-task <span class="se">\</span>
  --launch-type FARGATE <span class="se">\</span>
  --cluster <span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span> <span class="se">\</span>
  --platform-version <span class="s2">&quot;1.4.0&quot;</span> <span class="se">\</span>
  --network-configuration <span class="s2">&quot;awsvpcConfiguration={subnets=</span><span class="si">${</span><span class="nv">SUBNETS_CONFIG</span><span class="si">}</span><span class="s2">,securityGroups=</span><span class="si">${</span><span class="nv">SGS_CONFIG</span><span class="si">}</span><span class="s2">}&quot;</span> <span class="se">\</span>
  --task-definition <span class="si">${</span><span class="nv">TASK_NAME</span><span class="si">}</span> <span class="se">\</span>
  --overrides <span class="s1">&#39;{\&quot;containerOverrides\&quot;: [{\&quot;name\&quot;: \&quot;laravel-container\&quot;,\&quot;command\&quot;: [\&quot;php\&quot;, \&quot;artisan\&quot;, \&quot;db:seed\&quot;, \&quot;--class=DummySeeder\&quot;, \&quot;--force\&quot;]}]}&#39;</span> <span class="se">\</span>
  --query <span class="s2">&quot;tasks[0].taskArn&quot;</span> <span class="p">|</span> tr -d <span class="s2">&quot;&quot;&quot;)</span>

<span class="s2">echo &quot;</span>Wait <span class="k">until</span> task stopped<span class="s2">&quot;</span>
<span class="s2">aws ecs wait tasks-stopped \</span>
<span class="s2">  --cluster </span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="s2"> \</span>
<span class="s2">  --tasks </span><span class="si">${</span><span class="nv">TASK_ARN</span><span class="si">}</span><span class="s2"></span>

<span class="s2">echo &quot;</span>Get task result<span class="s2">&quot;</span>
<span class="s2">RESULT=</span><span class="k">$(</span>aws ecs describe-tasks <span class="se">\</span>
  --cluster <span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span> <span class="se">\</span>
  --tasks <span class="si">${</span><span class="nv">TASK_ARN</span><span class="si">}</span><span class="k">)</span><span class="s2"></span>
<span class="s2">echo </span><span class="si">${</span><span class="nv">RESULT</span><span class="si">}</span><span class="s2"></span>

<span class="s2">EXIT_STATUS=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">RESULT</span><span class="si">}</span> <span class="p">|</span> jq .tasks<span class="o">[</span><span class="m">0</span><span class="o">]</span>.containers<span class="o">[</span><span class="m">0</span><span class="o">]</span>.exitStatus<span class="k">)</span><span class="s2"></span>
<span class="s2">echo exitStatus </span><span class="si">${</span><span class="nv">EXIT_STATUS</span><span class="si">}</span><span class="s2"></span>
<span class="s2">exit </span><span class="si">${</span><span class="nv">EXIT_STATUS</span><span class="si">}</span><span class="s2"></span>
</code></pre></div></td></tr></table></div>
<p>なお、実行IAMユーザーを作成し、ECSタスクを起動できる最低限の権限をアタッチする。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;iam:PassRole&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:RunTask&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:DescribeServices&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:DescribeTasks&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:ecs:*:&lt;アカウントID&gt;:service/*&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:ecs:*:&lt;アカウントID&gt;:task/*&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:ecs:*:&lt;アカウントID&gt;:task-definition/*&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:iam::&lt;アカウントID&gt;:role/*&quot;</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="ecs_14">ECSタスクのデプロイ手法<a class="headerlink" href="#ecs_14" title="Permanent link">&para;</a></h3>
<h4 id="_45">▼ ローリングアップデート<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p><img alt="rolling-update" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/rolling-update.png" /></p>
<p>参考：<a href="https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments/">https://toris.io/2021/04/speeding-up-amazon-ecs-container-deployments/</a></p>
<ol>
<li>最小ヘルス率の設定値を基に、ローリングアップデート時の稼働中タスクの最低合計数が決定される。</li>
<li>最大率の設定値を基に、ローリングアップデート時の稼働中/停止中タスクの最高合計数が決まる</li>
<li>ECSは、既存タスクを稼働中のまま、新タスクを最高合計数いっぱいまで作成する。</li>
<li>ECSは、猶予期間後にALB/NLBによる新タスクに対するヘルスチェックの結果を確認する。ヘルスチェックが成功していれば、既存タスクを停止する。ただし、最小ヘルス率によるタスクの最低合計数が保たれる。</li>
<li>『新タスクの起動』と『ヘルスチェック確認後の既存タスクの停止』のプロセスが繰り返し実行され、徐々に既存タスクが新タスクに置き換わる。</li>
<li>全ての既存タスクが新タスクに置き換わる。</li>
</ol>
<h4 id="_46">▼ ブルー/グリーンデプロイメント<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p>CodeDeployを使用してデプロイを行う。</p>
<p><br></p>
<h3 id="fargatevpcaws">プライベートサブネット内のFargateからVPC外のAWSリソースへのアクセス<a class="headerlink" href="#fargatevpcaws" title="Permanent link">&para;</a></h3>
<p><img alt="ecs_vpc-endpoint" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ecs_vpc-endpoint.png" /></p>
<table>
<thead>
<tr>
<th>VPCエンドポイントの接続先</th>
<th>プライベートDNS名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CloudWatchログ</td>
<td><code>logs.ap-northeast-1.amazonaws.com</code></td>
<td>ECSコンテナのログをPOSTリクエストを送信するため。</td>
</tr>
<tr>
<td>ECR</td>
<td><code>api.ecr.ap-northeast-1.amazonaws.com</code><br><code>*.dkr.ecr.ap-northeast-1.amazonaws.com</code></td>
<td>イメージのGETリクエストを送信するため。</td>
</tr>
<tr>
<td>S3</td>
<td>なし</td>
<td>イメージのレイヤーをPOSTリクエストを送信するため</td>
</tr>
<tr>
<td>Parameter Store</td>
<td><code>ssm.ap-northeast-1.amazonaws.com</code></td>
<td>Parameter StoreにGETリクエストを送信するため。</td>
</tr>
<tr>
<td>Secrets Manager</td>
<td><code>ssmmessage.ap-northeast-1.amazonaws.com</code></td>
<td>Secrets Managerの機能を使用するため。</td>
</tr>
</tbody>
</table>
<p>プライベートサブネット内のFargateからVPC外のAWSリソース（コントロールプレーン、ECR、S3、Systems Manager、CloudWatch、DynamoDB、など）にアクセスする場合、専用のVPCエンドポイントを設け、これに対してアウトバウンド通信を行うようにすると良い。NAT GatewayとVPCエンドポイントの両方を作成している場合、ルートテーブルでは、VPCエンドポイントへのアウトバウンド通信の方が優先される。そのため、NAT Gatewayがある状態でVPCエンドポイントを作成すると、接続先が自動的に変わってしまうことに注意する。注意点として、パブリックネットワークにアウトバウンド通信を送信する場合は、VPCエンドポイントだけでなくNAT Gatewayも作成する必要がある。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/vpc-endpoints.html#ecs-vpc-endpoint-ecsexec">https://docs.aws.amazon.com/AmazonECS/latest/userguide/vpc-endpoints.html#ecs-vpc-endpoint-ecsexec</a></li>
<li><a href="https://zenn.dev/yoshinori_satoh/articles/ecs-fargate-vpc-endpoint">https://zenn.dev/yoshinori_satoh/articles/ecs-fargate-vpc-endpoint</a></li>
<li><a href="https://dev.classmethod.jp/articles/vpc-endpoint-gateway-type/">https://dev.classmethod.jp/articles/vpc-endpoint-gateway-type/</a></li>
</ul>
<p><br></p>
<h3 id="fargate_1">Fargate上のコンテナへの接続<a class="headerlink" href="#fargate_1" title="Permanent link">&para;</a></h3>
<h4 id="session-managerecs-exec">▼ Session Managerを使用したECS Exec<a class="headerlink" href="#session-managerecs-exec" title="Permanent link">&para;</a></h4>
<p><img alt="fargate_ecs-exec" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/fargate_ecs-exec.png" /></p>
<p>Session Managerを使用してECSタスク内のコンテナに接続し、コンテナのログインシェルを起動する。System Managerを使用してコンテナに接続する場合、コンテナのホストにsystems-managerエージェントをインストールしておく必要がある。ただし、FargateとしてのEC2インスタンスには、systems-managerエージェントがプリインストールされているため、これは不要である。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AmazonECS/latest/userguide/ecs-exec.html">https://docs.aws.amazon.com/AmazonECS/latest/userguide/ecs-exec.html</a></li>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-setting-up-messageAPIs.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-setting-up-messageAPIs.html</a></li>
<li><a href="https://qiita.com/Shohei_Miwa/items/6e04c9b7f4c0c862eb9e">https://qiita.com/Shohei_Miwa/items/6e04c9b7f4c0c862eb9e</a></li>
</ul>
<p>（１）ECSサービスで、ECS-Execオプションを有効化する。</p>
<p>（２）VPCエンドポイントにて、ssmmessagesエンドポイントを作成する。</p>
<p>（３）ECSタスク実行ロールにIAMポリシーを付与する。これにより、ECSタスクがSession Managerにアクセスできるようになる。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="c1"># ssmmessages APIへのアクセス権限</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ssmmessages:CreateControlChannel&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ssmmessages:CreateDataChannel&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ssmmessages:OpenControlChannel&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;ssmmessages:OpenDataChannel&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（４）ECS Execを実行するユーザーに、実行権限のポリシーを付与する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2012-10-17&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Statement&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Effect&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Allow&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Action&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;ecs:ExecuteCommand&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;Resource&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:ecs:*:&lt;アカウントID&gt;:cluster/*&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">                </span><span class="s">&quot;arn:aws:ecs:*:&lt;アカウントID&gt;:task/*&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（５）事前の設定がなされているかどうかをecs-exec-checkerスクリプトを実行して確認する。</p>
<p>参考：<a href="https://github.com/aws-containers/amazon-ecs-exec-checker">https://github.com/aws-containers/amazon-ecs-exec-checker</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nv">ECS_CLUSTER_NAME</span><span class="o">=</span>prd-foo-ecs-cluster
<span class="nv">ECS_TASK_ID</span><span class="o">=</span>bar

bash &lt;<span class="o">(</span>curl -Ls https://raw.githubusercontent.com/aws-containers/amazon-ecs-exec-checker/main/check-ecs-exec.sh<span class="o">)</span> <span class="nv">$ECS_CLUSTER_NAME</span> <span class="nv">$ECS_TASK_ID</span>
</code></pre></div></td></tr></table></div>
<p>（６）ECSタスク内のコンテナに接続し、コンテナのログインシェルを起動する。bashを実行する時に、『<code>/bin/bash</code>』や『<code>/bin/sh</code>』で指定すると、binより上のパスもECSに送信されてしまう。例えば、Windowsなら『<code>C:/Program Files/Git/usr/bin/bash</code>』が送信される。これはCloudTrailでExecuteCommandイベントとして確認できる。ECSコンテナ内ではbashへのパスが異なるため、接続に失敗する。そのため、bashを直接的に指定する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">set</span> -xe

<span class="nv">ECS_CLUSTER_NAME</span><span class="o">=</span>prd-foo-ecs-cluster
<span class="nv">ECS_TASK_ID</span><span class="o">=</span>bar
<span class="nv">ECS_CONTAINER_NAME</span><span class="o">=</span>laravel

aws ecs execute-command <span class="se">\</span>
    --cluster <span class="nv">$ECS_CLUSTER_NAME</span> <span class="se">\</span>
    --task <span class="nv">$ECS_TASK_ID</span> <span class="se">\</span>
    --container <span class="nv">$ECS_CONTAINER_NAME</span> <span class="se">\</span>
    --interactive <span class="se">\</span>
    --debug <span class="se">\</span>
    --command <span class="s2">&quot;bash&quot;</span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h2 id="03-03-eks">03-03. EKSデータプレーン<a class="headerlink" href="#03-03-eks" title="Permanent link">&para;</a></h2>
<h3 id="_47">セットアップ<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h3>
<h4 id="eks-cluster">▼ EKS Cluster<a class="headerlink" href="#eks-cluster" title="Permanent link">&para;</a></h4>
<p>（１）AWS CLIにクレデンシャル情報を設定する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws configure
</code></pre></div></td></tr></table></div>
<p>（２）EKSのコンテキストを作成する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html">https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws eks update-kubeconfig --region ap-northeast-1 --name foo-eks-cluster
</code></pre></div></td></tr></table></div>
<p>（３）kubectlコマンドの宛先を、EKSのkube-apiserverに変更する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#deploy-dashboard">https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#deploy-dashboard</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl config use-context &lt;ClusterのARN&gt;
</code></pre></div></td></tr></table></div>
<h4 id="vpc">▼ VPC<a class="headerlink" href="#vpc" title="Permanent link">&para;</a></h4>
<p>EKS Fargate Nodeはプライベートサブネットで稼働する。この時、パブリックネットワークにあるレジストリから、IstioやArgoCDのコンテナイメージをプルできるように、EKS Fargate NodeとInternet Gateway間のネットワークを繋げる必要がある。そのために、パブリックサブネットにNAT Gatewayを置く。</p>
<p><br></p>
<h3 id="eks_1">EKSの仕組み<a class="headerlink" href="#eks_1" title="Permanent link">&para;</a></h3>
<h4 id="ekskubernetes">▼ EKSとKubernetesの対応<a class="headerlink" href="#ekskubernetes" title="Permanent link">&para;</a></h4>
<p>参考：<a href="https://zenn.dev/yoshinori_satoh/articles/2021-02-13-eks-ecs-compare">https://zenn.dev/yoshinori_satoh/articles/2021-02-13-eks-ecs-compare</a></p>
<p><img alt="eks" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks.png" /></p>
<table>
<thead>
<tr>
<th>Kubernetes上でのリソース名</th>
<th>EKS上でのリソース名</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster</td>
<td>EKS Cluster</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/clusters.html">https://docs.aws.amazon.com/eks/latest/userguide/clusters.html</a></td>
</tr>
<tr>
<td>Ingress</td>
<td>ALB Ingress</td>
<td>AWS LBコントローラーによって、自動的に作成される。<br>参考：<br>・<a href="https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html">https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html</a><br>・<a href="https://blog.linkode.co.jp/entry/2020/06/26/095917#AWS-ALB-Ingress-Controller-for-Kubernetes">https://blog.linkode.co.jp/entry/2020/06/26/095917#AWS-ALB-Ingress-Controller-for-Kubernetes</a></td>
</tr>
<tr>
<td>Ingressコントローラー</td>
<td>AWS LBコントローラー</td>
<td>参考：<a href="https://aws.amazon.com/jp/blogs/news/using-alb-ingress-controller-with-amazon-eks-on-fargate/">https://aws.amazon.com/jp/blogs/news/using-alb-ingress-controller-with-amazon-eks-on-fargate/</a></td>
</tr>
<tr>
<td></td>
<td>API Gateway＋NLB</td>
<td>参考：<a href="https://aws.amazon.com/jp/blogs/news/api-gateway-as-an-ingress-controller-for-eks/">https://aws.amazon.com/jp/blogs/news/api-gateway-as-an-ingress-controller-for-eks/</a></td>
</tr>
<tr>
<td>マスターNode</td>
<td>EKSコントロールプレーン</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/platform-versions.html">https://docs.aws.amazon.com/eks/latest/userguide/platform-versions.html</a></td>
</tr>
<tr>
<td>ワーカーNode</td>
<td>Fargate Node、EC2 Node</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-compute.html">https://docs.aws.amazon.com/eks/latest/userguide/eks-compute.html</a></td>
</tr>
<tr>
<td>PersistentVolume</td>
<td>EBS、EFS</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/storage.html">https://docs.aws.amazon.com/eks/latest/userguide/storage.html</a></td>
</tr>
<tr>
<td>Secret</td>
<td>System Manager</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/manage-secrets.html">https://docs.aws.amazon.com/eks/latest/userguide/manage-secrets.html</a></td>
</tr>
<tr>
<td>kube-dns</td>
<td>CoreDNS</td>
<td></td>
</tr>
<tr>
<td>kube-proxy</td>
<td>kube-proxy</td>
<td></td>
</tr>
<tr>
<td>種々のCNIプラグイン</td>
<td>aws-nodeコンテナ</td>
<td>VPCのIPアドレスをPodに割り当て、Clusterネットワーク内にある通信がPodに接続できるようにする。<br>参考：<br>・<a href="https://docs.aws.amazon.com/eks/latest/userguide/pod-networking.html">https://docs.aws.amazon.com/eks/latest/userguide/pod-networking.html</a><br>・<a href="https://tech-blog.optim.co.jp/entry/2021/11/10/100000">https://tech-blog.optim.co.jp/entry/2021/11/10/100000</a></td>
</tr>
<tr>
<td>これら以外のリソース</td>
<td>なし</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="eks-cluster_1">EKS Cluster<a class="headerlink" href="#eks-cluster_1" title="Permanent link">&para;</a></h3>
<h4 id="eks-cluster_2">▼ EKS Clusterとは<a class="headerlink" href="#eks-cluster_2" title="Permanent link">&para;</a></h4>
<p>Fargate NodeやEC2 Nodeの管理グループ単位のこと。KubernetesのClusterに相当する。</p>
<p>参考：<a href="https://www.sunnycloud.jp/column/20210315-01/">https://www.sunnycloud.jp/column/20210315-01/</a></p>
<h4 id="_48">▼ セットアップ<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>名前</td>
<td>クラスターの名前を設定する。</td>
<td></td>
</tr>
<tr>
<td>Kubernetesバージョン</td>
<td>EKS上で稼働するKubernetesのバージョンを設定する。</td>
<td>EKSが対応できるKubernetesのバージョンは以下を参考にせよ。<br>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/platform-versions.html">https://docs.aws.amazon.com/eks/latest/userguide/platform-versions.html</a></td>
</tr>
<tr>
<td>クラスターサービスロール</td>
<td>EKS Clusterのサービスリンクロールを設定する。</td>
<td>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/service_IAM_role.html">https://docs.aws.amazon.com/eks/latest/userguide/service_IAM_role.html</a></td>
</tr>
<tr>
<td>シークレット</td>
<td>Secretに保持するデータをAWS KMSで暗号化するかどうかを設定する。</td>
<td>AWS KMSについては、以下のリンクを参考にせよ。<br>参考：<a href="https://hiroki-it.github.io/tech-notebook-mkdocs/cloud_computing/cloud_computing_aws_4.html">https://hiroki-it.github.io/tech-notebook-mkdocs/cloud_computing/cloud_computing_aws_4.html</a></td>
</tr>
<tr>
<td>VPC、サブネット</td>
<td>ENIを配置するサブネットを設定する。</td>
<td>複数のAZにまたがっている必要がある。</td>
</tr>
<tr>
<td>クラスターセキュリティグループ</td>
<td>EKS Clusterのセキュリティグループを設定する。</td>
<td>インバウンドとアウトバウンドの両方のルールで、全てのIPアドレスを許可する必要がある。このセキュリティグループは、追加のセキュリティグループとして設定され、別途、AWSによって<code>eks-cluster-sg-&lt;EKS Cluster名&gt;</code>というセキュリティグループも自動設定される。<br>参考：<a href="https://yuutookun.hatenablog.com/entry/fargate_for_eks">https://yuutookun.hatenablog.com/entry/fargate_for_eks</a></td>
</tr>
<tr>
<td>クラスターIPアドレスファミリー</td>
<td></td>
<td></td>
</tr>
<tr>
<td>CIDRブロック</td>
<td></td>
<td></td>
</tr>
<tr>
<td>クラスターエンドポイントアクセス</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ネットワークアドオン</td>
<td></td>
<td></td>
</tr>
<tr>
<td>コントロールプレーンのログ</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="vpc_1">プライベートサブネット内のデータプレーンへのVPC外からのインバウンド通信<a class="headerlink" href="#vpc_1" title="Permanent link">&para;</a></h3>
<h4 id="pod">▼ Podへのインバウンド通信<a class="headerlink" href="#pod" title="Permanent link">&para;</a></h4>
<p>EKSでは、Podをプライベートサブネットに配置する必要がある。そのため、パブリックネットワークからのインバウンド通信をAWS LBコントローラーで受信し、ALB Ingressを使用してPodにルーティングする。</p>
<p>参考：<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/deploy-a-grpc-based-application-on-an-amazon-eks-cluster-and-access-it-with-an-application-load-balancer.html">https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/deploy-a-grpc-based-application-on-an-amazon-eks-cluster-and-access-it-with-an-application-load-balancer.html</a></p>
<p><img alt="eks_architecture" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks_architecture.png" /></p>
<h4 id="_49">▼ コントロールプレーンへのインバウンド通信<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p>コントロールプレーンでは、<code>kubectl</code> コマンドのエンドポイントとしてNLBが配置されている。VPC外からNLBへの<code>443</code>番ポートに対するアクセスはデフォルトでは許可されているが、拒否するように設定できる。もし拒否した場合、このNLBは閉じられ、VPC内からしか<code>443</code>番ポートでコントロールプレーンにアクセスできなくなる。この状態でコントロールプレーンにアクセスできるようにする方法としては、以下のパターンがある。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-endpoint.html#private-access">https://docs.aws.amazon.com/eks/latest/userguide/cluster-endpoint.html#private-access</a></li>
<li><a href="https://note.com/tyrwzl/n/nf28cd4372b18">https://note.com/tyrwzl/n/nf28cd4372b18</a></li>
<li><a href="https://zenn.dev/yoshinori_satoh/articles/eks-kubectl-instance">https://zenn.dev/yoshinori_satoh/articles/eks-kubectl-instance</a></li>
</ul>
<table>
<thead>
<tr>
<th>接続元パターン</th>
<th>接続方法パターン</th>
</tr>
</thead>
<tbody>
<tr>
<td>ローカルマシン</td>
<td>Session Manager</td>
</tr>
<tr>
<td>VPC内の踏み台EC2インスタンス</td>
<td>Session Manager、SSH</td>
</tr>
<tr>
<td>VPC内のCloud9</td>
<td>Session Manager、SSH</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_50">プライベートサブネット内のデータプレーンからのアウトバウンド通信<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h3>
<h4 id="vpcaws_1">▼ VPC外の他のAWSリソースへのアウトバウンド通信<a class="headerlink" href="#vpcaws_1" title="Permanent link">&para;</a></h4>
<p>EKSでは、Podをプライベートサブネットに配置する必要がある。プライベートサブネットにを配置した場合、VPC外にあるAWSリソース（ECR、S3、Systems Manager、CloudWatch、DynamoDB、など）に対してアウトバウンド通信を送信するためには、NAT GatewayまたはVPCエンドポイントを配置する必要がある。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/network_reqs.html">https://docs.aws.amazon.com/eks/latest/userguide/network_reqs.html</a></p>
<p>以下のようなエラーでPodが起動しない場合、Podが何らかの理由でイメージをプルできない可能性がある。また、Podが作成されない限り、Nodeも作成されないことに注意する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Pod provisioning timed out (will retry) for pod
</code></pre></div></td></tr></table></div>
<h4 id="vpc_2">▼ VPC外のコントロールプレーンへのアウトバウンド通信<a class="headerlink" href="#vpc_2" title="Permanent link">&para;</a></h4>
<p>EKS Clusterを作成すると、ENIが作成される。これにより、データプレーンがVPC外のコントロールプレーンと通信できるようになる。執筆時点（2022/05/27）では、データプレーンがコントロールプレーンと通信するためには、VPCエンドポイントではなくNAT Gatewayを配置する必要がある。</p>
<p>参考：</p>
<ul>
<li><a href="https://dev.classmethod.jp/articles/eks_basic/">https://dev.classmethod.jp/articles/eks_basic/</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/de-mystifying-cluster-networking-for-amazon-eks-worker-nodes/">https://aws.amazon.com/jp/blogs/news/de-mystifying-cluster-networking-for-amazon-eks-worker-nodes/</a></li>
</ul>
<p><br></p>
<h3 id="node">マルチNode<a class="headerlink" href="#node" title="Permanent link">&para;</a></h3>
<p>マルチNodeを作成する場合、AZごとにNodeを作成する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-networking.html">https://docs.aws.amazon.com/eks/latest/userguide/eks-networking.html</a></p>
<p><img alt="eks_multi-node" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks_multi-node.png" /></p>
<p><br></p>
<h3 id="aws-lb-controller">AWS LB Controller<a class="headerlink" href="#aws-lb-controller" title="Permanent link">&para;</a></h3>
<h4 id="_51">▼ セットアップ<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<p>（１）ローカルマシンにIAMポリシーの<code>.json</code>ファイルをダウンロードする。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html">https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ curl -o iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.0/docs/install/iam_policy.json
</code></pre></div></td></tr></table></div>
<p>（２）<code>.json</code>ファイルを使用して、IAMポリシーを作成する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws iam create-policy <span class="se">\</span>
    --policy-name AWSLoadBalancerControllerIAMPolicy <span class="se">\</span>
    --policy-document file://iam_policy.json
</code></pre></div></td></tr></table></div>
<p>（４）IAM Open ID Connect providerをEKSに紐づける。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>$ eksctl utils associate-iam-oidc-provider <span class="se">\</span>
    --region<span class="o">=</span>ap-northeast-1 <span class="se">\</span>
    --cluster<span class="o">=</span>foo-eks-cluster <span class="se">\</span>
    --approve

<span class="m">2022</span>-05-30 <span class="m">23</span>:39:04 <span class="o">[</span>ℹ<span class="o">]</span>  eksctl version <span class="m">0</span>.96.0
<span class="m">2022</span>-05-30 <span class="m">23</span>:39:04 <span class="o">[</span>ℹ<span class="o">]</span>  using region ap-northeast-1
<span class="m">2022</span>-05-30 <span class="m">23</span>:39:05 <span class="o">[</span>ℹ<span class="o">]</span>  IAM Open ID Connect provider is already associated with cluster <span class="s2">&quot;foo-eks-cluster&quot;</span> <span class="k">in</span> <span class="s2">&quot;ap-northeast-1&quot;</span>
</code></pre></div></td></tr></table></div>
<p>（５）ServiceAccountを作成し、IAMロールと紐づける。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>$ eksctl create iamserviceaccount <span class="se">\</span>
    --cluster<span class="o">=</span>foo-eks-cluster <span class="se">\</span>
    --namespace<span class="o">=</span>kube-system <span class="se">\</span>
    --name<span class="o">=</span>aws-load-balancer-controller <span class="se">\</span>
    --attach-policy-arn<span class="o">=</span>arn:aws:iam::&lt;アカウントID&gt;:policy/AWSLoadBalancerControllerIAMPolicy <span class="se">\</span>
    --override-existing-serviceaccounts <span class="se">\</span>
    --approve
</code></pre></div></td></tr></table></div>
<p>（６）ServiceAccountがデプロイされたことを確認する。</p>
<p>参考：<a href="https://developer.mamezou-tech.com/containers/k8s/tutorial/ingress/ingress-aws/">https://developer.mamezou-tech.com/containers/k8s/tutorial/ingress/ingress-aws/</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code>$ eksctl get iamserviceaccount <span class="se">\</span>
  --cluster foo-eks-cluster <span class="se">\</span>
  --name aws-load-balancer-controller <span class="se">\</span>
  --namespace kube-system

<span class="m">2022</span>-06-06 <span class="m">13</span>:47:33 <span class="o">[</span>ℹ<span class="o">]</span>  eksctl version <span class="m">0</span>.96.0
<span class="m">2022</span>-06-06 <span class="m">13</span>:47:33 <span class="o">[</span>ℹ<span class="o">]</span>  using region ap-northeast-1
NAMESPACE       NAME                            ROLE ARN
kube-system     aws-load-balancer-controller    arn:aws:iam::&lt;アカウントID&gt;:role/eksctl-foo-eks-cluster-addon-i-Role1-****

<span class="c1"># 作成されたServiceAccount</span>
$ kubectl get serviceaccount -n kube-system aws-load-balancer-controller -o yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::&lt;アカウントID&gt;:role/eksctl-foo-eks-cluster-addon-i-Role1-****
  creationTimestamp: <span class="s2">&quot;2022-05-29T12:59:15Z&quot;</span>
  labels:
    app.kubernetes.io/managed-by: eksctl
  name: aws-load-balancer-controller
  namespace: kube-system
  resourceVersion: <span class="s2">&quot;2103515&quot;</span>
  uid: *****
secrets:
- name: aws-load-balancer-controller-token-****
</code></pre></div></td></tr></table></div>
<p>（７）指定したリージョンにAWS LBコントローラーをデプロイする。この時、事前に作成したServiceAcountをALBに紐づける。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># FargateにAWS LBコントローラーをデプロイする場合</span>
$ helm install aws-load-balancer-controller eks/aws-load-balancer-controller <span class="se">\</span>
    -n kube-system <span class="se">\</span>
    --set <span class="nv">clusterName</span><span class="o">=</span>foo-eks-cluster <span class="se">\</span>
    --set serviceAccount.create<span class="o">=</span><span class="nb">false</span> <span class="se">\</span>
    --set serviceAccount.name<span class="o">=</span>aws-load-balancer-controller <span class="se">\</span>
    --set image.repository<span class="o">=</span><span class="m">602401143452</span>.dkr.ecr.ap-northeast-1.amazonaws.com/amazon/aws-load-balancer-controller <span class="se">\</span>
    --set <span class="nv">region</span><span class="o">=</span>ap-northeast-1 <span class="se">\</span>
    --set <span class="nv">vpcId</span><span class="o">=</span>&lt;VPCID&gt;

AWS Load Balancer controller installed!
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># EC2にAWS LBコントローラーをデプロイする場合</span>
$ helm install aws-load-balancer-controller eks/aws-load-balancer-controller <span class="se">\</span>
    -n kube-system <span class="se">\</span>
    --set <span class="nv">clusterName</span><span class="o">=</span>foo-eks-cluster <span class="se">\</span>
    --set serviceAccount.create<span class="o">=</span><span class="nb">false</span> <span class="se">\</span>
    --set serviceAccount.name<span class="o">=</span>aws-load-balancer-controller <span class="se">\</span>
    --set image.repository<span class="o">=</span><span class="m">602401143452</span>.dkr.ecr.ap-northeast-1.amazonaws.com/amazon/aws-load-balancer-controller

AWS Load Balancer controller installed!
</code></pre></div></td></tr></table></div>
<p>（８）AWS LBコントローラーがデプロイされ、READY状態になっていることを確認する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>$ helm list -n kube-system

NAME                            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                                   APP VERSION
aws-load-balancer-controller    kube-system     <span class="m">2</span>               <span class="m">2022</span>-01-01 <span class="m">00</span>:00:00.309065 +0900 JST    deployed        aws-load-balancer-controller-1.4.2      v2.4.2

$ kubectl get deployment -n kube-system aws-load-balancer-controller

NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
aws-load-balancer-controller   <span class="m">2</span>/2     <span class="m">2</span>            <span class="m">0</span>           22m
</code></pre></div></td></tr></table></div>
<p>もし、以下の様に、<code>53</code>番ポートへの接続でエラーになる場合は、CoreDNSによる名前解決が正しくできていないため、CoreDNSが正常に稼働しているかを確認する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="s">&quot;level&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;ts&quot;</span><span class="p p-Indicator">:</span><span class="err">*****</span><span class="nv">.*****</span><span class="p p-Indicator">,</span><span class="s">&quot;logger&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;controller-runtime.manager.controller.ingress&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;msg&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;Reconciler</span><span class="nv"> </span><span class="s">error&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;foo-ingress&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;namespace&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;foo&quot;</span><span class="p p-Indicator">,</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">:</span><span class="s">&quot;ingress:</span><span class="nv"> </span><span class="s">foo/foo-ingress:</span><span class="nv"> </span><span class="s">WebIdentityErr:</span><span class="nv"> </span><span class="s">failed</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">retrieve</span><span class="nv"> </span><span class="s">credentials\ncaused</span><span class="nv"> </span><span class="s">by:</span><span class="nv"> </span><span class="s">RequestError:</span><span class="nv"> </span><span class="s">send</span><span class="nv"> </span><span class="s">request</span><span class="nv"> </span><span class="s">failed\ncaused</span><span class="nv"> </span><span class="s">by:</span><span class="nv"> </span><span class="s">Post</span><span class="nv"> </span><span class="s">\&quot;https://sts.ap-northeast-1.amazonaws.com/\&quot;:</span><span class="nv"> </span><span class="s">dial</span><span class="nv"> </span><span class="s">tcp:</span><span class="nv"> </span><span class="s">lookup</span><span class="nv"> </span><span class="s">sts.ap-northeast-1.amazonaws.com</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">nnn.nn.n.nn:53:</span><span class="nv"> </span><span class="s">read</span><span class="nv"> </span><span class="s">udp</span><span class="nv"> </span><span class="s">nn*.*.*.*nn:43958-&gt;nnn.nn.n.nn:53:</span><span class="nv"> </span><span class="s">read:</span><span class="nv"> </span><span class="s">connection</span><span class="nv"> </span><span class="s">refused&quot;</span><span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（９）Ingressをデプロイし、IngressからALB Ingressを自動的に作成させる。以下の条件を満たす必要がある。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html">https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html</a></p>
<h4 id="ingressalb">▼ IngressとALBの紐付け<a class="headerlink" href="#ingressalb" title="Permanent link">&para;</a></h4>
<p>参考：</p>
<ul>
<li><a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/">https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/</a></li>
<li><a href="https://qiita.com/murata-tomohide/items/ea4d9acefda92e05e20f">https://qiita.com/murata-tomohide/items/ea4d9acefda92e05e20f</a></li>
</ul>
<table>
<thead>
<tr>
<th>項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alb.ingress.kubernetes.io/certificate-arn</code></td>
<td>ALB IngressでHTTPS通信を受け付ける場合に、SSL証明書のARNを設定する。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/listen-ports</code></td>
<td>ALB Ingressでインバウンド通信を受け付けるポート番号を設定する。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/scheme</code></td>
<td>ALB Ingressのスキームを設定する。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/subnets</code></td>
<td>ALB Ingressのルーティング先とするサブネットを設定する。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/target-type</code></td>
<td>ルーティング先のターゲットタイプを設定する。Fargateの場合は、<code>ip</code>を設定する必要がある。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/waf-acl-id</code></td>
<td>LBに紐づけるWAFv1のIDを設定する。ALBと同じリージョンで、WAFv1を作成する必要がある。</td>
</tr>
<tr>
<td><code>alb.ingress.kubernetes.io/wafv2-acl-arn</code></td>
<td>LBに紐づけるWAFv2のARNを設定する。ALBと同じリージョンで、WAFv2を作成する必要がある。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_52">デバッグ<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h3>
<h4 id="_53">▼ ダッシュボード<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h4>
<p>（１）EKSのコンテキストを作成する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html">https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ aws eks update-kubeconfig --region ap-northeast-1 --name foo-eks-cluster
</code></pre></div></td></tr></table></div>
<p>（２）kubectlコマンドの宛先を、EKSのkube-apiserverに変更する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#deploy-dashboard">https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#deploy-dashboard</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl config use-context &lt;ClusterのARN&gt;
</code></pre></div></td></tr></table></div>
<p>（３）マニフェストファイルを使用して、ダッシュボードのKubernetesリソースをEKSにデプロイする。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#eks-admin-service-account">https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html#eks-admin-service-account</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.5/aio/deploy/recommended.yaml
</code></pre></div></td></tr></table></div>
<p>（４）ダッシュボードに安全に接続するために、ServiceAccountをEKSにデプロイする</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl apply -f service-account.yml
</code></pre></div></td></tr></table></div>
<p>（５）トークンの文字列を取得する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl -n kube-system describe secret <span class="k">$(</span>kubectl -n kube-system get secret <span class="p">|</span> grep eks-admin <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
<p>（６）ローカルマシンからEKSにポートフォワーディングを実行する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl proxy
</code></pre></div></td></tr></table></div>
<p>（７）ダッシュボードに接続する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nf">GET</span> <span class="nn">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#!/login</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h2 id="03-03-02-on-fargate">03-03-02. on Fargate<a class="headerlink" href="#03-03-02-on-fargate" title="Permanent link">&para;</a></h2>
<h3 id="_54">セットアップ<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h3>
<h4 id="_55">▼ 制約<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h4>
<p>EC2にはない制約については、以下のリンクを参考にせよ。</p>
<p>参考：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/fargate.html">https://docs.aws.amazon.com/eks/latest/userguide/fargate.html</a></li>
<li><a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/install-ssm-agent-on-amazon-eks-worker-nodes-by-using-kubernetes-daemonset.html">https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/install-ssm-agent-on-amazon-eks-worker-nodes-by-using-kubernetes-daemonset.html</a></li>
</ul>
<h4 id="_56">▼ メトリクス収集<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h4>
<p>ワーカーNode内のメトリクスのデータポイントを収集する上で、FargateはDaemonSetに非対応のため、メトリクス収集コンテナをサイドカーコンテナとして設置する必要がある。収集ツールとして、OpenTelemetryをサポートしている。</p>
<p>参考：<a href="https://aws.amazon.com/jp/blogs/news/introducing-amazon-cloudwatch-container-insights-for-amazon-eks-fargate-using-aws-distro-for-opentelemetry/">https://aws.amazon.com/jp/blogs/news/introducing-amazon-cloudwatch-container-insights-for-amazon-eks-fargate-using-aws-distro-for-opentelemetry/</a></p>
<h4 id="_57">▼ ログルーティング<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<p>ワーカーNode内のログを転送する上で、FargateはDaemonSetに非対応のため、ログ転送コンテナをサイドカーコンテナとして設置する必要がある。ロググーティングツールとして、FluentBitをサポートしている。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/fargate-logging.html">https://docs.aws.amazon.com/eks/latest/userguide/fargate-logging.html</a></p>
<p>（１）ログ転送コンテナのためのNamespaceを作成する。名前は、必ず<code>aws-observability</code>とする。</p>
<p>参考：<a href="https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/">https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/</a> </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span><span class="w"></span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-observability</span><span class="w"></span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">aws-observability</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（２）<code>aws-observability</code>内で<code>aws-logging</code>という名前のConfigMapを作成することにより、ログ転送コンテナとしてFluentBitコンテナが作成され、PodからCloudWatchログにログを送信できるようになる。名前は、必ず<code>aws-logging</code>とする。</p>
<p>参考：<a href="https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/">https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$ kubectl apply -f config-map.yaml
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span><span class="w"></span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-logging</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-observability</span><span class="w"></span>
<span class="nt">data</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">output.conf</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">    </span><span class="no">[OUTPUT]</span><span class="w"></span>
<span class="w">        </span><span class="no">Name cloudwatch</span><span class="w"></span>
<span class="w">        </span><span class="no">Match *</span><span class="w"></span>
<span class="w">        </span><span class="no">region ap-northeast-1</span><span class="w"></span>
<span class="w">        </span><span class="no">log_group_name fluent-bit-cloudwatch</span><span class="w"></span>
<span class="w">        </span><span class="no">log_stream_prefix from-fluent-bit-</span><span class="w"></span>
<span class="w">        </span><span class="no">auto_create_group true</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（３）ワーカーNode（EC2、Fargate）にECRやCloudWatchへのアクセス権限を持つポッド実行ロールを付与しておく。これにより、KubernetesリソースにAWSへのアクセス権限が付与され、ServiceAccountやSecretを作成せずとも、PodがECRからコンテナイメージをプルできる様になる。一方で、Pod内のコンテナには権限が付与されないため、Podが作成された後に必要な権限（例：コンテナがRDSにアクセスする権限など）に関しては、ServiceAccountとIAMロールの紐付けが必要である。</p>
<p>参考：</p>
<ul>
<li><a href="https://nishipy.com/archives/1122">https://nishipy.com/archives/1122</a></li>
<li><a href="https://toris.io/2021/01/how-kubernetes-pulls-private-container-images-on-aws/">https://toris.io/2021/01/how-kubernetes-pulls-private-container-images-on-aws/</a></li>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/fargate-getting-started.html">https://docs.aws.amazon.com/eks/latest/userguide/fargate-getting-started.html</a></li>
<li><a href="https://kumano-te.com/activities/apply-iam-roles-to-eks-service-accounts">https://kumano-te.com/activities/apply-iam-roles-to-eks-service-accounts</a></li>
<li><a href="https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/">https://blog.mmmcorp.co.jp/blog/2021/08/11/post-1704/</a></li>
</ul>
<p><br></p>
<h3 id="fargate-node">Fargate Node<a class="headerlink" href="#fargate-node" title="Permanent link">&para;</a></h3>
<h4 id="fargate-node_1">▼ Fargate Nodeとは<a class="headerlink" href="#fargate-node_1" title="Permanent link">&para;</a></h4>
<p>Fargate上で稼働するKubernetesのホストのこと。KubernetesのNodeに相当する。EC2と比べてカスタマイズ性が低く、Node当たりで稼働するPod数はAWSが管理する。一方で、各EC2のサチュレーションをユーザーが管理しなくてもよいため、Kubernetesのホストの管理が楽である。</p>
<p>参考：</p>
<ul>
<li><a href="https://www.sunnycloud.jp/column/20210315-01/">https://www.sunnycloud.jp/column/20210315-01/</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/using-alb-ingress-controller-with-amazon-eks-on-fargate/">https://aws.amazon.com/jp/blogs/news/using-alb-ingress-controller-with-amazon-eks-on-fargate/</a></li>
</ul>
<p><img alt="eks_on_fargate" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks_on_fargate.png" /></p>
<h4 id="fargate_2">▼ Fargateプロファイル<a class="headerlink" href="#fargate_2" title="Permanent link">&para;</a></h4>
<p>Fargateを設定する。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/fargate-profile.html#fargate-profile-components">https://docs.aws.amazon.com/eks/latest/userguide/fargate-profile.html#fargate-profile-components</a></p>
<table>
<thead>
<tr>
<th>コンポーネント名</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pod実行ロール</td>
<td>kubeletがAWSリソースにアクセスできるように、Podにロールを設定する。</td>
<td>・実行ポリシー（AmazonEKSFargatePodExecutionRolePolicy）には、ECRへのアクセス権限のみが付与されている。<br>・信頼されたエンティティでは、<code>eks-fargate-pods.amazonaws.com</code>を設定する必要がある。<br>参考：<a href="https://docs.aws.amazon.com/eks/latest/userguide/pod-execution-role.html">https://docs.aws.amazon.com/eks/latest/userguide/pod-execution-role.html</a></td>
</tr>
<tr>
<td>サブネット</td>
<td>EKS Fargate Nodeが起動するサブネットIDを設定する。</td>
<td>プライベートサブネットを設定する必要がある。</td>
</tr>
<tr>
<td>ポッドセレクタ（Namespace）</td>
<td>EKS Fargate Node上で稼働させるPodを固定できるように、PodのNamespaceの値を設定する。</td>
<td>・<code>kube-system</code>や<code>default</code>を指定するKubernetesリソースが稼働できるように、ポッドセレクタにこれを追加する必要がある。<br>・IstioやArgoCDを、それ専用のNamespaceで稼働させる場合は、そのNamespaceのためのプロファイルを作成しておく必要がある。</td>
</tr>
<tr>
<td>ポッドセレクタ（Label）</td>
<td>EKS Fargate Node上で稼働させるPodを固定できるように、Podの任意のlabelキーの値を設定する。</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="03-03-03-on-ec2">03-03-03. on EC2<a class="headerlink" href="#03-03-03-on-ec2" title="Permanent link">&para;</a></h2>
<h3 id="ec2-node">EC2 Node<a class="headerlink" href="#ec2-node" title="Permanent link">&para;</a></h3>
<h4 id="ec2-node_1">▼ EC2 Nodeとは<a class="headerlink" href="#ec2-node_1" title="Permanent link">&para;</a></h4>
<p>EC2で稼働するKubernetesのホストのこと。Fargateと比べてカスタマイズ性が高く、Node当たりで稼働するPod数に重み付けを設定できる。一方で、各EC2のサチュレーションをユーザーが管理しなければならないため、Kubernetesのホストの管理が大変である。</p>
<p>参考：<a href="https://www.sunnycloud.jp/column/20210315-01/">https://www.sunnycloud.jp/column/20210315-01/</a></p>
<p><img alt="eks_on_ec2" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/eks_on_ec2.png" /></p>
<p><br></p>
<h2 id="04-efselastic-file-system">04. EFS：Elastic File System<a class="headerlink" href="#04-efselastic-file-system" title="Permanent link">&para;</a></h2>
<p><img alt="EFSのファイル共有機能" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/EFSのファイル共有機能.png" /></p>
<h3 id="efs">EFSとは<a class="headerlink" href="#efs" title="Permanent link">&para;</a></h3>
<p>マウントターゲットと接続された片方のEC2インスタンスから、ファイルを読み出し、これをもう一方に出力する。ファイルの実体はいずれかのEC2に存在しているため、接続を切断している間、片方のEC2インスタンス内のファイルは無くなる。再接続すると、切断直前のファイルが再び表示されようになる。</p>
<p><br></p>
<h3 id="_58">セットアップ<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>パフォーマンスモード</td>
<td></td>
<td></td>
</tr>
<tr>
<td>スループットモード</td>
<td>EFSのスループット性能を設定する。</td>
<td></td>
</tr>
<tr>
<td>ライフサイクルポリシー</td>
<td>しばらくリクエストされていないファイルが低頻度アクセス（IA：Infrequent Access）ストレージクラスに移動保存するまでの期限を設定する。</td>
<td>・ライフサイクルポリシーを有効にしない場合、スタンダードストレージクラスのみが使用される。<br>・画面から両ストレージのサイズを確認できる。<br>参考：<a href="https://ap-northeast-1.console.aws.amazon.com/efs/home?region=ap-northeast-1#/file-systems/fs-f77d60d6">https://ap-northeast-1.console.aws.amazon.com/efs/home?region=ap-northeast-1#/file-systems/fs-f77d60d6</a></td>
</tr>
<tr>
<td>ファイルシステムポリシー</td>
<td>他のAWSリソースがEFSを利用する時のポリシーを設定する。</td>
<td></td>
</tr>
<tr>
<td>自動バックアップ</td>
<td>AWS Backupに定期的に保存するかどうかを設定する。</td>
<td></td>
</tr>
<tr>
<td>ネットワーク</td>
<td>マウントターゲットを設置するサブネット、セキュリティグループを設定する。</td>
<td>・サブネットは、ファイル供給の速度の観点から、マウントターゲットにアクセスするAWSリソースと同じにする。<br>・セキュリティグループは、EC2からのNFSプロトコルアクセスを許可したものを設定する。EC2のセキュリティグループを通過したアクセスだけを許可するために、IPアドレスでは、EC2のセキュリティグループを設定する。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_59">スペック<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h3>
<h4 id="_60">▼ バーストモードの仕組み<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h4>
<p>スループット性能の自動スケーリングに残高があり、ベースラインを超過した分だけ自動スケーリング残高が減っていく。また、ベースライン未満の分は残高として蓄積されていく。</p>
<p><img alt="burst-mode_balance" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/burst-mode_credit-balance-algorithm.png" /></p>
<p>元の残高は、ファイルシステムのスタンダードストレージクラスのサイズに応じて大きくなる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/efs/latest/ug/performance.html#efs-burst-credits">https://docs.aws.amazon.com/efs/latest/ug/performance.html#efs-burst-credits</a></p>
<p><img alt="burst-mode_credit" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/burst-mode_credit-balance-size.png" /></p>
<p>残高は、<code>BurstCreditBalance</code>メトリクスから確認できる。このメトリクスが常に減少し続けている場合はプロビジョニングモードの方がより適切である。</p>
<p>参考：<a href="https://docs.aws.amazon.com/efs/latest/ug/performance.html#using-throughputmode">https://docs.aws.amazon.com/efs/latest/ug/performance.html#using-throughputmode</a></p>
<h4 id="_61">▼ プロビジョニングモードの仕組み<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h4>
<p>スループット性能の自動スケーリング機能は無いが、一定の性能は保証されている。</p>
<p>参考：<a href="https://docs.aws.amazon.com/efs/latest/ug/performance.html#provisioned-throughput">https://docs.aws.amazon.com/efs/latest/ug/performance.html#provisioned-throughput</a></p>
<p><img alt="burst-mode_credit" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/provisioning-mode_credit-balance-size.png" /></p>
<p><br></p>
<h3 id="_62">コマンド<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h3>
<h4 id="_63">▼ マウント<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h4>
<p>DNS経由で、EFSマウントヘルパーを使用した場合を示す。</p>
<p>参考：<a href="https://qiita.com/tandfy/items/829f9fcc68c4caabc660">https://qiita.com/tandfy/items/829f9fcc68c4caabc660</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># EFSで、マウントポイントを登録</span>
<span class="c1"># mount -t efs -o tls &lt;ファイルシステムID&gt;:&lt;マウント元ディレクトリ&gt; &lt;マウントポイント&gt;</span>
$ mount -t efs -o tls fs-*****:/ /var/www/foo

<span class="c1"># マウントポイントを解除</span>
$ umount /var/www/foo

<span class="c1"># dfコマンドでマウントしているディレクトリを確認できる</span>
$ df
Filesystem                                  1K-blocks Used Available Use% Mounted on
fs-*****.efs.ap-northeast-1.amazonaws.com:/ xxx       xxx  xxx       <span class="m">1</span>%   /var/www/cerenavi
</code></pre></div></td></tr></table></div>
<p><br></p>
<h2 id="05-elasticache">05. ElastiCache<a class="headerlink" href="#05-elasticache" title="Permanent link">&para;</a></h2>
<h3 id="elasticcache">ElasticCacheとは<a class="headerlink" href="#elasticcache" title="Permanent link">&para;</a></h3>
<p>アプリケーションの代わりに、セッション、クエリキャッシュ、を管理する。RedisとMemcachedがある。</p>
<p><br></p>
<h2 id="05-02-elasticache-for-redis">05-02. ElastiCache for Redis<a class="headerlink" href="#05-02-elasticache-for-redis" title="Permanent link">&para;</a></h2>
<h3 id="_64">セットアップ<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>設定項目</th>
<th>説明</th>
<th>補足</th>
</tr>
</thead>
<tbody>
<tr>
<td>クラスターエンジン</td>
<td>全てのRedisノードのキャッシュエンジンを設定する。Redis通常モード、Redisクラスターモードから選択する。</td>
<td>Redisクラスターモードと同様に、Redis通常モードもクラスター構成になる。ただし、クラスターモードとはクラスターの構成方法が異なる。</td>
</tr>
<tr>
<td>ロケーション</td>
<td></td>
<td></td>
</tr>
<tr>
<td>エンジンバージョンの互換性</td>
<td>全てのRedisノードのキャッシュエンジンのバージョンを設定する。</td>
<td>マイナーバージョンが自動的に更新されないように、例えば『<code>6.x</code>』は設定しない方が良い。</td>
</tr>
<tr>
<td>パラメーターグループ</td>
<td>全てのRedisノードのグローバルパラメーターを設定する。</td>
<td>デフォルトを使用せずに独自定義する場合、事前に作成しておく必要がある。</td>
</tr>
<tr>
<td>ノードのタイプ</td>
<td></td>
<td></td>
</tr>
<tr>
<td>レプリケーション数</td>
<td>プライマリーノードとは別に、リードレプリカノードをいくつ作成するかを設定する。</td>
<td>マルチAZにプライマリーノードとリードレプリカノードを1つずつ配置させる場合、ここでは『<code>1</code>個』を設定する。</td>
</tr>
<tr>
<td>マルチAZ</td>
<td>プライマリーノードとリードレプリカを異なるAZに配置するかどうかを設定する。合わせて、自動フェイルオーバーを実行できるようになる。</td>
<td></td>
</tr>
<tr>
<td>サブネットグループ</td>
<td>Redisにアクセスできるサブネットを設定する。</td>
<td></td>
</tr>
<tr>
<td>セキュリティ</td>
<td>セキュリティグループを設定する。</td>
<td></td>
</tr>
<tr>
<td>クラスターへのデータのインポート</td>
<td>あらかじめ作成しておいたバックアップをインポートし、これを元にRedisを作成する。</td>
<td>セッションやクエリキャッシュを引き継げる。そのため、新しいRedisへのセッションデータの移行に役立つ。<br>参考：<a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/backups-seeding-redis.html">https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/backups-seeding-redis.html</a></td>
</tr>
<tr>
<td>バックアップ</td>
<td>バックアップの有効化、保持期間、時間を設定する。</td>
<td>バックアップを取るほどでもないため、無効化しておいて問題ない。</td>
</tr>
<tr>
<td>メンテナンス</td>
<td>メンテナンスの時間を設定する。</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="redis">Redisクラスター<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h3>
<h4 id="redis_1">▼ Redisクラスターとは<a class="headerlink" href="#redis_1" title="Permanent link">&para;</a></h4>
<p><img alt="redis-cluster" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/redis-cluster.png" /></p>
<p>複数のRedisノードを持つRedisシャードから構成されている。<code>1</code>個のリクエストを処理するグループ単位である。</p>
<p>参考：</p>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Terms.html">https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Terms.html</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.Clusters">https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.Clusters</a></p>
</li>
</ul>
<h4 id="_65">▼ クラスターモード<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h4>
<p>クラスターモードを有効にすると、Redisクラスター内に複数のRedisシャードが作成される。反対に無効化すると、シャードは1つだけ作成される。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.ReplicationGroups">https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.ReplicationGroups</a></p>
<p><br></p>
<h3 id="redis_2">Redisシャード<a class="headerlink" href="#redis_2" title="Permanent link">&para;</a></h3>
<h4 id="redis_3">▼ Redisシャードとは<a class="headerlink" href="#redis_3" title="Permanent link">&para;</a></h4>
<p>Redisノードのグループ。同じデータを保持するグループ単位であり、プライマリーノードとレプリカノードが含まれる。同じRedisシャード内にあるRedisノード間では、セッションやクエリキャッシュが同期される。一方で、AuroraのDBクラスターはこれに相当する概念である。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.Shards">https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.Components.html#WhatIs.Components.Shards</a></p>
<p><br></p>
<h3 id="redis_4">Redisノード<a class="headerlink" href="#redis_4" title="Permanent link">&para;</a></h3>
<h4 id="redis_5">▼ Redisノードとは<a class="headerlink" href="#redis_5" title="Permanent link">&para;</a></h4>
<p>セッションやクエリキャッシュを保持するインスタンスのこと。</p>
<p><br></p>
<h3 id="_66">セッション管理機能<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h3>
<h4 id="_67">▼ セッション管理機能とは<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h4>
<p>サーバー内のセッションデータの代わりにセッションIDを管理し、冗長化されたアプリケーション間で共通のセッションIDを使用できるようにする。そのため、リリース後に既存のセッションが破棄されることがなくなり、ログイン状態を保持できるようになる。セッションIDについては、以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://hiroki-it.github.io/tech-notebook-mkdocs/software/software_application_collaboration_api_restful.html">https://hiroki-it.github.io/tech-notebook-mkdocs/software/software_application_collaboration_api_restful.html</a></p>
<p><img alt="ElastiCacheのセッション管理機能" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/ElastiCacheのセッション管理機能.png" /></p>
<p><br></p>
<h3 id="_68">クエリキャッシュ管理機能<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h3>
<h4 id="_69">▼ クエリキャッシュ管理機能とは<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h4>
<p>RDSに対するSQLと読み出されたデータを、キャッシュとして管理する。</p>
<p><img alt="クエリCache管理機能_1" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/クエリCache管理機能_1.png" /></p>
<p>（１）アプリケーションは、RDSの前に、Redisに対してSQLを実行する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">users</span><span class="p">;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（２）始めて実行されたSQLの場合、RedisはSQLをキーとして保存し、キャッシュが無いことがアプリケーションに返却する。</p>
<p>（３）アプリケーションはRDSに対してSQLを実行する。</p>
<p>（４）データが読み出される。</p>
<p>（５）アプリケーションはRedisにデータを登録する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ElastiCacheには、SQLの実行結果がまだ保存されていない</span>

*** no cache ***
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;1&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;alice&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;2&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;bob&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;3&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;charles&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;4&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;donny&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;5&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;elie&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;6&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;fabian&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;7&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;gabriel&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;8&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;harold&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;9&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;Ignatius&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;10&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;jonny&quot;</span><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p><img alt="クエリCache管理機能_2" src="https://raw.githubusercontent.com/hiroki-it/tech-notebook/master/images/クエリCache管理機能_2.png" /></p>
<p>（６）次回、アプリケーションは、RDSの前に、Redisに対してSQLを実行する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">users</span><span class="p">;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>（７）Redisは、SQLをキーにしてデータを特定し、アプリケーションに返却する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ElastiCacheには、SQLの実行結果が既に保存されている</span>

*** cache hit ***
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;1&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;alice&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;2&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;bob&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;3&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;charles&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;4&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;donny&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;5&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;elie&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;6&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;fabian&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;7&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;gabriel&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;8&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;harold&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;9&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;Ignatius&quot;</span><span class="o">}</span>
<span class="o">{</span><span class="s2">&quot;id&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;10&quot;</span>, <span class="s2">&quot;name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;jonny&quot;</span><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_70">▼ クエリキャッシュの操作<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Redis接続コマンド</span>
$ /usr/local/sbin/redis-stable/src/redis-cli <span class="se">\</span>
    -c <span class="se">\</span>
    -h &lt;Redisのホスト名&gt; <span class="se">\</span>
    -p <span class="m">6379</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Redis接続中の状態</span>
<span class="c1"># 全てのキーを表示</span>
redis *****:6379&gt; keys *
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Redis接続中の状態</span>
<span class="c1"># キーを指定して、対応する値を表示</span>
redis *****:6379&gt; <span class="nb">type</span> &lt;キー名&gt;
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Redis接続中の状態</span>
<span class="c1"># Redisが受け取ったコマンドをフォアグラウンドで表示</span>
redis *****:6379&gt; monitor
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="_71">障害対策<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h3>
<h4 id="_72">▼ フェイルオーバー<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h4>
<p>ノードの障害を検知し、障害が発生したノードを新しいものに置き換わる。</p>
<table>
<thead>
<tr>
<th>障害の発生したノード</th>
<th>挙動</th>
</tr>
</thead>
<tbody>
<tr>
<td>プライマリーノード</td>
<td>リードレプリカの1つがプライマリーノードに昇格し、障害が起きたプライマリーノードと置き換わる。</td>
</tr>
<tr>
<td>リードレプリカノード</td>
<td>障害が起きたリードレプリカノードが、別の新しいものに置き換わる。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="redis_6">Redisクラスターのダウンタイム<a class="headerlink" href="#redis_6" title="Permanent link">&para;</a></h3>
<h4 id="_73">▼ ダウンタイムの発生条件<a class="headerlink" href="#_73" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>変更する項目</th>
<th>ダウンタイムの有無</th>
<th>ダウンタイム</th>
</tr>
</thead>
<tbody>
<tr>
<td>エンジンバージョン</td>
<td>あり</td>
<td>1分30秒ほどのダウンタイムが発生する。</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_74">計画的なダウンタイム<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h3>
<h4 id="_75">▼ 計画的なダウンタイムとは<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h4>
<p>Redisクラスターでは、エンジンバージョンなどのアップグレード時に、Redisノードの再起動が必要である。サイトの利用者に与える影響を小さくできるように、計画的にダウンタイムを発生させる必要がある。</p>
<h4 id="_76">▼ バックアップとインポートによるダウンタイムの最小化<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h4>
<p>以下の手順で、ダウンタイムを最小限にしてアップグレードできる。</p>
<p>（１）RedisのセッションやクエリキャッシュをS3にエクスポートする。</p>
<p>（２）新しいRedisを作成する。この時、インポートを使用して、セッションやクエリキャッシュを引き継いだRedisクラスターを別途作成する。</p>
<p>（３）新しく作成したRedisクラスターをアップグレードする。</p>
<p>（４）アプリケーションの接続先を古いRedisクラスターから新しいものに変更する。</p>
<p>（５）古いRedisクラスターを削除する。</p>
<p><br></p>
<h2 id="05-eventbridgecloudwatch">05. EventBridge（CloudWatchイベント）<a class="headerlink" href="#05-eventbridgecloudwatch" title="Permanent link">&para;</a></h2>
<h3 id="eventbridgecloudwatch">EventBridge（CloudWatchイベント）とは<a class="headerlink" href="#eventbridgecloudwatch" title="Permanent link">&para;</a></h3>
<p>AWSリソースで起こったイベントを、他のAWSリソースに転送する。サポート対象のAWSリソースは以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/what-is-amazon-eventbridge.html">https://docs.aws.amazon.com/eventbridge/latest/userguide/what-is-amazon-eventbridge.html</a></p>
<p><br></p>
<h3 id="_77">パターン<a class="headerlink" href="#_77" title="Permanent link">&para;</a></h3>
<h4 id="_78">▼ イベントパターン<a class="headerlink" href="#_78" title="Permanent link">&para;</a></h4>
<p>指定したAWSリソースでイベントが起こると、以下のようなJSONが送信される。イベントパターンを定義し、JSON構造が一致するイベントのみをターゲットに転送する。イベントパターンに定義しないキーは任意のデータと見なされる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/CloudWatchEventsandEventPatterns.html">https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/CloudWatchEventsandEventPatterns.html</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*****&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;detail-type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;イベント名&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;source&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;aws.&lt;AWSリソース名&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;account&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*****&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;time&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;2021-01-01T00:00:00Z&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;us-west-1&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;resources&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;&lt;イベントを起こしたリソースのARN&gt;&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;detail&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="nv">// その時々のイベントごとに異なるデータ</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><strong>＊実装例＊</strong></p>
<p>Amplifyの指定したIDのアプリケーションが、<code>Amplify Deployment Status Change</code>のイベントを送信し、これの<code>jobStatus</code>が<code>SUCCEED</code>/<code>FAILED</code>だった場合、これを転送する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;detail&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;appId&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;foo&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;bar&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;jobStatus&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;SUCCEED&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;FAILED&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;detail-type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Amplify</span><span class="nv"> </span><span class="s">Deployment</span><span class="nv"> </span><span class="s">Status</span><span class="nv"> </span><span class="s">Change&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;source&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;aws.amplify&quot;</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h4 id="_79">▼ スケジュール<a class="headerlink" href="#_79" title="Permanent link">&para;</a></h4>
<p>cron式またはrate式を使用して、スケジュールを定義する。これとLambdaを組み合わせることにより、バッチ処理を作成できる。</p>
<p>参考：<a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html">https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html</a></p>
<p><br></p>
<h3 id="_80">ターゲット<a class="headerlink" href="#_80" title="Permanent link">&para;</a></h3>
<h4 id="_81">▼ ターゲットの一覧<a class="headerlink" href="#_81" title="Permanent link">&para;</a></h4>
<p>参考：<a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-targets.html">https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-targets.html</a></p>
<h4 id="_82">▼ デバッグ<a class="headerlink" href="#_82" title="Permanent link">&para;</a></h4>
<p>EventBridgeでは、どのようなJSONのイベントをターゲットに転送したかを確認できない。そこで、デバッグ時はEventBridgeのターゲットにLambdaを設定し、イベント構造をログから確認する。</p>
<p><strong>＊実装例＊</strong></p>
<p>あらかじめ、イベントの内容を出力する関数をLambdaに作成しておく。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">// Lambdaにデバッグ用の関数を用意する</span><span class="w"></span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">event</span><span class="p">},</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">));</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>対象のAWSリソースで任意のイベントが起こった時に、EventBridgeからLambdaに転送するように設定する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;source&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;aws.amplify&quot;</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>AWSリソースで意図的にイベントを起こし、Lambdaのロググループから内容を確認する。<code>detail</code>キーにイベントが割り当てられている。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;event&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;version&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;id&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;b4a07570-eda1-9fe1-da5e-b672a1705c39&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;detail-type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Amplify</span><span class="nv"> </span><span class="s">Deployment</span><span class="nv"> </span><span class="s">Status</span><span class="nv"> </span><span class="s">Change&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;source&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;aws.amplify&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;account&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;アカウントID&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;time&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;イベントの発生時間&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;ap-northeast-1&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;resources&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;&lt;AmplifyのアプリケーションのARN&gt;&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">],</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;detail&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;appId&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;アプリケーションID&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;branchName&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;ブランチ名&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;jobId&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;ジョブID&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;jobStatus&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&lt;CI/CDのステータス&gt;&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><br></p>
<h3 id="_83">入力<a class="headerlink" href="#_83" title="Permanent link">&para;</a></h3>
<h4 id="_84">▼ 入力トランスフォーマー<a class="headerlink" href="#_84" title="Permanent link">&para;</a></h4>
<p>入力パスで使用する値を抽出し、入力テンプレートで転送するJSONを定義できる。イベントのJSONの値を変数として出力できる。<code>event</code>キーをドルマークとして、ドットで繋いでアクセスする。</p>
<p><strong>＊実装例＊</strong></p>
<p>入力パスにて、使用する値を抽出する。Amplifyで起こったイベントのJSONを変数として取り出す。JSONのキー名が変数名として機能する。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;appId&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;$.detail.appId&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;branchName&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;$.detail.branchName&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;jobId&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;$.detail.jobId&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;jobStatus&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;$.detail.jobStatus&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;region&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;$.region&quot;</span><span class="w"></span>
<span class="p p-Indicator">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>入力テンプレートにて、転送するJSONを定義する。例えばここでは、Slackに送信するJSONに出力する。出力するときは、入力パスの変数名を『<code>&lt;&gt;</code>』で囲う。Slackに送信するメッセージの作成ツールは、以下のリンクを参考にせよ。</p>
<p>参考：<a href="https://app.slack.com/block-kit-builder">https://app.slack.com/block-kit-builder</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;channel&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Amplifyデプロイ完了通知&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;blocks&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;section&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;mrkdwn&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;:github:</span><span class="nv"> </span><span class="s">プルリクエスト検証用環境&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;context&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;elements&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;mrkdwn&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*結果*:</span><span class="nv"> </span><span class="s">&lt;jobStatus&gt;&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;context&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;elements&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;mrkdwn&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*ブランチ名*:</span><span class="nv"> </span><span class="s">&lt;branchName&gt;&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;context&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;elements&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;mrkdwn&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;*検証URL*:</span><span class="nv"> </span><span class="s">https://&lt;branchName&gt;.&lt;appId&gt;.amplifyapp.com&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">},</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;context&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">      </span><span class="s">&quot;elements&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">{</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;mrkdwn&quot;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">          </span><span class="s">&quot;text&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;:amplify:</span><span class="nv"> </span><span class="s">&lt;https://&lt;region&gt;.console.aws.amazon.com/amplify/home?region=&lt;region&gt;#/&lt;appId&gt;/&lt;branchName&gt;/&lt;jobId&gt;|*Amplifyコンソール*&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p><br></p>

  <hr>
<div class="md-source-file">
  <small>
    
      最終更新日:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-07-15</span>
      
    
  </small>
</div>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="フッター" >
      
        
        <a href="cloud_computing_aws_1.html" class="md-footer__link md-footer__link--prev" aria-label="前: A〜D" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                前
              </span>
              A〜D
            </div>
          </div>
        </a>
      
      
        
        <a href="cloud_computing_aws_3.html" class="md-footer__link md-footer__link--next" aria-label="次: F〜K" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                次
              </span>
              F〜K
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/hiroki-it" target="_blank" rel="noopener" title="GitHubアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="https://twitter.com/Hiroki__IT" target="_blank" rel="noopener" title="Twitterアカウント" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.placeholder": "\u691c\u7d22", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>